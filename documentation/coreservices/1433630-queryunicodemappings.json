{
  "abstract": [
    {
      "type": "text",
      "text": "Returns a list of the conversion mappings available onthe system that meet specified matching criteria and returns thenumber of mappings found. "
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coreservices",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/coreservices/1433630-queryunicodemappings",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1433630,
  "kind": "symbol",
  "metadata": {
    "title": "QueryUnicodeMappings",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Core Services"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.0",
        "current": "12.1"
      }
    ],
    "externalID": "c:@F@QueryUnicodeMappings",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/coreservices/1433630-queryunicodemappings"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coreservices": {
      "title": "Core Services",
      "identifier": "doc://com.apple.documentation/documentation/coreservices",
      "url": "/documentation/coreservices",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core": {
      "title": "Carbon Core",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core",
      "url": "/documentation/coreservices/carbon_core",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager": {
      "title": "Text Encoding Conversion Manager",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324": {
      "title": "Result Codes",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324",
      "kind": "article",
      "role": "task",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433554-unicode_matching_masks": {
      "title": "Unicode Matching Masks",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433554-unicode_matching_masks",
      "kind": "symbol",
      "role": "containerSymbol",
      "url": "/documentation/coreservices/1433554-unicode_matching_masks"
    },
    "doc://com.apple.documentation/documentation/coreservices/unicodemapping": {
      "title": "UnicodeMapping",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/unicodemapping",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/unicodemapping"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433665-countunicodemappings": {
      "title": "CountUnicodeMappings",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433665-countunicodemappings",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433665-countunicodemappings",
      "abstract": [
        {
          "type": "text",
          "text": "Counts available mappings that meet the specified matchingcriteria."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1433630-queryunicodemappings#2557295": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433630-queryunicodemappings#2557295",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/coreservices/1433630-queryunicodemappings#2557295"
    },
    "doc://com.apple.documentation/documentation/coreservices/constunicodemappingptr": {
      "title": "ConstUnicodeMappingPtr",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/constunicodemappingptr",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/constunicodemappingptr"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433630-queryunicodemappings": {
      "title": "QueryUnicodeMappings",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433630-queryunicodemappings",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433630-queryunicodemappings",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a list of the conversion mappings available onthe system that meet specified matching criteria and returns thenumber of mappings found. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/coreservices/1433665-countunicodemappings"
      ],
      "title": "Obtaining Unicode Mapping Information ",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "identifier": "symbol-1480124",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "QueryUnicodeMappings"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OptionBits",
              "text": "OptionBits"
            },
            {
              "kind": "text",
              "text": " iFilter, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ConstUnicodeMappingPtr",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/constunicodemappingptr",
              "text": "ConstUnicodeMappingPtr"
            },
            {
              "kind": "text",
              "text": " iFindMapping, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " iMaxCount, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " *oActualCount, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@UnicodeMapping",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/unicodemapping",
              "text": "UnicodeMapping"
            },
            {
              "kind": "text",
              "text": " oReturnedMappings[]);"
            }
          ],
          "platforms": [
            "macOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "iFilter",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Filter control flags representing the six values given in the Unicode mapping structure that this function uses to match against in determining which mappings on the system to return to your application. The filter control flag enumerations, described in "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1433554-unicode_matching_masks"
                },
                {
                  "type": "text",
                  "text": ", define the constants for the flags and their masks. You can include in the search criteria any of the three text encoding values—base, variant, and format—for both the Unicode encoding and the other specified encoding. For any flag not turned on, the value is ignored the function does not check the corresponding value of the mapping tables on the system. "
                }
              ]
            }
          ]
        },
        {
          "name": "iFindMapping",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A structure of type "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/unicodemapping"
                },
                {
                  "type": "text",
                  "text": " containing the text encodings whose values are to be matched. "
                }
              ]
            }
          ]
        },
        {
          "name": "iMaxCount",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The maximum number of mappings that can be returned. You provide this value to identify the number of elements in the array pointed to by the "
                },
                {
                  "type": "codeVoice",
                  "code": "oReturnedMappings"
                },
                {
                  "type": "text",
                  "text": " parameter that your application allocated. If the function identifies more matching mappings than the array can hold, it returns as many of them as fit. The function also returns a "
                },
                {
                  "type": "codeVoice",
                  "code": "kTECArrayFullErr"
                },
                {
                  "type": "text",
                  "text": " in this case. "
                }
              ]
            }
          ]
        },
        {
          "name": "oActualCount",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, a pointer to the number of matching mappings found. This number may be greater than the number of mappings specified by "
                },
                {
                  "type": "codeVoice",
                  "code": "iMaxCount"
                },
                {
                  "type": "text",
                  "text": " if more matching mappings are found than can fit in the "
                },
                {
                  "type": "codeVoice",
                  "code": "oReturnedMappings"
                },
                {
                  "type": "text",
                  "text": " array."
                }
              ]
            }
          ]
        },
        {
          "name": "oReturnedMappings",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer to an array of structures of type "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/unicodemapping"
                },
                {
                  "type": "text",
                  "text": ". On input, this pointer refers to an array for the matching mappings returned by the function. To allocate sufficient elements for the array, you can use the function "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1433665-countunicodemappings"
                },
                {
                  "type": "text",
                  "text": " to determine the number of mappings returned for given values of the "
                },
                {
                  "type": "codeVoice",
                  "code": "iFilter"
                },
                {
                  "type": "text",
                  "text": " and "
                },
                {
                  "type": "codeVoice",
                  "code": "iFindMapping"
                },
                {
                  "type": "text",
                  "text": " parameters. On return, a pointer to an array that holds the matching mappings. If there are more matches than the array can hold, the function returns as many of them as will fit and a "
                },
                {
                  "type": "codeVoice",
                  "code": "kTECBufferBelowMinimumSizeErr"
                },
                {
                  "type": "text",
                  "text": " error result. The "
                },
                {
                  "type": "codeVoice",
                  "code": "oActualCount"
                },
                {
                  "type": "text",
                  "text": " parameter identifies the number of matching mappings actually found, which may be greater than the number returned. "
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A resultcode. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324"
            },
            {
              "type": "text",
              "text": ". If the function returnsa "
            },
            {
              "type": "codeVoice",
              "code": "noErr"
            },
            {
              "type": "text",
              "text": " result code,the value retuned in the "
            },
            {
              "type": "codeVoice",
              "code": "oActualCount"
            },
            {
              "type": "text",
              "text": " parameteris less than or equal to the value returned in the "
            },
            {
              "type": "codeVoice",
              "code": "iMaxCount"
            },
            {
              "type": "text",
              "text": " parameterand the "
            },
            {
              "type": "codeVoice",
              "code": "oReturnedMappings"
            },
            {
              "type": "text",
              "text": " parametercontains all of the matching mappings found. If the function returnsa "
            },
            {
              "type": "codeVoice",
              "code": "kTECArrayFullErr"
            },
            {
              "type": "text",
              "text": ", thefunction found more mappings than your "
            },
            {
              "type": "codeVoice",
              "code": "oReturnedMappings"
            },
            {
              "type": "text",
              "text": " arraycould accommodate."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You can use the "
            },
            {
              "type": "codeVoice",
              "code": "QueryUnicodeMappings"
            },
            {
              "type": "text",
              "text": " functionto obtain all mappings on the system up to the number allowed byyour "
            },
            {
              "type": "codeVoice",
              "code": "oReturnedMappings"
            },
            {
              "type": "text",
              "text": " arrayby specifying a value of zero for the "
            },
            {
              "type": "codeVoice",
              "code": "iFilter"
            },
            {
              "type": "text",
              "text": " field. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You can use the function to obtain very specific mappingsby setting individual filter control flags. You can filter on anyof the three text encoding subfields of the Unicode mapping structure’s "
            },
            {
              "type": "codeVoice",
              "code": "unicodeEncoding"
            },
            {
              "type": "text",
              "text": " specificationand on any of the three text encoding subfields of the mapping’s "
            },
            {
              "type": "codeVoice",
              "code": "otherEncoding"
            },
            {
              "type": "text",
              "text": " specification.The "
            },
            {
              "type": "codeVoice",
              "code": "iFilter"
            },
            {
              "type": "text",
              "text": " parameterconsists of a set of six control flags that you set to identifywhich of the corresponding six subfields to include in the match.The list provided in the "
            },
            {
              "type": "codeVoice",
              "code": "oReturnedMappings"
            },
            {
              "type": "text",
              "text": " parameterwill contain only mappings that match the fields of the Unicodemapping structure whose text encodings subfields you identify inthe filter control flags. No filtering is performed on subfieldsfor which you do not set the corresponding filter control flag. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For example, to obtain a list of all mappings in which oneof the encodings is the default variant and default format of theUnicode 1.1 base encoding and the other encoding is the defaultvariant and default format of a base encoding other than Unicode,you would set up the "
            },
            {
              "type": "codeVoice",
              "code": "iFilter"
            },
            {
              "type": "text",
              "text": " and "
            },
            {
              "type": "codeVoice",
              "code": "iFindMappings"
            },
            {
              "type": "text",
              "text": " parameteras follows. To set up these parameters, you use the constants definedfor the text encoding bases, the text encoding default variants, thetext encoding default formats, and the filter control flag bitmasks.In this example, the text encoding base field of the Unicode mappingstructure’s "
            },
            {
              "type": "codeVoice",
              "code": "otherEncoding"
            },
            {
              "type": "text",
              "text": " fieldis ignored, so you can specify any value for it. When you call "
            },
            {
              "type": "codeVoice",
              "code": "QueryUnicodeMappings"
            },
            {
              "type": "text",
              "text": ",passing it these parameters, the function will return a list ofmappings between the Unicode encoding you specified and every otheravailable encoding in which each non-Unicode base encoding showsup once because you specified its default variant and default format. "
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "iFindMapping.unicodeMapping = CreateTextEncoding(",
            "kTextEncodingUnicodeV1_1,",
            "kTextEncodingDefaultVariant,",
            "kTextEncodingDefaultFormat);",
            "iFindMapping.otherEncoding = CreateTextEncoding(",
            "kTextEncodingMacRoman,",
            "kTextEncodingDefaultVariant,",
            "kTextEncodingDefaultFormat);",
            "iFilter = kUnicodeMatchUnicodeBaseMask |",
            "kUnicodeMatchUnicodeVariantMask |",
            "kUnicodeMatchUnicodeFormatMask |",
            "kUnicodeMatchOtherVariantMask |",
            "kUnicodeMatchOtherFormatMask;"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "2557295",
            "title": "Listing 1"
          }
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}