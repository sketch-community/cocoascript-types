{
  "abstract": [
    {
      "type": "text",
      "text": "Identifies where your application can safely break a Unicodestring to be converted to any encoding so that the string is brokenin a way that preserves the text element integrity. "
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coreservices",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/coreservices/1433649-truncateforunicodetotext",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1433649,
  "kind": "symbol",
  "metadata": {
    "title": "TruncateForUnicodeToText",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Core Services"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.0",
        "current": "12.1"
      }
    ],
    "externalID": "c:@F@TruncateForUnicodeToText",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/coreservices/1433649-truncateforunicodetotext"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coreservices": {
      "title": "Core Services",
      "identifier": "doc://com.apple.documentation/documentation/coreservices",
      "url": "/documentation/coreservices",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core": {
      "title": "Carbon Core",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core",
      "url": "/documentation/coreservices/carbon_core",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager": {
      "title": "Text Encoding Conversion Manager",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324": {
      "title": "Result Codes",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324",
      "kind": "article",
      "role": "task",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324"
    },
    "doc://com.apple.documentation/documentation/coreservices/unicodetotextinfo": {
      "title": "UnicodeToTextInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/unicodetotextinfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/unicodetotextinfo"
    },
    "doc://com.apple.documentation/documentation/coreservices/constunicodetotextinfo": {
      "title": "ConstUnicodeToTextInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/constunicodetotextinfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/constunicodetotextinfo"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433518-truncatefortexttounicode": {
      "title": "TruncateForTextToUnicode",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433518-truncatefortexttounicode",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433518-truncatefortexttounicode",
      "abstract": [
        {
          "type": "text",
          "text": "Identifies where your application can safely break a multibytestring to be converted to Unicode so that the string is not brokenin the middle of a multibyte character. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1433649-truncateforunicodetotext": {
      "title": "TruncateForUnicodeToText",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433649-truncateforunicodetotext",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433649-truncateforunicodetotext",
      "abstract": [
        {
          "type": "text",
          "text": "Identifies where your application can safely break a Unicodestring to be converted to any encoding so that the string is brokenin a way that preserves the text element integrity. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/coreservices/1433518-truncatefortexttounicode"
      ],
      "title": "Truncating Strings Before Converting Them ",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "identifier": "symbol-1480124",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "TruncateForUnicodeToText"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ConstUnicodeToTextInfo",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/constunicodetotextinfo",
              "text": "ConstUnicodeToTextInfo"
            },
            {
              "kind": "text",
              "text": " iUnicodeToTextInfo, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " iSourceLen, "
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@UniChar",
              "text": "UniChar"
            },
            {
              "kind": "text",
              "text": " iSourceStr[], "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OptionBits",
              "text": "OptionBits"
            },
            {
              "kind": "text",
              "text": " iControlFlags, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " iMaxLen, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " *oTruncatedLen);"
            }
          ],
          "platforms": [
            "macOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "iUnicodeToTextInfo",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A Unicode converter object "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/unicodetotextinfo"
                },
                {
                  "type": "text",
                  "text": " for the Unicode string to be divided up. The "
                },
                {
                  "type": "codeVoice",
                  "code": "TruncateForUnicodeToText"
                },
                {
                  "type": "text",
                  "text": " function does not modify the contents of this private structure. "
                }
              ]
            }
          ]
        },
        {
          "name": "iSourceLen",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The length in bytes of the Unicode string to be divided up. "
                }
              ]
            }
          ]
        },
        {
          "name": "iSourceStr",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer to the Unicode string to be divided up. "
                }
              ]
            }
          ]
        },
        {
          "name": "iControlFlags",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Truncation control flags. Specify the flag "
                },
                {
                  "type": "codeVoice",
                  "code": "kUnicodeStringUnterminatedMask"
                },
                {
                  "type": "text",
                  "text": " if truncating a buffer of text that belongs to a longer stream containing a subsequent buffer of text that could have characters belonging to a text element that begins at the end of the current buffer.  If you set this flag, typically you would set the "
                },
                {
                  "type": "codeVoice",
                  "code": "iMaxLen"
                },
                {
                  "type": "text",
                  "text": " parameter equal to "
                },
                {
                  "type": "codeVoice",
                  "code": "iSourceLen"
                },
                {
                  "type": "text",
                  "text": ". "
                }
              ]
            }
          ]
        },
        {
          "name": "iMaxLen",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The maximum allowable length of the string to be truncated. This must be less than or equal to "
                },
                {
                  "type": "codeVoice",
                  "code": "iSourceLen"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            }
          ]
        },
        {
          "name": "oTruncatedLen",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer to a value of type "
                },
                {
                  "type": "codeVoice",
                  "code": "ByteCount"
                },
                {
                  "type": "text",
                  "text": ". On return, this value contains the length of the longest portion of the Unicode source string, pointed to by the "
                },
                {
                  "type": "codeVoice",
                  "code": "iSourceStr"
                },
                {
                  "type": "text",
                  "text": " parameter, that is less than or equal to the value of the "
                },
                {
                  "type": "codeVoice",
                  "code": "iMaxLen"
                },
                {
                  "type": "text",
                  "text": " parameter. This returned parameter identifies the byte after which you can truncate the string."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A resultcode. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Your application can use this function to divide up a Unicodestring properly truncating each portion before you call "
            },
            {
              "type": "codeVoice",
              "code": "ConvertFromUnicodeToText"
            },
            {
              "type": "text",
              "text": " or "
            },
            {
              "type": "codeVoice",
              "code": "ConvertFromUnicodeToScriptCodeRun"
            },
            {
              "type": "text",
              "text": " toconvert the string. You can call this function repeatedly to properlytruncate a text segment, each time identifying the new beginningof the string, until the last portion of the text is less than orequal to the maximum allowable length. Each time you use the function,you get a properly terminated string within the allowable lengthrange. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Because this function does not modify the contents of theUnicode converter object, you can call this function between conversioncalls.  "
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}