{
  "abstract": [
    {
      "type": "text",
      "text": "Creates a preemptive task."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coreservices",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core/multiprocessing_services"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/coreservices/1585779-mpcreatetask",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1585779,
  "kind": "symbol",
  "metadata": {
    "title": "MPCreateTask",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Core Services"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.0",
        "deprecatedAt": "10.7",
        "current": "11.1",
        "deprecated": true
      }
    ],
    "externalID": "c:@F@MPCreateTask",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/coreservices/1585779-mpcreatetask"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coreservices": {
      "title": "Core Services",
      "identifier": "doc://com.apple.documentation/documentation/coreservices",
      "url": "/documentation/coreservices",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core": {
      "title": "Carbon Core",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core",
      "url": "/documentation/coreservices/carbon_core",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/multiprocessing_services": {
      "title": "Multiprocessing Services",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/multiprocessing_services",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/coreservices/carbon_core/multiprocessing_services"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/multiprocessing_services#1663965": {
      "title": "Result Codes",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/multiprocessing_services#1663965",
      "kind": "article",
      "role": "task",
      "url": "/documentation/coreservices/carbon_core/multiprocessing_services#1663965"
    },
    "doc://com.apple.documentation/documentation/coreservices/1585705-mpexit": {
      "title": "MPExit",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585705-mpexit",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585705-mpexit",
      "abstract": [
        {
          "type": "text",
          "text": "Allows a task to terminate itself"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1585769-mpterminatetask": {
      "title": "MPTerminateTask",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585769-mpterminatetask",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585769-mpterminatetask",
      "abstract": [
        {
          "type": "text",
          "text": "Terminates an existing task."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1585665-mpsettaskweight": {
      "title": "MPSetTaskWeight",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585665-mpsettaskweight",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585665-mpsettaskweight",
      "abstract": [
        {
          "type": "text",
          "text": "Assigns a relative weight to a task, indicating how much processor time it should receive compared to other available tasks. "
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/mptaskoptions": {
      "title": "MPTaskOptions",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/mptaskoptions",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/mptaskoptions"
    },
    "doc://com.apple.documentation/documentation/coreservices/taskproc": {
      "title": "TaskProc",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/taskproc",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/taskproc"
    },
    "doc://com.apple.documentation/documentation/coreservices/mpqueueid": {
      "title": "MPQueueID",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/mpqueueid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/mpqueueid"
    },
    "doc://com.apple.documentation/documentation/coreservices/mptaskid": {
      "title": "MPTaskID",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/mptaskid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/mptaskid"
    },
    "doc://com.apple.documentation/documentation/coreservices/1585779-mpcreatetask": {
      "title": "MPCreateTask",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585779-mpcreatetask",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585779-mpcreatetask",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a preemptive task."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1585673-mpcurrenttaskid": {
      "title": "MPCurrentTaskID",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585673-mpcurrenttaskid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585673-mpcurrenttaskid",
      "abstract": [
        {
          "type": "text",
          "text": "Obtains the task ID of the currently-executing preemptive task"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1585695-mpsettasktype": {
      "title": "MPSetTaskType",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585695-mpsettasktype",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585695-mpsettasktype",
      "abstract": [
        {
          "type": "text",
          "text": "Sets the type of the task."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1508163-mpgetnexttaskid": {
      "title": "MPGetNextTaskID",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1508163-mpgetnexttaskid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1508163-mpgetnexttaskid",
      "abstract": [
        {
          "type": "text",
          "text": "Obtains the next task ID in the list of available tasks."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1585681-mptaskispreemptive": {
      "title": "MPTaskIsPreemptive",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585681-mptaskispreemptive",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585681-mptaskispreemptive",
      "abstract": [
        {
          "type": "text",
          "text": "Determines whether a task is preemptively scheduled. "
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1585732-mpyield": {
      "title": "MPYield",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585732-mpyield",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585732-mpyield",
      "abstract": [
        {
          "type": "text",
          "text": "Allows a task to yield the processor to another task. "
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/coreservices/1585673-mpcurrenttaskid",
        "doc://com.apple.documentation/documentation/coreservices/1585695-mpsettasktype",
        "doc://com.apple.documentation/documentation/coreservices/1585705-mpexit",
        "doc://com.apple.documentation/documentation/coreservices/1508163-mpgetnexttaskid",
        "doc://com.apple.documentation/documentation/coreservices/1585665-mpsettaskweight",
        "doc://com.apple.documentation/documentation/coreservices/1585681-mptaskispreemptive",
        "doc://com.apple.documentation/documentation/coreservices/1585769-mpterminatetask",
        "doc://com.apple.documentation/documentation/coreservices/1585732-mpyield"
      ],
      "title": "Creating and Scheduling Tasks",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "identifier": "symbol-1480124",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "MPCreateTask"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@TaskProc",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/taskproc",
              "text": "TaskProc"
            },
            {
              "kind": "text",
              "text": " entryPoint, "
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": " *parameter, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " stackSize, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@MPQueueID",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/mpqueueid",
              "text": "MPQueueID"
            },
            {
              "kind": "text",
              "text": " notifyQueue, "
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": " *terminationParameter1, "
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": " *terminationParameter2, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@MPTaskOptions",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/mptaskoptions",
              "text": "MPTaskOptions"
            },
            {
              "kind": "text",
              "text": " options, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@MPTaskID",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/mptaskid",
              "text": "MPTaskID"
            },
            {
              "kind": "text",
              "text": " *task);"
            }
          ],
          "platforms": [
            "macOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "entryPoint",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer to the task function. The task function should take a single pointer-sized parameter and return a value of type "
                },
                {
                  "type": "codeVoice",
                  "code": "OSStatus"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            }
          ]
        },
        {
          "name": "parameter",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The parameter to pass to the task function. "
                }
              ]
            }
          ]
        },
        {
          "name": "stackSize",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The size of the stack assigned to the task. Note that you should be careful not to exceed the bounds of the stack, since stack overflows may not be detected. Specifying zero for the size will result in a default stack size of 4KB. "
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Note that in macOS prior to version 10.1, this parameter is ignored, and all stacks have the default size of 512 KB. Versions 10.1 and later do not have this limitation."
                }
              ]
            }
          ]
        },
        {
          "name": "notifyQueue",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The ID of the message queue to which the system will send a message when the task terminates. You specify the first two values of the message in the parameters "
                },
                {
                  "type": "codeVoice",
                  "code": "terminationParameter1"
                },
                {
                  "type": "text",
                  "text": " and "
                },
                {
                  "type": "codeVoice",
                  "code": "terminationParameter2"
                },
                {
                  "type": "text",
                  "text": " respectively. The last message value contains the result code of the task function."
                }
              ]
            }
          ]
        },
        {
          "name": "terminationParameter1",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer-sized value that is sent to the message queue specified by the parameter "
                },
                {
                  "type": "codeVoice",
                  "code": "notifyQueue"
                },
                {
                  "type": "text",
                  "text": " when the task terminates."
                }
              ]
            }
          ]
        },
        {
          "name": "terminationParameter2",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer-sized value that is sent to the message queue specified by the parameter "
                },
                {
                  "type": "codeVoice",
                  "code": "notifyQueue"
                },
                {
                  "type": "text",
                  "text": " when the task terminates."
                }
              ]
            }
          ]
        },
        {
          "name": "options",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Optional attributes of the preemptive task. See "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/mptaskoptions"
                },
                {
                  "type": "text",
                  "text": " for a list of possible values. "
                }
              ]
            }
          ]
        },
        {
          "name": "task",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, "
                },
                {
                  "type": "codeVoice",
                  "code": "task"
                },
                {
                  "type": "text",
                  "text": " points to the ID of the newly created task. "
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A result code. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/multiprocessing_services#1663965"
            },
            {
              "type": "text",
              "text": ". If "
            },
            {
              "type": "codeVoice",
              "code": "MPCreateTask"
            },
            {
              "type": "text",
              "text": " could not create the task because some critical resource was not available, the function returns "
            },
            {
              "type": "codeVoice",
              "code": "kMPInsufficientResourcesErr"
            },
            {
              "type": "text",
              "text": ". Usually this is due to lack of memory to allocate the internal data structures associated with the task or the stack. The function also returns "
            },
            {
              "type": "codeVoice",
              "code": "kMPInsufficientResourcesErr"
            },
            {
              "type": "text",
              "text": " if any reserved option bits are set."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Tasks are created in the unblocked state, ready for execution. A task can terminate in the following ways:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": " By returning from its entry point "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": " By calling  "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585705-mpexit"
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": " When specified as the target of an  "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585769-mpterminatetask"
                    },
                    {
                      "type": "text",
                      "text": "  call "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": " If a hardware-detected exception or programming exception occurs and no exception handler is installed  "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": " If the application calls "
                    },
                    {
                      "type": "codeVoice",
                      "code": "ExitToShell "
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Task resources (its stack, active timers, internal structures related to the task, and so on) are reclaimed by the system when the task terminates. The task's address space is inherited from the process address space. All existing tasks are terminated when the owning process terminates."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To set the relative processor weight to be assigned to a task, use the function  "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreservices/1585665-mpsettaskweight"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "See also the function  "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreservices/1585769-mpterminatetask"
            },
            {
              "type": "text",
              "text": ". "
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}