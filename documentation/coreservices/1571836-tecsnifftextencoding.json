{
  "abstract": [
    {
      "type": "text",
      "text": "Analyzes a text stream and returns the probable encodingsin a ranked list, based on an array of possible encodings you supply.It also returns the number of errors and features for each encoding. "
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coreservices",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/coreservices/1571836-tecsnifftextencoding",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1571836,
  "kind": "symbol",
  "metadata": {
    "title": "TECSniffTextEncoding",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Core Services"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.0",
        "current": "12.1"
      }
    ],
    "externalID": "c:@F@TECSniffTextEncoding",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/coreservices/1571836-tecsnifftextencoding"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coreservices": {
      "title": "Core Services",
      "identifier": "doc://com.apple.documentation/documentation/coreservices",
      "url": "/documentation/coreservices",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core": {
      "title": "Carbon Core",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core",
      "url": "/documentation/coreservices/carbon_core",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager": {
      "title": "Text Encoding Conversion Manager",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324": {
      "title": "Result Codes",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324",
      "kind": "article",
      "role": "task",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324"
    },
    "doc://com.apple.documentation/documentation/coreservices/tecsnifferobjectref": {
      "title": "TECSnifferObjectRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/tecsnifferobjectref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/tecsnifferobjectref"
    },
    "doc://com.apple.documentation/documentation/coreservices/consttextptr": {
      "title": "ConstTextPtr",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/consttextptr",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/consttextptr"
    },
    "doc://com.apple.documentation/documentation/coreservices/textencoding": {
      "title": "TextEncoding",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/textencoding",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/textencoding"
    },
    "doc://com.apple.documentation/documentation/coreservices/1571832-teccreatesniffer": {
      "title": "TECCreateSniffer",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1571832-teccreatesniffer",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1571832-teccreatesniffer",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a sniffer object and returns a reference to it. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1571850-tecclearsniffercontextinfo": {
      "title": "TECClearSnifferContextInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1571850-tecclearsniffercontextinfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1571850-tecclearsniffercontextinfo",
      "abstract": [
        {
          "type": "text",
          "text": "Resets a sniffer object to its initial settings so youcan reuse it."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1571854-tecdisposesniffer": {
      "title": "TECDisposeSniffer",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1571854-tecdisposesniffer",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1571854-tecdisposesniffer",
      "abstract": [
        {
          "type": "text",
          "text": "Disposes of a sniffer object."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1571795-teccountavailablesniffers": {
      "title": "TECCountAvailableSniffers",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1571795-teccountavailablesniffers",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1571795-teccountavailablesniffers",
      "abstract": [
        {
          "type": "text",
          "text": "Counts and returns the number of sniffers available inall installed plug-ins."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1571841-tecgetavailablesniffers": {
      "title": "TECGetAvailableSniffers",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1571841-tecgetavailablesniffers",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1571841-tecgetavailablesniffers",
      "abstract": [
        {
          "type": "text",
          "text": "Returns the list of sniffers available in all installedplug-ins."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1571836-tecsnifftextencoding": {
      "title": "TECSniffTextEncoding",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1571836-tecsnifftextencoding",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1571836-tecsnifftextencoding",
      "abstract": [
        {
          "type": "text",
          "text": "Analyzes a text stream and returns the probable encodingsin a ranked list, based on an array of possible encodings you supply.It also returns the number of errors and features for each encoding. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/coreservices/1571832-teccreatesniffer",
        "doc://com.apple.documentation/documentation/coreservices/1571850-tecclearsniffercontextinfo",
        "doc://com.apple.documentation/documentation/coreservices/1571854-tecdisposesniffer",
        "doc://com.apple.documentation/documentation/coreservices/1571795-teccountavailablesniffers",
        "doc://com.apple.documentation/documentation/coreservices/1571841-tecgetavailablesniffers"
      ],
      "title": "Using Sniffers to Investigate Encodings",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "identifier": "symbol-1480124",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "TECSniffTextEncoding"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@TECSnifferObjectRef",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/tecsnifferobjectref",
              "text": "TECSnifferObjectRef"
            },
            {
              "kind": "text",
              "text": " encodingSniffer, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ConstTextPtr",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/consttextptr",
              "text": "ConstTextPtr"
            },
            {
              "kind": "text",
              "text": " inputBuffer, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " inputBufferLength, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@TextEncoding",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/textencoding",
              "text": "TextEncoding"
            },
            {
              "kind": "text",
              "text": " testEncodings[], "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " numTextEncodings, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " numErrsArray[], "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " maxErrs, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " numFeaturesArray[], "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " maxFeatures);"
            }
          ],
          "platforms": [
            "macOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "encodingSniffer",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A reference to a sniffer object. "
                }
              ]
            }
          ]
        },
        {
          "name": "inputBuffer",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The text to be sniffed. "
                }
              ]
            }
          ]
        },
        {
          "name": "inputBufferLength",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The length of the input buffer. "
                }
              ]
            }
          ]
        },
        {
          "name": "testEncodings",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "An array of text encoding specifications. You must fill the array with the text encodings for which you want to sniff. On output, the array elements are reordered from the most likely to the least likely text encodings. "
                }
              ]
            }
          ]
        },
        {
          "name": "numTextEncodings",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The number of entries in the "
                },
                {
                  "type": "codeVoice",
                  "code": "testEncodings[]"
                },
                {
                  "type": "text",
                  "text": " parameter. "
                }
              ]
            }
          ]
        },
        {
          "name": "numErrsArray",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "An array that must contain at least "
                },
                {
                  "type": "codeVoice",
                  "code": "numTextEncodings"
                },
                {
                  "type": "text",
                  "text": " elements. On return, an array of the number of errors found for each possible text encoding. The array elements are in the same order as the "
                },
                {
                  "type": "codeVoice",
                  "code": "testEncodings[]"
                },
                {
                  "type": "text",
                  "text": " array elements at output."
                }
              ]
            }
          ]
        },
        {
          "name": "maxErrs",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The maximum number of errors a sniffer can encounter. The sniffer stops looking for an encoding after this number is reached."
                }
              ]
            }
          ]
        },
        {
          "name": "numFeaturesArray",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "An array of that must contain at least "
                },
                {
                  "type": "codeVoice",
                  "code": "numTextEncodings"
                },
                {
                  "type": "text",
                  "text": " elements. On return, an array of the number of features found for each possible text encoding. The array elements are in the same order as the "
                },
                {
                  "type": "codeVoice",
                  "code": "testEncodings[]"
                },
                {
                  "type": "text",
                  "text": " array elements at output."
                }
              ]
            }
          ]
        },
        {
          "name": "maxFeatures",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The maximum number of features a sniffer can encounter. The sniffer stops looking for a features after this number is reached."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A resultcode. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "An error indicates a code point or sequence that is illegalin the specified encoding. A feature indicates the presence of asequence that is characteristic of that encoding."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For example, the byte sequence which is interpreted in MacOS Roman as “é” could legally be interpreted either as MacOS Roman text or as Mac OS Japanese text. Both sniffers would returnzero errors, but the Mac OS Japanese sniffer would also return twofeatures of Mac OS Japanese (representing two legal 2-byte characters.)"
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The arrays are returned in a ranked list with the most likelytext encodings first. The results are sorted first by number oferrors (fewest to most), then by number of features (most to fewest),and then by the original order in the list. On return, the mostlikely encoding is in "
            },
            {
              "type": "codeVoice",
              "code": "testEncodings[0]"
            },
            {
              "type": "text",
              "text": " or "
            },
            {
              "type": "codeVoice",
              "code": "testEncodings[1]"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If an encoding is not examined, its number of errors and featuresare set to 0xFFFFFFFF, and the encoding is sorted to the end ofthe list. "
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}