{
  "abstract": [
    {
      "type": "text",
      "text": "Flushes out any encodings that may be stored in a converterobject’s temporary buffers and shifts encodings back to theirdefault state, if any."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coreservices",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/coreservices/1571842-tecflushmultipleencodings",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1571842,
  "kind": "symbol",
  "metadata": {
    "title": "TECFlushMultipleEncodings",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Core Services"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.0",
        "current": "12.1"
      }
    ],
    "externalID": "c:@F@TECFlushMultipleEncodings",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/coreservices/1571842-tecflushmultipleencodings"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coreservices": {
      "title": "Core Services",
      "identifier": "doc://com.apple.documentation/documentation/coreservices",
      "url": "/documentation/coreservices",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core": {
      "title": "Carbon Core",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core",
      "url": "/documentation/coreservices/carbon_core",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager": {
      "title": "Text Encoding Conversion Manager",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324": {
      "title": "Result Codes",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324",
      "kind": "article",
      "role": "task",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324"
    },
    "doc://com.apple.documentation/documentation/coreservices/1571794-teccreateonetomanyconverter": {
      "title": "TECCreateOneToManyConverter",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1571794-teccreateonetomanyconverter",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1571794-teccreateonetomanyconverter",
      "abstract": [
        {
          "type": "text",
          "text": "Determines a conversion path for the source encoding anddestinations encodings you specify, creates a text encoding converterobject, and returns a reference to it. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/tecobjectref": {
      "title": "TECObjectRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/tecobjectref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/tecobjectref"
    },
    "doc://com.apple.documentation/documentation/coreservices/textptr": {
      "title": "TextPtr",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/textptr",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/textptr"
    },
    "doc://com.apple.documentation/documentation/coreservices/textencodingrun": {
      "title": "TextEncodingRun",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/textencodingrun",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/textencodingrun"
    },
    "doc://com.apple.documentation/documentation/coreservices/1571849-tecconverttexttomultipleencoding": {
      "title": "TECConvertTextToMultipleEncodings",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1571849-tecconverttexttomultipleencoding",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1571849-tecconverttexttomultipleencoding",
      "abstract": [
        {
          "type": "text",
          "text": "Converts text in the source encoding to runs of text inmultiple destination encodings. It uses the conversion path specifiedin the converter object you supply."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1571842-tecflushmultipleencodings": {
      "title": "TECFlushMultipleEncodings",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1571842-tecflushmultipleencodings",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1571842-tecflushmultipleencodings",
      "abstract": [
        {
          "type": "text",
          "text": "Flushes out any encodings that may be stored in a converterobject’s temporary buffers and shifts encodings back to theirdefault state, if any."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1571830-tecgetencodinglist": {
      "title": "TECGetEncodingList",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1571830-tecgetencodinglist",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1571830-tecgetencodinglist",
      "abstract": [
        {
          "type": "text",
          "text": "Gets the list of destination encodings from a converterobject."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/coreservices/1571849-tecconverttexttomultipleencoding",
        "doc://com.apple.documentation/documentation/coreservices/1571794-teccreateonetomanyconverter",
        "doc://com.apple.documentation/documentation/coreservices/1571830-tecgetencodinglist"
      ],
      "title": "Converting to Multiple Encoding Runs",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "identifier": "symbol-1480124",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "TECFlushMultipleEncodings"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@TECObjectRef",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/tecobjectref",
              "text": "TECObjectRef"
            },
            {
              "kind": "text",
              "text": " encodingConverter, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@TextPtr",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/textptr",
              "text": "TextPtr"
            },
            {
              "kind": "text",
              "text": " outputBuffer, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " outputBufferLength, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " *actualOutputLength, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@TextEncodingRun",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/textencodingrun",
              "text": "TextEncodingRun"
            },
            {
              "kind": "text",
              "text": " outEncodingsBuffer[], "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " maxOutEncodingRuns, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " *actualOutEncodingRuns);"
            }
          ],
          "platforms": [
            "macOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "encodingConverter",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The reference to the text encoding converter object whose contents are to be flushed. This is the reference returned by the function "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1571794-teccreateonetomanyconverter"
                },
                {
                  "type": "text",
                  "text": ". "
                }
              ]
            }
          ]
        },
        {
          "name": "outputBuffer",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, a pointer to a buffer that holds the converted text. An error is returned is the buffer is not large enough to hold the entire converted text stream. "
                }
              ]
            }
          ]
        },
        {
          "name": "outputBufferLength",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The length in bytes of the "
                },
                {
                  "type": "codeVoice",
                  "code": "outputBuffer"
                },
                {
                  "type": "text",
                  "text": " parameter. "
                }
              ]
            }
          ]
        },
        {
          "name": "actualOutputLength",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, a pointer to a the actual number of bytes of the converted text returned in the "
                },
                {
                  "type": "codeVoice",
                  "code": "outputBuffer"
                },
                {
                  "type": "text",
                  "text": " parameter."
                }
              ]
            }
          ]
        },
        {
          "name": "outEncodingsBuffer",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "An ordered array of text encoding runs for the destination text encoding. Note that the actual byte size of this buffer should be "
                },
                {
                  "type": "codeVoice",
                  "code": "actualOutEncodingRuns* sizeof(TextEncodingRun)"
                },
                {
                  "type": "text",
                  "text": ". "
                }
              ]
            }
          ]
        },
        {
          "name": "maxOutEncodingRuns",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The maximum number of encoding runs that can fit in "
                },
                {
                  "type": "codeVoice",
                  "code": "outEncodingsBuffer"
                },
                {
                  "type": "text",
                  "text": "[]. "
                }
              ]
            }
          ]
        },
        {
          "name": "actualOutEncodingRuns",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, a pointer to a the number of runs in the buffer during conversion."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A resultcode. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You should always call "
            },
            {
              "type": "codeVoice",
              "code": "TECFlushMultipleEncodings"
            },
            {
              "type": "text",
              "text": " atthe end of the conversion process to flush out any data that maybe stored in the temporary buffers of the text encoding converterobject or to perform other end-of-encoding conversion tasks. Encodingssuch as ISO-2022-JP are reset to a default state when you use thisfunction. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For the function to return successfully, the output bufferyou allocate must be large enough to accommodate the converted text.If the output buffer is too small to accommodate any converted text,the function will fail. For best results, you should follow theseguidelines when you allocate an output buffer:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": " Base the buffer length on an estimate of thebyte requirements of the destination encoding. Make sure you accountfor additional bytes needed by the destination encoding (for example,an escape sequence) in addition to the actual text.  "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": " Always allocate a buffer at least 32 bytes long. "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": " If size is a concern, make sure the output buffer is at leastlarge enough to hold a portion of the converted text. You can convertpart of the text, then use the value of the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "actualInputLength"
                    },
                    {
                      "type": "text",
                      "text": " parameterto identify the next byte to be taken and to determine how manybytes remain. To convert the remaining text, you simply call thefunction again with the remaining text and a new output buffer. "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": " If the destination encoding is a character encoding scheme—suchas ISO-2022-JP, which begins in ASCII and switches to other codedcharacter sets through limited combinations of escape sequences—thenyou need to allocate enough space to accommodate escape sequencesthat signal switches. ISO-2022-JP requires 3 to 5 bytes for an escapesequence preceding the 1-byte or 2-byte character it introduces.If you allocate a buffer that is less than 5 bytes, the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "TECConvertText"
                    },
                    {
                      "type": "text",
                      "text": " functioncould fail, depending on the text being converted.  "
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}