{
  "abstract": [
    {
      "type": "text",
      "text": "Terminates an existing task."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coreservices",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core/multiprocessing_services"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/coreservices/1585769-mpterminatetask",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1585769,
  "kind": "symbol",
  "metadata": {
    "title": "MPTerminateTask",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Core Services"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.0",
        "deprecatedAt": "10.7",
        "current": "12.1",
        "deprecated": true
      }
    ],
    "externalID": "c:@F@MPTerminateTask",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/coreservices/1585769-mpterminatetask"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coreservices": {
      "title": "Core Services",
      "identifier": "doc://com.apple.documentation/documentation/coreservices",
      "url": "/documentation/coreservices",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core": {
      "title": "Carbon Core",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core",
      "url": "/documentation/coreservices/carbon_core",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/multiprocessing_services": {
      "title": "Multiprocessing Services",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/multiprocessing_services",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/coreservices/carbon_core/multiprocessing_services"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/multiprocessing_services#1663965": {
      "title": "Result Codes",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/multiprocessing_services#1663965",
      "kind": "article",
      "role": "task",
      "url": "/documentation/coreservices/carbon_core/multiprocessing_services#1663965"
    },
    "doc://com.apple.documentation/documentation/coreservices/1585779-mpcreatetask": {
      "title": "MPCreateTask",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585779-mpcreatetask",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585779-mpcreatetask",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a preemptive task."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/mptaskid": {
      "title": "MPTaskID",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/mptaskid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/mptaskid"
    },
    "doc://com.apple.documentation/documentation/coreservices/1585673-mpcurrenttaskid": {
      "title": "MPCurrentTaskID",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585673-mpcurrenttaskid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585673-mpcurrenttaskid",
      "abstract": [
        {
          "type": "text",
          "text": "Obtains the task ID of the currently-executing preemptive task"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1585695-mpsettasktype": {
      "title": "MPSetTaskType",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585695-mpsettasktype",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585695-mpsettasktype",
      "abstract": [
        {
          "type": "text",
          "text": "Sets the type of the task."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1585705-mpexit": {
      "title": "MPExit",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585705-mpexit",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585705-mpexit",
      "abstract": [
        {
          "type": "text",
          "text": "Allows a task to terminate itself"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1508163-mpgetnexttaskid": {
      "title": "MPGetNextTaskID",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1508163-mpgetnexttaskid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1508163-mpgetnexttaskid",
      "abstract": [
        {
          "type": "text",
          "text": "Obtains the next task ID in the list of available tasks."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1585665-mpsettaskweight": {
      "title": "MPSetTaskWeight",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585665-mpsettaskweight",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585665-mpsettaskweight",
      "abstract": [
        {
          "type": "text",
          "text": "Assigns a relative weight to a task, indicating how much processor time it should receive compared to other available tasks. "
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1585681-mptaskispreemptive": {
      "title": "MPTaskIsPreemptive",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585681-mptaskispreemptive",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585681-mptaskispreemptive",
      "abstract": [
        {
          "type": "text",
          "text": "Determines whether a task is preemptively scheduled. "
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1585769-mpterminatetask": {
      "title": "MPTerminateTask",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585769-mpterminatetask",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585769-mpterminatetask",
      "abstract": [
        {
          "type": "text",
          "text": "Terminates an existing task."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreservices/1585732-mpyield": {
      "title": "MPYield",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1585732-mpyield",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1585732-mpyield",
      "abstract": [
        {
          "type": "text",
          "text": "Allows a task to yield the processor to another task. "
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/coreservices/1585779-mpcreatetask",
        "doc://com.apple.documentation/documentation/coreservices/1585673-mpcurrenttaskid",
        "doc://com.apple.documentation/documentation/coreservices/1585695-mpsettasktype",
        "doc://com.apple.documentation/documentation/coreservices/1585705-mpexit",
        "doc://com.apple.documentation/documentation/coreservices/1508163-mpgetnexttaskid",
        "doc://com.apple.documentation/documentation/coreservices/1585665-mpsettaskweight",
        "doc://com.apple.documentation/documentation/coreservices/1585681-mptaskispreemptive",
        "doc://com.apple.documentation/documentation/coreservices/1585732-mpyield"
      ],
      "title": "Creating and Scheduling Tasks",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "identifier": "symbol-1480124",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "MPTerminateTask"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@MPTaskID",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/mptaskid",
              "text": "MPTaskID"
            },
            {
              "kind": "text",
              "text": " task, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "identifier": "symbol-1480124",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " terminationStatus);"
            }
          ],
          "platforms": [
            "macOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "task",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The ID of the task you wish to terminate. "
                }
              ]
            }
          ]
        },
        {
          "name": "terminationStatus",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A value of type "
                },
                {
                  "type": "codeVoice",
                  "code": "OSStatus"
                },
                {
                  "type": "text",
                  "text": " indicating termination status. This value is sent to the termination status message queue you specified in "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1585779-mpcreatetask"
                },
                {
                  "type": "text",
                  "text": " in place of the task function’s result code. "
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A result code. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/multiprocessing_services#1663965"
            },
            {
              "type": "text",
              "text": ". If the task to be terminated is already in the process of termination, "
            },
            {
              "type": "codeVoice",
              "code": "MPTerminateTask"
            },
            {
              "type": "text",
              "text": " returns "
            },
            {
              "type": "codeVoice",
              "code": "kMPInsufficientResourcesErr"
            },
            {
              "type": "text",
              "text": ". You do not need to take any additional action if this occurs."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You should be very careful when calling "
            },
            {
              "type": "codeVoice",
              "code": "MPTerminateTask"
            },
            {
              "type": "text",
              "text": ".  As defined, this call will asynchronously and abruptly terminate a task, potentially leaving whatever structures or resources it was operating upon in an indeterminate state.  macOS  exacerbates this problem, as MP tasks can use many more system services that are not expecting client threads to asynchronously terminate, and these services do not take the rather complicated steps necessary to protect against, or recover from, such a situation."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "However, there are situations in which calling "
            },
            {
              "type": "codeVoice",
              "code": "MPTerminateTask"
            },
            {
              "type": "text",
              "text": " is useful and relatively safe.  One such situation is when your application or service is quitting and you know that the task you wish to terminate is waiting on an MP synchronization construct (queue, event, semaphore or critical region). While you could do this more cleanly by waking the task and causing it to exit on its own, doing so may not always be practical."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For example, suppose you have several service tasks performing background processing for your application. These service tasks wait on a queue, onto which the application places requests for processing.  When the task is done with a request, it notifies another queue, which the application polls. Since the main application task is placing items on the shared queue, and receiving notifications when the requests are done, it can track whether or not there are outstanding requests being processed. If all outstanding requests have, in fact, been processed, it is relatively safe to terminate a task (or all tasks) waiting on the request queue."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You should not assume that the task has completed termination when this call returns; the proper way to synchronize with task termination is to wait on the termination queue (specified in  "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreservices/1585779-mpcreatetask"
            },
            {
              "type": "text",
              "text": " ) until a message appears. Because task termination is a multistage activity, it is possible for a preemptive task to attempt to terminate a task that is already undergoing termination. In such cases, "
            },
            {
              "type": "codeVoice",
              "code": "MPTerminateTask"
            },
            {
              "type": "text",
              "text": " returns "
            },
            {
              "type": "codeVoice",
              "code": "kMPInsufficientResourcesErr"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Note that Multiprocessing Services resources (event groups, queues, semaphores, and critical regions) owned by a preemptive task are not released when that task terminates. If a task has a critical region locked when it terminates, the critical region remains in the locked state. Multiprocessing Services resources no longer needed should be explicitly deleted by the task that handles the termination message. All Multiprocessing Services resources created by tasks are released when their owning process (that is, the host application) terminates. "
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}