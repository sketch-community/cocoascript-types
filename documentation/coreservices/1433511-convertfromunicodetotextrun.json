{
  "abstract": [
    {
      "type": "text",
      "text": "Converts a string from Unicode to one or more encodings. "
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coreservices",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/coreservices/1433511-convertfromunicodetotextrun",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1433511,
  "kind": "symbol",
  "metadata": {
    "title": "ConvertFromUnicodeToTextRun",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Core Services"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.0",
        "current": "11.1"
      }
    ],
    "externalID": "c:@F@ConvertFromUnicodeToTextRun",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/coreservices/1433511-convertfromunicodetotextrun"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coreservices": {
      "title": "Core Services",
      "identifier": "doc://com.apple.documentation/documentation/coreservices",
      "url": "/documentation/coreservices",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core": {
      "title": "Carbon Core",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core",
      "url": "/documentation/coreservices/carbon_core",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager": {
      "title": "Text Encoding Conversion Manager",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324": {
      "title": "Result Codes",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324",
      "kind": "article",
      "role": "task",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324"
    },
    "doc://com.apple.documentation/documentation/coreservices/unicodemapping": {
      "title": "UnicodeMapping",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/unicodemapping",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/unicodemapping"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433632-createunicodetotextruninfo": {
      "title": "CreateUnicodeToTextRunInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433632-createunicodetotextruninfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433632-createunicodetotextruninfo",
      "abstract": [
        {
          "type": "text",
          "text": "Creates and returns a Unicode converter object containingthe information required for converting a Unicode text string tostrings in one or more non-Unicode encodings. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1433651-createunicodetotextruninfobyenco": {
      "title": "CreateUnicodeToTextRunInfoByEncoding",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433651-createunicodetotextruninfobyenco",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433651-createunicodetotextruninfobyenco",
      "abstract": [
        {
          "type": "text",
          "text": "Based on the given text encoding specifications for theconverted text runs, creates and returns a Unicode converter objectcontaining information required for converting strings from Unicodeto one or more specified non-Unicode encodings."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1433657-createunicodetotextruninfobyscri": {
      "title": "CreateUnicodeToTextRunInfoByScriptCode",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433657-createunicodetotextruninfobyscri",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433657-createunicodetotextruninfobyscri",
      "abstract": [
        {
          "type": "text",
          "text": "Based on the given script codes for the converted textruns, creates and returns a Unicode converter object containinginformation required for converting strings from Unicode to oneor more specified non-Unicode encodings."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1433493-conversion_masks": {
      "title": "Conversion Masks",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433493-conversion_masks",
      "kind": "symbol",
      "role": "containerSymbol",
      "url": "/documentation/coreservices/1433493-conversion_masks"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433620-directionality_masks": {
      "title": "Directionality Masks",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433620-directionality_masks",
      "kind": "symbol",
      "role": "containerSymbol",
      "url": "/documentation/coreservices/1433620-directionality_masks"
    },
    "doc://com.apple.documentation/documentation/coreservices/unicodetotextruninfo": {
      "title": "UnicodeToTextRunInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/unicodetotextruninfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/unicodetotextruninfo"
    },
    "doc://com.apple.documentation/documentation/coreservices/textencodingrun": {
      "title": "TextEncodingRun",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/textencodingrun",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/textencodingrun"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433511-convertfromunicodetotextrun": {
      "title": "ConvertFromUnicodeToTextRun",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433511-convertfromunicodetotextrun",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433511-convertfromunicodetotextrun",
      "abstract": [
        {
          "type": "text",
          "text": "Converts a string from Unicode to one or more encodings. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1433662-convertfromunicodetoscriptcoderu": {
      "title": "ConvertFromUnicodeToScriptCodeRun",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433662-convertfromunicodetoscriptcoderu",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433662-convertfromunicodetoscriptcoderu",
      "abstract": [
        {
          "type": "text",
          "text": "Converts a string from Unicode to one or more scripts. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1433595-disposeunicodetotextruninfo": {
      "title": "DisposeUnicodeToTextRunInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433595-disposeunicodetotextruninfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433595-disposeunicodetotextruninfo",
      "abstract": [
        {
          "type": "text",
          "text": "Releases the memory allocated for the specified Unicodeconverter object. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1433495-resetunicodetotextruninfo": {
      "title": "ResetUnicodeToTextRunInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433495-resetunicodetotextruninfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433495-resetunicodetotextruninfo",
      "abstract": [
        {
          "type": "text",
          "text": "Reinitializes all state information kept by the contextobjects in TextRun conversions."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/coreservices/1433662-convertfromunicodetoscriptcoderu",
        "doc://com.apple.documentation/documentation/coreservices/1433632-createunicodetotextruninfo",
        "doc://com.apple.documentation/documentation/coreservices/1433651-createunicodetotextruninfobyenco",
        "doc://com.apple.documentation/documentation/coreservices/1433657-createunicodetotextruninfobyscri",
        "doc://com.apple.documentation/documentation/coreservices/1433595-disposeunicodetotextruninfo",
        "doc://com.apple.documentation/documentation/coreservices/1433495-resetunicodetotextruninfo"
      ],
      "title": "Converting From Unicode to Multiple Encodings",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "identifier": "symbol-1480124",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "ConvertFromUnicodeToTextRun"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@UnicodeToTextRunInfo",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/unicodetotextruninfo",
              "text": "UnicodeToTextRunInfo"
            },
            {
              "kind": "text",
              "text": " iUnicodeToTextInfo, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " iUnicodeLen, "
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@UniChar",
              "text": "UniChar"
            },
            {
              "kind": "text",
              "text": " iUnicodeStr[], "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OptionBits",
              "text": "OptionBits"
            },
            {
              "kind": "text",
              "text": " iControlFlags, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " iOffsetCount, "
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteOffset",
              "text": "ByteOffset"
            },
            {
              "kind": "text",
              "text": " iOffsetArray[], "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " *oOffsetCount, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteOffset",
              "text": "ByteOffset"
            },
            {
              "kind": "text",
              "text": " oOffsetArray[], "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " iOutputBufLen, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " *oInputRead, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " *oOutputLen, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@LogicalAddress",
              "text": "LogicalAddress"
            },
            {
              "kind": "text",
              "text": " oOutputStr, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " iEncodingRunBufLen, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " *oEncodingRunOutLen, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@TextEncodingRun",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/textencodingrun",
              "text": "TextEncodingRun"
            },
            {
              "kind": "text",
              "text": " oEncodingRuns[]);"
            }
          ],
          "platforms": [
            "macOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "iUnicodeToTextInfo",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "You use the function "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1433632-createunicodetotextruninfo"
                },
                {
                  "type": "text",
                  "text": ", "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1433651-createunicodetotextruninfobyenco"
                },
                {
                  "type": "text",
                  "text": ", or "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1433657-createunicodetotextruninfobyscri"
                },
                {
                  "type": "text",
                  "text": " to obtain a Unicode converter object to specify for this parameter. "
                }
              ]
            }
          ]
        },
        {
          "name": "iUnicodeLen",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The length in bytes of the Unicode string to be converted. "
                }
              ]
            }
          ]
        },
        {
          "name": "iUnicodeStr",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer to the Unicode string to be converted. "
                }
              ]
            }
          ]
        },
        {
          "name": "iControlFlags",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Conversion control flags. The following constants define the masks for control flags valid for this parameter. You can use "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1433493-conversion_masks"
                },
                {
                  "type": "text",
                  "text": " and "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1433620-directionality_masks"
                },
                {
                  "type": "text",
                  "text": " to set the "
                },
                {
                  "type": "codeVoice",
                  "code": "iControlFlags"
                },
                {
                  "type": "text",
                  "text": " parameter. "
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "If the text-run control flag is clear, "
                },
                {
                  "type": "codeVoice",
                  "code": "ConvertFromUnicodeToTextRun"
                },
                {
                  "type": "text",
                  "text": " attempts to convert the Unicode text to the single encoding it chooses from the list of encodings in the Unicode mapping structures array that you provide when you create the Unicode converter object. This is the encoding that produces the best result, that is, that provides for the greatest amount of source text conversion. If the complete source text can be converted into more than one of the encodings specified in the Unicode mapping structures array, then the converter chooses among them based on their order in the array. If this flag is clear, the "
                },
                {
                  "type": "codeVoice",
                  "code": "oEncodingRuns"
                },
                {
                  "type": "text",
                  "text": " parameter always points to a value equal to 1. "
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "If you set the use-fallbacks control flag, the converter uses the default fallback characters for the current encoding. If the converter cannot handle a character using the current encoding, even using fallbacks, the converter attempts to convert the character using the other encodings, beginning with the first encoding specified in the list and skipping the encoding where it failed. "
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "If you set the "
                },
                {
                  "type": "codeVoice",
                  "code": "kUnicodeTextRunBit"
                },
                {
                  "type": "text",
                  "text": " control flag, the converter attempts to convert the complete Unicode text string into the first encoding specified in the Unicode mapping structures array you passed to "
                },
                {
                  "type": "codeVoice",
                  "code": "CreateUnicodeToTextRunInfo"
                },
                {
                  "type": "text",
                  "text": ", "
                },
                {
                  "type": "codeVoice",
                  "code": "CreateUnicodeToTextRunInfoByEncoding"
                },
                {
                  "type": "text",
                  "text": ", or "
                },
                {
                  "type": "codeVoice",
                  "code": "CreateUnicodeToTextRunInfoByScriptCod"
                },
                {
                  "type": "text",
                  "text": "e when you created the Unicode converter object for this conversion. If it cannot do this, the converter then attempts to convert the first text element that failed to the remaining encodings, in their specified order in the array. What the converter does with the next text element depends on the setting of the keep-same-encoding control flag."
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "If the keep-same-encoding control flag is clear, the converter returns to the original encoding and attempts to continue conversion with that encoding; this is equivalent to converting each text element to the first encoding that works, in the order specified. "
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "If the keep-same-encoding control flag is set, the converter continues with the new destination encoding until it encounters a text element that cannot be converted using the new encoding. This attempts to minimize the number of encoding changes in the output text. When the converter cannot convert a text element using any of the encodings in the list and the Unicode-keep-same-encoding control flag is set, the converter uses the fallbacks default characters for the current encoding."
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": []
            }
          ]
        },
        {
          "name": "iOffsetCount",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The number of offsets in the array pointed to by the "
                },
                {
                  "type": "codeVoice",
                  "code": "iOffsetArray"
                },
                {
                  "type": "text",
                  "text": " parameter. Your application supplies this value. If you don’t want offsets returned to you, specify "
                },
                {
                  "type": "codeVoice",
                  "code": "0"
                },
                {
                  "type": "text",
                  "text": " (zero)for this parameter. "
                }
              ]
            }
          ]
        },
        {
          "name": "iOffsetArray",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "An array of type "
                },
                {
                  "type": "codeVoice",
                  "code": "ByteOffset"
                },
                {
                  "type": "text",
                  "text": ". On input, you specify the array that contains an ordered list of significant byte offsets pertaining to the source Unicode string. These offsets may identify font or style changes, for example, in the Unicode string. If you don’t want offsets returned to your application, specify "
                },
                {
                  "type": "codeVoice",
                  "code": "NULL"
                },
                {
                  "type": "text",
                  "text": " for this parameter and "
                },
                {
                  "type": "codeVoice",
                  "code": "0"
                },
                {
                  "type": "text",
                  "text": " (zero)for "
                },
                {
                  "type": "codeVoice",
                  "code": "iOffsetCount"
                },
                {
                  "type": "text",
                  "text": ". All offsets must be less than "
                },
                {
                  "type": "codeVoice",
                  "code": "iUnicodeLen"
                },
                {
                  "type": "text",
                  "text": ". "
                }
              ]
            }
          ]
        },
        {
          "name": "oOffsetCount",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, a pointer to the number of offsets that were mapped in the output stream."
                }
              ]
            }
          ]
        },
        {
          "name": "oOffsetArray",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "An array of type "
                },
                {
                  "type": "codeVoice",
                  "code": "ByteOffset"
                },
                {
                  "type": "text",
                  "text": ". On return, this array contains the corresponding new offsets for the resulting converted string."
                }
              ]
            }
          ]
        },
        {
          "name": "iOutputBufLen",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The length in bytes of the output buffer pointed to by the "
                },
                {
                  "type": "codeVoice",
                  "code": "oOutputStr"
                },
                {
                  "type": "text",
                  "text": " parameter. Your application supplies this buffer to hold the returned converted string. The "
                },
                {
                  "type": "codeVoice",
                  "code": "oOutputLen"
                },
                {
                  "type": "text",
                  "text": " parameter may return a byte count that is less than this value if the converted byte string is smaller than the buffer size you allocated."
                }
              ]
            }
          ]
        },
        {
          "name": "oInputRead",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, a pointer to the number of bytes of the Unicode source string that were converted. If the function returns a result code other than "
                },
                {
                  "type": "codeVoice",
                  "code": "noErr"
                },
                {
                  "type": "text",
                  "text": ", then this parameter returns the number of bytes that were converted before the error occurred."
                }
              ]
            }
          ]
        },
        {
          "name": "oOutputLen",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, a pointer to the length in bytes of the converted string."
                }
              ]
            }
          ]
        },
        {
          "name": "oOutputStr",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A value of type "
                },
                {
                  "type": "codeVoice",
                  "code": "LogicalAddress"
                },
                {
                  "type": "text",
                  "text": ". On input, this value points to the start of the buffer for the converted string. On output, this buffer contains the converted string in one or more encodings. When an error occurs, the "
                },
                {
                  "type": "codeVoice",
                  "code": "ConvertFromUnicodeToTextRun"
                },
                {
                  "type": "text",
                  "text": " function returns the converted string up to the character that caused the error. (For guidelines on estimating the size of the buffer needed, see the discussion following the parameter descriptions. "
                }
              ]
            }
          ]
        },
        {
          "name": "iEncodingRunBufLen",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The number of text encoding run elements you allocated for the encoding run array pointed to by the "
                },
                {
                  "type": "codeVoice",
                  "code": "oEncodingRuns"
                },
                {
                  "type": "text",
                  "text": " parameter. The converter returns the number of valid encoding runs in the location pointed to by "
                },
                {
                  "type": "codeVoice",
                  "code": "oEncodingRunOutLen"
                },
                {
                  "type": "text",
                  "text": ". Each entry in the encoding runs array specifies the beginning offset in the converted text and its associated text encoding."
                }
              ]
            }
          ]
        },
        {
          "name": "oEncodingRunOutLen",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, a pointer to a the number of valid encoding runs returned in the "
                },
                {
                  "type": "codeVoice",
                  "code": "oEncodingRuns"
                },
                {
                  "type": "text",
                  "text": " parameter."
                }
              ]
            }
          ]
        },
        {
          "name": "oEncodingRuns",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On input, an array of structures of type "
                },
                {
                  "type": "codeVoice",
                  "code": "TextEncodingRun"
                },
                {
                  "type": "text",
                  "text": ". Your application should allocate an array with the number of elements you specify in the "
                },
                {
                  "type": "codeVoice",
                  "code": "iEncodingRunBufLen"
                },
                {
                  "type": "text",
                  "text": " parameter. On return, this array contains the encoding runs for the converted text string. Each entry in the encoding run array specifies the beginning offset in the converted text string and the associated encoding specification. "
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A resultcode. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To use the "
            },
            {
              "type": "codeVoice",
              "code": "ConvertFromUnicodeToTextRun"
            },
            {
              "type": "text",
              "text": " function,you must first set up an array of structures of type  "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreservices/unicodemapping"
            },
            {
              "type": "text",
              "text": "  containing,in order of precedence, the mapping information for the conversion.To create a Unicode converter object, you call the "
            },
            {
              "type": "codeVoice",
              "code": "CreateUnicodeToTextRunInfo"
            },
            {
              "type": "text",
              "text": " functionpassing it the Unicode mapping array, or you can the "
            },
            {
              "type": "codeVoice",
              "code": "CreateUnicodeToTextRunInfoByEncoding"
            },
            {
              "type": "text",
              "text": " or "
            },
            {
              "type": "codeVoice",
              "code": "CreateUnicodeToTextRunInfoByScriptCode"
            },
            {
              "type": "text",
              "text": " functions,which take arrays of text encodings or script codes instead of anarray of Unicode mappings. You pass the returned Unicode converterobject as the "
            },
            {
              "type": "codeVoice",
              "code": "iUnicodeToTextInfo"
            },
            {
              "type": "text",
              "text": " parameterwhen you call the "
            },
            {
              "type": "codeVoice",
              "code": "ConvertFromUnicodeToTextRun"
            },
            {
              "type": "text",
              "text": " function."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Two of the control flags that you can set for the "
            },
            {
              "type": "codeVoice",
              "code": "iControlFlags"
            },
            {
              "type": "text",
              "text": " parameterallow you to control how the Unicode Converter uses the multipleencodings in converting the text string. These flags are explainedin the description of the "
            },
            {
              "type": "codeVoice",
              "code": "iControlFlags"
            },
            {
              "type": "text",
              "text": " parameter.Here is a summary of how to use these two control flags:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": " To keep the converted text in a single encoding,clear the text-run control flag. "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": " To keep as much contiguous converted text as possible inone encoding, set the text-run control flag and clear the keep-same-encodingcontrol flag.  "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": " To minimize the number of resulting encoding runs and thechanges of destination encoding, set both the text-run and keep-same-encodingcontrol flags.  "
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The "
            },
            {
              "type": "codeVoice",
              "code": "ConvertFromUnicodeToTextRun"
            },
            {
              "type": "text",
              "text": " functionreturns the converted string in the array pointed to by the "
            },
            {
              "type": "codeVoice",
              "code": "oOutputStr"
            },
            {
              "type": "text",
              "text": " parameter.Beginning with the first text element in the "
            },
            {
              "type": "codeVoice",
              "code": "oOutputStr"
            },
            {
              "type": "text",
              "text": " array,the elements of the array pointed to by the "
            },
            {
              "type": "codeVoice",
              "code": "oEncodingRuns"
            },
            {
              "type": "text",
              "text": " parameter identifythe encodings of the converted string. The number of elements inthe "
            },
            {
              "type": "codeVoice",
              "code": "oEncodingRuns"
            },
            {
              "type": "text",
              "text": " arraymay not correspond to the number of elements in the "
            },
            {
              "type": "codeVoice",
              "code": "oOutputStr"
            },
            {
              "type": "text",
              "text": " array.This is because the "
            },
            {
              "type": "codeVoice",
              "code": "oEncodingRuns"
            },
            {
              "type": "text",
              "text": " arrayincludes only elements for the beginning of each new encoding runin the converted string.  "
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}