{
  "abstract": [
    {
      "type": "text",
      "text": "Converts a string from any encoding to Unicode. "
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coreservices",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/coreservices/1433517-convertfromtexttounicode",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1433517,
  "kind": "symbol",
  "metadata": {
    "title": "ConvertFromTextToUnicode",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Core Services"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.0",
        "current": "12.1"
      }
    ],
    "externalID": "c:@F@ConvertFromTextToUnicode",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/coreservices/1433517-convertfromtexttounicode"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coreservices": {
      "title": "Core Services",
      "identifier": "doc://com.apple.documentation/documentation/coreservices",
      "url": "/documentation/coreservices",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core": {
      "title": "Carbon Core",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core",
      "url": "/documentation/coreservices/carbon_core",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager": {
      "title": "Text Encoding Conversion Manager",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324": {
      "title": "Result Codes",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324",
      "kind": "article",
      "role": "task",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433598-createtexttounicodeinfo": {
      "title": "CreateTextToUnicodeInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433598-createtexttounicodeinfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433598-createtexttounicodeinfo",
      "abstract": [
        {
          "type": "text",
          "text": "Creates and returns a Unicode converter object containinginformation required for converting strings from a non-Unicode encodingto Unicode. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1433493-conversion_masks": {
      "title": "Conversion Masks",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433493-conversion_masks",
      "kind": "symbol",
      "role": "containerSymbol",
      "url": "/documentation/coreservices/1433493-conversion_masks"
    },
    "doc://com.apple.documentation/documentation/coreservices/texttounicodeinfo": {
      "title": "TextToUnicodeInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/texttounicodeinfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/texttounicodeinfo"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433487-changetexttounicodeinfo": {
      "title": "ChangeTextToUnicodeInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433487-changetexttounicodeinfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433487-changetexttounicodeinfo",
      "abstract": [
        {
          "type": "text",
          "text": "Changes the mapping information for the specified Unicodeconverter object used to convert text to Unicode to the new mappingyou provide. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1433517-convertfromtexttounicode": {
      "title": "ConvertFromTextToUnicode",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433517-convertfromtexttounicode",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433517-convertfromtexttounicode",
      "abstract": [
        {
          "type": "text",
          "text": "Converts a string from any encoding to Unicode. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1433560-createtexttounicodeinfobyencodin": {
      "title": "CreateTextToUnicodeInfoByEncoding",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433560-createtexttounicodeinfobyencodin",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433560-createtexttounicodeinfobyencodin",
      "abstract": [
        {
          "type": "text",
          "text": "Based on the given text encoding specification, createsand returns a Unicode converter object containing information requiredfor converting strings from the specified non-Unicode encoding toUnicode. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1433669-disposetexttounicodeinfo": {
      "title": "DisposeTextToUnicodeInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433669-disposetexttounicodeinfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433669-disposetexttounicodeinfo",
      "abstract": [
        {
          "type": "text",
          "text": "Releases the memory allocated for the specified Unicodeconverter object. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coreservices/1433526-resettexttounicodeinfo": {
      "title": "ResetTextToUnicodeInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433526-resettexttounicodeinfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreservices/1433526-resettexttounicodeinfo",
      "abstract": [
        {
          "type": "text",
          "text": "Reinitializes all state information kept by the contextobjects."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/coreservices/1433487-changetexttounicodeinfo",
        "doc://com.apple.documentation/documentation/coreservices/1433598-createtexttounicodeinfo",
        "doc://com.apple.documentation/documentation/coreservices/1433560-createtexttounicodeinfobyencodin",
        "doc://com.apple.documentation/documentation/coreservices/1433669-disposetexttounicodeinfo",
        "doc://com.apple.documentation/documentation/coreservices/1433526-resettexttounicodeinfo"
      ],
      "title": "Converting to Unicode",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "identifier": "symbol-1480124",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "ConvertFromTextToUnicode"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@TextToUnicodeInfo",
              "identifier": "doc://com.apple.documentation/documentation/coreservices/texttounicodeinfo",
              "text": "TextToUnicodeInfo"
            },
            {
              "kind": "text",
              "text": " iTextToUnicodeInfo, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " iSourceLen, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ConstLogicalAddress",
              "text": "ConstLogicalAddress"
            },
            {
              "kind": "text",
              "text": " iSourceStr, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OptionBits",
              "text": "OptionBits"
            },
            {
              "kind": "text",
              "text": " iControlFlags, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " iOffsetCount, "
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteOffset",
              "text": "ByteOffset"
            },
            {
              "kind": "text",
              "text": " iOffsetArray[], "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " *oOffsetCount, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteOffset",
              "text": "ByteOffset"
            },
            {
              "kind": "text",
              "text": " oOffsetArray[], "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " iOutputBufLen, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " *oSourceRead, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " *oUnicodeLen, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@UniChar",
              "text": "UniChar"
            },
            {
              "kind": "text",
              "text": " oUnicodeStr[]);"
            }
          ],
          "platforms": [
            "macOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "iTextToUnicodeInfo",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A Unicode converter object of type "
                },
                {
                  "type": "codeVoice",
                  "code": "TextToUnicodeInfo"
                },
                {
                  "type": "text",
                  "text": " containing mapping and state information used for the conversion. The contents of this Unicode converter object are modified by the function. Your application obtains a Unicode converter object using the function "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1433598-createtexttounicodeinfo"
                },
                {
                  "type": "text",
                  "text": ". "
                }
              ]
            }
          ]
        },
        {
          "name": "iSourceLen",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The length in bytes of the source string to be converted. "
                }
              ]
            }
          ]
        },
        {
          "name": "iSourceStr",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The address of the source string to be converted. "
                }
              ]
            }
          ]
        },
        {
          "name": "iControlFlags",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Conversion control flags. You can use "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1433493-conversion_masks"
                },
                {
                  "type": "text",
                  "text": " to set the "
                },
                {
                  "type": "codeVoice",
                  "code": "iControlFlags"
                },
                {
                  "type": "text",
                  "text": " parameter. "
                }
              ]
            }
          ]
        },
        {
          "name": "iOffsetCount",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The number of offsets in the "
                },
                {
                  "type": "codeVoice",
                  "code": "iOffsetArray"
                },
                {
                  "type": "text",
                  "text": " parameter. Your application supplies this value. The number of entries in "
                },
                {
                  "type": "codeVoice",
                  "code": "iOffsetArray"
                },
                {
                  "type": "text",
                  "text": " must be fewer than the number of bytes specified in "
                },
                {
                  "type": "codeVoice",
                  "code": "iSourceLen"
                },
                {
                  "type": "text",
                  "text": ". If you don’t want offsets returned to you, specify "
                },
                {
                  "type": "codeVoice",
                  "code": "0"
                },
                {
                  "type": "text",
                  "text": " (zero)for this parameter. "
                }
              ]
            }
          ]
        },
        {
          "name": "iOffsetArray",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "An array of type "
                },
                {
                  "type": "codeVoice",
                  "code": "ByteOffset."
                },
                {
                  "type": "text",
                  "text": " On input, you specify the array that contains an ordered list of significant byte offsets pertaining to the source string. These offsets may identify font or style changes, for example, in the source string. All array entries must be less than the length in bytes specified by the "
                },
                {
                  "type": "codeVoice",
                  "code": "iSourceLen"
                },
                {
                  "type": "text",
                  "text": " parameter. If you don’t want offsets returned to your application, specify "
                },
                {
                  "type": "codeVoice",
                  "code": "NULL"
                },
                {
                  "type": "text",
                  "text": " for this parameter and "
                },
                {
                  "type": "codeVoice",
                  "code": "0"
                },
                {
                  "type": "text",
                  "text": " (zero)for "
                },
                {
                  "type": "codeVoice",
                  "code": "iOffsetCount"
                },
                {
                  "type": "text",
                  "text": ". "
                }
              ]
            }
          ]
        },
        {
          "name": "oOffsetCount",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, a pointer to the number of offsets that were mapped in the output stream."
                }
              ]
            }
          ]
        },
        {
          "name": "oOffsetArray",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "An array of type "
                },
                {
                  "type": "codeVoice",
                  "code": "ByteOffset"
                },
                {
                  "type": "text",
                  "text": ". On return, this array contains the corresponding new offsets for the Unicode string produced by the converter."
                }
              ]
            }
          ]
        },
        {
          "name": "iOutputBufLen",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The length in bytes of the output buffer pointed to by the "
                },
                {
                  "type": "codeVoice",
                  "code": "oUnicodeStr"
                },
                {
                  "type": "text",
                  "text": " parameter. Your application supplies this buffer to hold the returned converted string. The "
                },
                {
                  "type": "codeVoice",
                  "code": "oUnicodeLen"
                },
                {
                  "type": "text",
                  "text": " parameter may return a byte count that is less than this value if the converted byte string is smaller than the buffer size you allocated. The relationship between the size of the source string and the Unicode string is complex and depends on the source encoding and the contents of the string."
                }
              ]
            }
          ]
        },
        {
          "name": "oSourceRead",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, a pointer to the number of bytes of the source string that were converted. If the function returns a "
                },
                {
                  "type": "codeVoice",
                  "code": "kTECUnmappableElementErr"
                },
                {
                  "type": "text",
                  "text": " result code, this parameter returns the number of bytes that were converted before the error occurred."
                }
              ]
            }
          ]
        },
        {
          "name": "oUnicodeLen",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, a pointer to the length in bytes of the converted stream."
                }
              ]
            }
          ]
        },
        {
          "name": "oUnicodeStr",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer to an array used to hold a Unicode string. On input, this value points to the beginning of the array for the converted string. On return, this buffer holds the converted Unicode string. (For guidelines on estimating the size of the buffer needed, see the discussion. "
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A resultcode. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324"
            },
            {
              "type": "text",
              "text": ". The function returnsa "
            },
            {
              "type": "codeVoice",
              "code": "noErr"
            },
            {
              "type": "text",
              "text": " result code ifit has completely converted the input string to Unicode withoutusing fallback characters."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You specify the source string’s encoding in the Unicodemapping structure that you pass to the function  "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreservices/1433598-createtexttounicodeinfo"
            },
            {
              "type": "text",
              "text": "  to obtain aUnicode converter object for the conversion. You pass the Unicodeconverter object returned by "
            },
            {
              "type": "codeVoice",
              "code": "CreateTextToUnicodeInfo"
            },
            {
              "type": "text",
              "text": " to "
            },
            {
              "type": "codeVoice",
              "code": "ConvertFromTextToUnicode"
            },
            {
              "type": "text",
              "text": " asthe "
            },
            {
              "type": "codeVoice",
              "code": "iTextToUnicodeInfo"
            },
            {
              "type": "text",
              "text": " parameter. "
            },
            {
              "type": "codeVoice",
              "code": " "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In addition to converting a text string in any encoding toUnicode, the "
            },
            {
              "type": "codeVoice",
              "code": "ConvertFromTextToUnicode"
            },
            {
              "type": "text",
              "text": " functioncan map offsets for style or font information from the source textstring to the returned converted string. The converter reads the application-suppliedoffsets, which apply to the source string, and returns the correspondingnew offsets in the converted string. If you do not want the offsetsat which font or style information occurs mapped to the resultingstring, you should pass "
            },
            {
              "type": "codeVoice",
              "code": "NULL"
            },
            {
              "type": "text",
              "text": " for "
            },
            {
              "type": "codeVoice",
              "code": "iOffsetArray"
            },
            {
              "type": "text",
              "text": " and "
            },
            {
              "type": "codeVoice",
              "code": "0 "
            },
            {
              "type": "text",
              "text": " (zero) for "
            },
            {
              "type": "codeVoice",
              "code": "iOffsetCount"
            },
            {
              "type": "text",
              "text": ". "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Your application must allocate a buffer to hold the resultingconverted string and pass a pointer to the buffer in the "
            },
            {
              "type": "codeVoice",
              "code": "oUnicodeStr"
            },
            {
              "type": "text",
              "text": " parameter.To determine the size of the output buffer to allocate, you shouldconsider the size of the source string, its encoding type, and itscontent in relation to the resulting Unicode string. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For example, for 1-byte encodings, such as MacRoman, the Unicodestring will be at least double the size (more if it uses noncomposedUnicode) for MacArabic and MacHebrew, the corresponding Unicodestring could be up to six times as big. For most 2-byte encodings,for example Shift-JIS, the Unicode string will be less than doublethe size. For international robustness, your application shouldallocate a buffer three to four times larger than the source string.If the output Unicode text is actually UTF-8—which could occurbeginning with the current release of the Text Encoding ConversionManager, version 1.2.1—the UTF-8 buffer pointer must be cast to "
            },
            {
              "type": "codeVoice",
              "code": "UniCharArrayPtr"
            },
            {
              "type": "text",
              "text": " beforeit can be passed as the "
            },
            {
              "type": "codeVoice",
              "code": "oUnicodeStr"
            },
            {
              "type": "text",
              "text": " parameter.Also, the output buffer length will have a wider range of variationthan for UTF-16; for ASCII input, the output will be the same size;for Han input, the output will be twice as big, and so on.  "
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}