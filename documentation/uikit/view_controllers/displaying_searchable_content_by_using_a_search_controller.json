{
  "abstract": [
    {
      "type": "text",
      "text": "Create a user interface with searchable content in a table view."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/foundation",
        "doc://com.apple.documentation/documentation/foundation/filters_and_sorting",
        "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate"
      ],
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/uikit",
        "doc://com.apple.documentation/documentation/uikit/view_controllers"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/uikit/view_controllers/displaying_searchable_content_by_using_a_search_controller",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 3034169,
  "kind": "article",
  "metadata": {
    "title": "Displaying Searchable Content by Using a Search Controller",
    "role": "sampleCode",
    "roleHeading": "Sample Code",
    "modules": [
      {
        "name": "Foundation"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "11.0",
        "current": "14.3"
      },
      {
        "name": "Xcode",
        "introducedAt": "11.0",
        "current": "12.3"
      }
    ]
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/uikit/view_controllers/displaying_searchable_content_by_using_a_search_controller",
        "documentation/foundation/nscomparisonpredicate/displaying_searchable_content_by_using_a_search_controller"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/uikit/view_controllers/displaying_searchable_content_by_using_a_search_controller",
        "documentation/foundation/nscomparisonpredicate/displaying_searchable_content_by_using_a_search_controller"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/foundation": {
      "title": "Foundation",
      "identifier": "doc://com.apple.documentation/documentation/foundation",
      "url": "/documentation/foundation",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/foundation/filters_and_sorting": {
      "title": "Filters and Sorting",
      "identifier": "doc://com.apple.documentation/documentation/foundation/filters_and_sorting",
      "url": "/documentation/foundation/filters_and_sorting",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate": {
      "title": "NSComparisonPredicate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nscomparisonpredicate"
    },
    "doc://com.apple.documentation/documentation/uikit": {
      "title": "UIKit",
      "identifier": "doc://com.apple.documentation/documentation/uikit",
      "url": "/documentation/uikit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/uikit/view_controllers": {
      "title": "View Controllers",
      "identifier": "doc://com.apple.documentation/documentation/uikit/view_controllers",
      "url": "/documentation/uikit/view_controllers",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/uikit/uitableviewcontroller": {
      "title": "UITableViewController",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uitableviewcontroller",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uitableviewcontroller"
    },
    "doc://com.apple.documentation/documentation/uikit/view_controllers/displaying_searchable_content_by_using_a_search_controller#3503937": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/uikit/view_controllers/displaying_searchable_content_by_using_a_search_controller#3503937",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/uikit/view_controllers/displaying_searchable_content_by_using_a_search_controller#3503937"
    },
    "doc://com.apple.documentation/documentation/uikit/uisearchresultsupdating": {
      "title": "UISearchResultsUpdating",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uisearchresultsupdating",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uisearchresultsupdating"
    },
    "doc://com.apple.documentation/documentation/uikit/view_controllers/displaying_searchable_content_by_using_a_search_controller#3503939": {
      "title": "Listing 2",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/uikit/view_controllers/displaying_searchable_content_by_using_a_search_controller#3503939",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/uikit/view_controllers/displaying_searchable_content_by_using_a_search_controller#3503939"
    },
    "doc://com.apple.documentation/documentation/uikit/uistaterestoring": {
      "title": "UIStateRestoring",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uistaterestoring",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uistaterestoring"
    },
    "doc://com.apple.documentation/documentation/uikit/view_controllers/displaying_searchable_content_by_using_a_search_controller": {
      "title": "Displaying Searchable Content by Using a Search Controller",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/view_controllers/displaying_searchable_content_by_using_a_search_controller",
      "kind": "article",
      "role": "sampleCode",
      "url": "/documentation/uikit/view_controllers/displaying_searchable_content_by_using_a_search_controller",
      "abstract": [
        {
          "type": "text",
          "text": "Create a user interface with searchable content in a table view."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate/1568141-predicatewithleftexpression": {
      "title": "predicateWithLeftExpression:rightExpression:customSelector:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate/1568141-predicatewithleftexpression",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nscomparisonpredicate/1568141-predicatewithleftexpression",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a new predicate formed by combining the left and right expressions using a given selector."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "predicateWithLeftExpression:rightExpression:customSelector:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate/1568140-predicatewithleftexpression": {
      "title": "predicateWithLeftExpression:rightExpression:modifier:type:options:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate/1568140-predicatewithleftexpression",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nscomparisonpredicate/1568140-predicatewithleftexpression",
      "abstract": [
        {
          "type": "text",
          "text": "Creates and returns a predicate of a given type formed by combining given left and right expressions using a given modifier and options."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "predicateWithLeftExpression:rightExpression:modifier:type:options:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate/1409054-initwithleftexpression": {
      "title": "initWithLeftExpression:rightExpression:customSelector:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate/1409054-initwithleftexpression",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nscomparisonpredicate/1409054-initwithleftexpression",
      "abstract": [
        {
          "type": "text",
          "text": "Initializes a predicate formed by combining given left and right expressions using a given selector."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "initWithLeftExpression:rightExpression:customSelector:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate/1413523-initwithleftexpression": {
      "title": "initWithLeftExpression:rightExpression:modifier:type:options:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate/1413523-initwithleftexpression",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nscomparisonpredicate/1413523-initwithleftexpression",
      "abstract": [
        {
          "type": "text",
          "text": "Initializes a predicate to a given type formed by combining given left and right expressions using a given modifier and options."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "initWithLeftExpression:rightExpression:modifier:type:options:"
        }
      ]
    },
    "https://docs-assets.developer.apple.com/published/bbb8726fef/DisplayingSearchableContentByUsingASearchController.zip": {
      "type": "download",
      "identifier": "https://docs-assets.developer.apple.com/published/bbb8726fef/DisplayingSearchableContentByUsingASearchController.zip",
      "checksum": "870a426a254f47f54e5ec1f7b13808c02a824ebb7d46bc3117ed43bd25e29ca0d98981101a357b559091b16bc2bd263689d4894b5d6446660d8f8c1a4922c909",
      "url": "https://docs-assets.developer.apple.com/published/bbb8726fef/DisplayingSearchableContentByUsingASearchController.zip"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "sampleCodeDownload": {
    "action": {
      "overridingTitle": "Download",
      "type": "reference",
      "isActive": true,
      "identifier": "https://docs-assets.developer.apple.com/published/bbb8726fef/DisplayingSearchableContentByUsingASearchController.zip"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate/1568141-predicatewithleftexpression",
        "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate/1568140-predicatewithleftexpression",
        "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate/1409054-initwithleftexpression",
        "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate/1413523-initwithleftexpression"
      ],
      "title": "Creating Comparison Predicates",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This sample demonstrates how to create a table view controller and search controller to manage the display of searchable content. It creates another custom table view controller to display the search results. This table view controller also acts as the presenter or provides context for the search results so they’re presented within their own context."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This sample includes the optional—but recommended—"
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uistaterestoring"
            },
            {
              "type": "text",
              "text": " protocol. You adopt this protocol from the view controller class to save the search bar’s active state, first responder status, and search bar text and restore them when the app is relaunched."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Create a Search Controller",
          "anchor": "3503942"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Use "
            },
            {
              "type": "codeVoice",
              "code": "MainTableViewController"
            },
            {
              "type": "text",
              "text": ", a subclass of "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uitableviewcontroller"
            },
            {
              "type": "text",
              "text": ", to create a search controller. The search controller searches and filters a set of "
            },
            {
              "type": "codeVoice",
              "code": "Product"
            },
            {
              "type": "text",
              "text": " objects and displays them in a table called "
            },
            {
              "type": "codeVoice",
              "code": "ResultsTableController"
            },
            {
              "type": "text",
              "text": ". This table controller is displayed as the user enters a search string and is dismissed when the search is complete."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "override func viewDidLoad() {",
            "    super.viewDidLoad()",
            "",
            "    let nib = UINib(nibName: \"TableCell\", bundle: nil)",
            "    tableView.register(nib, forCellReuseIdentifier: tableViewCellIdentifier)",
            "    ",
            "    resultsTableController =",
            "        self.storyboard?.instantiateViewController(withIdentifier: \"ResultsTableController\") as? ResultsTableController",
            "    // This view controller is interested in table view row selections.",
            "    resultsTableController.tableView.delegate = self",
            "    ",
            "    searchController = UISearchController(searchResultsController: resultsTableController)",
            "    searchController.delegate = self",
            "    searchController.searchResultsUpdater = self",
            "    searchController.searchBar.autocapitalizationType = .none",
            "    searchController.dimsBackgroundDuringPresentation = false",
            "    searchController.searchBar.delegate = self // Monitor when the search button is tapped.",
            "    ",
            "    searchController.searchBar.scopeButtonTitles = [Product.productTypeName(forType: .all),",
            "                                                    Product.productTypeName(forType: .birthdays),",
            "                                                    Product.productTypeName(forType: .weddings),",
            "                                                    Product.productTypeName(forType: .funerals)]",
            "",
            "    // Place the search bar in the navigation bar.",
            "    navigationItem.searchController = searchController",
            "    ",
            "    // Make the search bar always visible.",
            "    navigationItem.hidesSearchBarWhenScrolling = false",
            "    ",
            "    /** Search presents a view controller by applying normal view controller presentation semantics.",
            "        This means that the presentation moves up the view controller hierarchy until it finds the root",
            "        view controller or one that defines a presentation context.",
            "    */",
            "    ",
            "    /** Specify that this view controller determines how the search controller is presented.",
            "        The search controller should be presented modally and match the physical size of this view controller.",
            "    */",
            "    definesPresentationContext = true",
            "    ",
            "    setupDataSource()",
            "}"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3503937",
            "title": "Listing 1"
          }
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Update the Search Results",
          "anchor": "3503943"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This sample uses the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uisearchresultsupdating"
            },
            {
              "type": "text",
              "text": " protocol, along with "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/foundation/nscomparisonpredicate"
            },
            {
              "type": "text",
              "text": ", to filter search results from the group of available products. "
            },
            {
              "type": "codeVoice",
              "code": "NSComparisonPredicate"
            },
            {
              "type": "text",
              "text": " is a foundation class that specifies how data should be fetched or filtered using search criteria. The search criteria are based on what the user types in the search bar, which can be a combination of product title, year introduced, and price."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To prepare for a search, the search bar content is trimmed of all leading and trailing space characters. Then the search string is passed to the "
            },
            {
              "type": "codeVoice",
              "code": "findMatches"
            },
            {
              "type": "text",
              "text": " function, which returns the "
            },
            {
              "type": "codeVoice",
              "code": "NSComparisonPredicate"
            },
            {
              "type": "text",
              "text": " used in the search. The product list results are applied to the search results table as a filtered list."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "func updateSearchResults(for searchController: UISearchController) {",
            "       // Update the filtered array based on the search text.",
            "       let searchResults = products",
            "",
            "       // Strip out all the leading and trailing spaces.",
            "       let whitespaceCharacterSet = CharacterSet.whitespaces",
            "       let strippedString =",
            "           searchController.searchBar.text!.trimmingCharacters(in: whitespaceCharacterSet)",
            "       let searchItems = strippedString.components(separatedBy: \" \") as [String]",
            "",
            "       // Build all the \"AND\" expressions for each value in searchString.",
            "       let andMatchPredicates: [NSPredicate] = searchItems.map { searchString in",
            "           findMatches(searchString: searchString)",
            "       }",
            "",
            "       // Match up the fields of the Product object.",
            "       let finalCompoundPredicate =",
            "           NSCompoundPredicate(andPredicateWithSubpredicates: andMatchPredicates)",
            "",
            "       let filteredResults = searchResults.filter { finalCompoundPredicate.evaluate(with: $0) }",
            "",
            "       // Apply the filtered results to the search results table.",
            "       if let resultsController = searchController.searchResultsController as? ResultsTableController {",
            "           resultsController.filteredProducts = filteredResults",
            "           resultsController.tableView.reloadData()",
            "",
            "           resultsController.resultsLabel.text = resultsController.filteredProducts.isEmpty ?",
            "               NSLocalizedString(\"NoItemsFoundTitle\", comment: \"\") :",
            "               String(format: NSLocalizedString(\"Items found: %ld\", comment: \"\"),",
            "                      resultsController.filteredProducts.count)",
            "       }",
            "   }"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3503939",
            "title": "Listing 2"
          }
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}