{
  "abstract": [
    {
      "type": "text",
      "text": "Add an extension to your Xcode project to provide systemwide customized text input."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/uikit",
        "doc://com.apple.documentation/documentation/uikit/keyboards_and_input"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 3570251,
  "kind": "article",
  "metadata": {
    "title": "Creating a Custom Keyboard",
    "role": "article",
    "roleHeading": "Article",
    "modules": [
      {
        "name": "UIKit"
      }
    ]
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/uikit/keyboards_and_input/creating_a_custom_keyboard"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/uikit/keyboards_and_input/creating_a_custom_keyboard"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/uikit": {
      "title": "UIKit",
      "identifier": "doc://com.apple.documentation/documentation/uikit",
      "url": "/documentation/uikit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/uikit/keyboards_and_input": {
      "title": "Keyboards and Input",
      "identifier": "doc://com.apple.documentation/documentation/uikit/keyboards_and_input",
      "url": "/documentation/uikit/keyboards_and_input",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "link-media-3570733": {
      "identifier": "link-media-3570733",
      "type": "link",
      "title": "Figure 1",
      "url": "/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570733"
    },
    "media-3570733": {
      "identifier": "media-3570733",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 1084,
            "height": 720
          },
          "url": "https://docs-assets.developer.apple.com/published/d04f579051/3570733@2x.png"
        },
        {
          "traits": [
            "dark",
            "2x"
          ],
          "size": {
            "width": 1084,
            "height": 720
          },
          "url": "https://docs-assets.developer.apple.com/published/5bdf14c31a/3570733~dark@2x.png"
        }
      ],
      "alt": "Screenshot of Xcode's new target dialog with Custom Keyboard Extension highlighted.",
      "title": "Figure 1"
    },
    "link-media-3570265": {
      "identifier": "link-media-3570265",
      "type": "link",
      "title": "Figure 2",
      "url": "/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570265"
    },
    "media-3570265": {
      "identifier": "media-3570265",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 498,
            "height": 79
          },
          "url": "https://docs-assets.developer.apple.com/published/40f48d6214/3570265@2x.png"
        },
        {
          "traits": [
            "dark",
            "2x"
          ],
          "size": {
            "width": 498,
            "height": 79
          },
          "url": "https://docs-assets.developer.apple.com/published/1838a1af27/3570265~dark@2x.png"
        }
      ],
      "alt": "Screenshot of the Identity section from Xcode's Project editor showing the Display Name field. ",
      "title": "Figure 2"
    },
    "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570253": {
      "title": "Table 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570253",
      "kind": "article",
      "role": "table",
      "url": "/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570253"
    },
    "link-media-3570266": {
      "identifier": "link-media-3570266",
      "type": "link",
      "title": "Figure 3",
      "url": "/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570266"
    },
    "media-3570266": {
      "identifier": "media-3570266",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 407,
            "height": 111
          },
          "url": "https://docs-assets.developer.apple.com/published/e9169ef201/3570266@2x.png"
        },
        {
          "traits": [
            "dark",
            "2x"
          ],
          "size": {
            "width": 407,
            "height": 111
          },
          "url": "https://docs-assets.developer.apple.com/published/e1f2e50387/3570266~dark@2x.png"
        }
      ],
      "alt": "Screenshot showing the NSExtensionAttributes section in a custom keyboard target's Info.plist file. ",
      "title": "Figure 3"
    },
    "doc://com.apple.documentation/documentation/objectivec/yes": {
      "title": "YES",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/objectivec/yes",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/objectivec/yes"
    },
    "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/configuring_open_access_for_a_custom_keyboard": {
      "title": "Configuring Open Access for a Custom Keyboard",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/configuring_open_access_for_a_custom_keyboard",
      "kind": "article",
      "role": "article",
      "url": "/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/configuring_open_access_for_a_custom_keyboard",
      "abstract": [
        {
          "type": "text",
          "text": "Enable network access and write access to a shared group container."
        }
      ]
    },
    "link-3570453": {
      "title": "Human Interface Guidelines > Custom Keyboards",
      "type": "topic",
      "identifier": "link-3570453",
      "kind": "article",
      "role": "link",
      "url": "https://developer.apple.com/design/human-interface-guidelines/ios/extensions/custom-keyboards/"
    },
    "link-media-3570257": {
      "identifier": "link-media-3570257",
      "type": "link",
      "title": "Figure 4",
      "url": "/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570257"
    },
    "media-3570257": {
      "identifier": "media-3570257",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 367,
            "height": 283
          },
          "url": "https://docs-assets.developer.apple.com/published/81489edfc0/3570257@2x.png"
        },
        {
          "traits": [
            "dark",
            "2x"
          ],
          "size": {
            "width": 367,
            "height": 283
          },
          "url": "https://docs-assets.developer.apple.com/published/f5a356b750/3570257~dark@2x.png"
        }
      ],
      "alt": "Screenshot showing the standard system keyboard.",
      "title": "Figure 4"
    },
    "doc://com.apple.documentation/documentation/uikit/uiinputviewcontroller/2875741-needsinputmodeswitchkey": {
      "title": "needsInputModeSwitchKey",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiinputviewcontroller/2875741-needsinputmodeswitchkey",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiinputviewcontroller/2875741-needsinputmodeswitchkey"
    },
    "doc://com.apple.documentation/documentation/uikit/uiinputviewcontroller/1649584-handleinputmodelistfromview": {
      "title": "handleInputModeListFromView:withEvent:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiinputviewcontroller/1649584-handleinputmodelistfromview",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiinputviewcontroller/1649584-handleinputmodelistfromview",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "handleInputModeListFromView:withEvent:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570261": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570261",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570261"
    },
    "doc://com.apple.documentation/documentation/uikit/uicontrolevents/uicontroleventalltouchevents": {
      "title": "UIControlEventAllTouchEvents",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uicontrolevents/uicontroleventalltouchevents",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uicontrolevents/uicontroleventalltouchevents"
    },
    "link-media-3570259": {
      "identifier": "link-media-3570259",
      "type": "link",
      "title": "Figure 5",
      "url": "/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570259"
    },
    "media-3570259": {
      "identifier": "media-3570259",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 735,
            "height": 229
          },
          "url": "https://docs-assets.developer.apple.com/published/87bad17706/3570259@2x.png"
        },
        {
          "traits": [
            "dark",
            "2x"
          ],
          "size": {
            "width": 735,
            "height": 229
          },
          "url": "https://docs-assets.developer.apple.com/published/290cc716be/3570259~dark@2x.png"
        }
      ],
      "alt": "Screenshot of the system keyboard after the user had long pressed the globe icon. The globe button displays a popup menu allowing the user to select between their enabled keyboards, or open Keyboard Settings.",
      "title": "Figure 5"
    },
    "link-media-3571051": {
      "identifier": "link-media-3571051",
      "type": "link",
      "title": "Figure 6",
      "url": "/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3571051"
    },
    "media-3571051": {
      "identifier": "media-3571051",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 1194,
            "height": 834
          },
          "url": "https://docs-assets.developer.apple.com/published/d518529fb6/3571051@2x.png"
        },
        {
          "traits": [
            "dark",
            "2x"
          ],
          "size": {
            "width": 1194,
            "height": 834
          },
          "url": "https://docs-assets.developer.apple.com/published/e043a62c24/3571051~dark@2x.png"
        }
      ],
      "alt": "Screenshot showing a floating keyboard in iPadOS.",
      "title": "Figure 6"
    },
    "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/configuring_a_custom_keyboard_interface": {
      "title": "Configuring a Custom Keyboard Interface",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/configuring_a_custom_keyboard_interface",
      "kind": "article",
      "role": "article",
      "url": "/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/configuring_a_custom_keyboard_interface",
      "abstract": [
        {
          "type": "text",
          "text": "Design a flexible, functional, and responsive interface for editing text."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uiinputviewcontroller": {
      "title": "UIInputViewController",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiinputviewcontroller",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiinputviewcontroller",
      "abstract": [
        {
          "type": "text",
          "text": "The primary view controller for a custom keyboard app extension. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uiinputviewcontroller/1618193-textdocumentproxy": {
      "title": "textDocumentProxy",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiinputviewcontroller/1618193-textdocumentproxy",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiinputviewcontroller/1618193-textdocumentproxy"
    },
    "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570260": {
      "title": "Listing 2",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570260",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard#3570260"
    },
    "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/handling_text_interactions_in_custom_keyboards": {
      "title": "Handling Text Interactions in Custom Keyboards",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/handling_text_interactions_in_custom_keyboards",
      "kind": "article",
      "role": "article",
      "url": "/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/handling_text_interactions_in_custom_keyboards",
      "abstract": [
        {
          "type": "text",
          "text": "Insert, delete, and manipulate text by using a proxy to a text input view."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/xcode/diagnosing-issues-using-crash-reports-and-device-logs": {
      "title": "Diagnosing Issues Using Crash Reports and Device Logs",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/xcode/diagnosing-issues-using-crash-reports-and-device-logs",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/xcode/diagnosing-issues-using-crash-reports-and-device-logs"
    },
    "doc://com.apple.documentation/documentation/uikit/uiinputview": {
      "title": "UIInputView",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiinputview",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiinputview",
      "abstract": [
        {
          "type": "text",
          "text": "An object that displays and manages custom input for a view when that view becomes the first responder.  "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uitextfield/1619620-inputview": {
      "title": "inputView",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uitextfield/1619620-inputview",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uitextfield/1619620-inputview"
    },
    "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard": {
      "title": "Creating a Custom Keyboard",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard",
      "kind": "article",
      "role": "article",
      "url": "/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard",
      "abstract": [
        {
          "type": "text",
          "text": "Add an extension to your Xcode project to provide systemwide customized text input."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uilexicon": {
      "title": "UILexicon",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uilexicon",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uilexicon",
      "abstract": [
        {
          "type": "text",
          "text": "A read-only array of term pairs, each in a lexicon entry object, for a custom keyboard."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uilexiconentry": {
      "title": "UILexiconEntry",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uilexiconentry",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uilexiconentry",
      "abstract": [
        {
          "type": "text",
          "text": "A read-only term pair, available within a lexicon object, for a custom keyboard."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uitextdocumentproxy": {
      "title": "UITextDocumentProxy",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uitextdocumentproxy",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uitextdocumentproxy",
      "abstract": [
        {
          "type": "text",
          "text": "An object that provides textual context to a custom keyboard."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "topicSections": [
    {
      "kind": "taskGroup",
      "title": "Keyboard Configuration",
      "identifiers": [
        "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/configuring_a_custom_keyboard_interface",
        "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/configuring_open_access_for_a_custom_keyboard"
      ],
      "anchor": "3570429"
    },
    {
      "kind": "taskGroup",
      "title": "Text Interactions",
      "identifiers": [
        "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/handling_text_interactions_in_custom_keyboards"
      ],
      "anchor": "3570430"
    }
  ],
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/uikit/uiinputviewcontroller",
        "doc://com.apple.documentation/documentation/uikit/uiinputview",
        "doc://com.apple.documentation/documentation/uikit/uilexicon",
        "doc://com.apple.documentation/documentation/uikit/uilexiconentry",
        "doc://com.apple.documentation/documentation/uikit/uitextdocumentproxy"
      ],
      "title": "Custom Keyboards",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A custom keyboard replaces the system keyboard for users who want capabilities such as a novel text input method or the ability to enter text in a language not otherwise supported. Users enable your custom keyboard in Settings, which allows them to access your keyboard systemwide wherever third-party keyboards are supported. "
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "If your keyboard is specific to your app, use a "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/uikit/uiinputview"
                },
                {
                  "type": "text",
                  "text": " instead of creating a custom keyboard. Set the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/uikit/uitextfield/1619620-inputview"
                },
                {
                  "type": "text",
                  "text": " property of text fields or text views to a view that should replace the system keyboard. "
                }
              ]
            }
          ],
          "style": "note",
          "name": "Note"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Creating a custom keyboard requires several steps. In addition to adding a Custom Keyboard extension target to your project, you have to configure options, implement your custom interface, and decide what text interactions to support. Users expect a variety of common keyboard interactions such as autocorrection, autocapitalization, smart quotes, and more."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Add a Custom Keyboard Target to Your App",
          "anchor": "3570250"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The Custom Keyboard Extension template provides a starting point for you to build your keyboard extension. Xcode configures your project to build the extension and includes it in your app’s bundle."
            }
          ]
        },
        {
          "type": "orderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Open your app project in Xcode."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Choose File > New > Target."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Select Custom Keyboard Extension from the Application Extension group."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Click Next."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Specify the name of your extension and configure the language and other options."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Click Finish."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3570733",
              "metadata": {
                "anchor": "3570733",
                "title": "Figure 1"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Make sure the Display Name field in the General tab of your keyboard target accurately describes your keyboard. The Settings app uses this value in the list of third-party keyboards."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3570265",
              "metadata": {
                "anchor": "3570265",
                "title": "Figure 2"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If you support multiple languages that require different keyboard layout or functionality, repeat the steps above to add additional custom keyboard targets for each language. Set the "
            },
            {
              "type": "codeVoice",
              "code": "PrimaryLanguage"
            },
            {
              "type": "text",
              "text": " value accordingly in each of the target’s "
            },
            {
              "type": "codeVoice",
              "code": "Info.plist"
            },
            {
              "type": "text",
              "text": " files."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Configure Information Property List Options",
          "anchor": "3570248"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If applicable to your custom keyboard, edit the keyboard extension’s "
            },
            {
              "type": "codeVoice",
              "code": "Info.plist"
            },
            {
              "type": "text",
              "text": " to configure the following options:"
            }
          ]
        },
        {
          "type": "table",
          "header": "none",
          "rows": [
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "strong",
                      "inlineContent": [
                        {
                          "type": "text",
                          "text": "IsASCIICapable"
                        }
                      ]
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Set this to "
                    },
                    {
                      "type": "reference",
                      "isActive": false,
                      "identifier": "doc://com.apple.documentation/documentation/objectivec/yes"
                    },
                    {
                      "type": "text",
                      "text": " if your keyboard is capable of generating standard ASCII characters."
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "strong",
                      "inlineContent": [
                        {
                          "type": "text",
                          "text": "PrefersRightToLeft"
                        }
                      ]
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "If your keyboard primarily supports right to left languages, or if the insertion cursor should default to the right when editing in a text field, set this to "
                    },
                    {
                      "type": "reference",
                      "isActive": false,
                      "identifier": "doc://com.apple.documentation/documentation/objectivec/yes"
                    },
                    {
                      "type": "text",
                      "text": "."
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "strong",
                      "inlineContent": [
                        {
                          "type": "text",
                          "text": "PrimaryLanguage"
                        }
                      ]
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Set this to a string representing the primary language your keyboard supports. Use a two-character code like "
                    },
                    {
                      "type": "codeVoice",
                      "code": "nl"
                    },
                    {
                      "type": "text",
                      "text": " for Dutch, or language and country code such as "
                    },
                    {
                      "type": "codeVoice",
                      "code": "nl-BE"
                    },
                    {
                      "type": "text",
                      "text": " for Dutch in Belgium. The Settings app displays the primary language in the list of keyboards."
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "strong",
                      "inlineContent": [
                        {
                          "type": "text",
                          "text": "RequestsOpenAccess"
                        }
                      ]
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Set this to "
                    },
                    {
                      "type": "reference",
                      "isActive": false,
                      "identifier": "doc://com.apple.documentation/documentation/objectivec/yes"
                    },
                    {
                      "type": "text",
                      "text": " if your keyboard needs access to network resources, to write to a shared group container, or other capabilities. For more information, see "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/configuring_open_access_for_a_custom_keyboard"
                    },
                    {
                      "type": "text",
                      "text": "."
                    }
                  ]
                }
              ]
            ]
          ],
          "metadata": {
            "anchor": "3570253",
            "title": "Table 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Set these keys in the NSExtension > NSExtensionAttributes dictionary of the "
            },
            {
              "type": "codeVoice",
              "code": "Info.plist"
            },
            {
              "type": "text",
              "text": " file:"
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3570266",
              "metadata": {
                "anchor": "3570266",
                "title": "Figure 3"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Add Your Custom User Interface",
          "anchor": "3570258"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When the user activates your keyboard, it replaces the system keyboard. Your custom keyboard extension’s principal class provides the view that is displayed. By default, Xcode’s custom keyboard template configures a class named "
            },
            {
              "type": "codeVoice",
              "code": "KeyboardViewController"
            },
            {
              "type": "text",
              "text": " as the principal class. This controller’s view is where you define your user interface. "
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "For design guidance, see "
                },
                {
                  "type": "link",
                  "title": "Human Interface Guidelines > Custom Keyboards",
                  "destination": "https://developer.apple.com/design/human-interface-guidelines/ios/extensions/custom-keyboards/"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            }
          ],
          "style": "tip"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When designing your keyboard’s user interface, incorporate a button to switch keyboards. The system keyboard uses a button with a globe icon as shown in "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "link-media-3570257"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3570257",
              "metadata": {
                "anchor": "3570257",
                "title": "Figure 4"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Use UIInputViewController’s "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiinputviewcontroller/2875741-needsinputmodeswitchkey"
            },
            {
              "type": "text",
              "text": " property to determine if you should display a button to switch keyboards. If the user has only one keyboard enabled, there’s no need to show a keyboard switching interface. On iPhones with Face ID, iOS automatically shows the globe icon below your keyboard view and sets this property to "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/objectivec/yes"
            },
            {
              "type": "text",
              "text": ", indicating that you shouldn’t show your button."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Configure your keyboard switching button with an action targeting the "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiinputviewcontroller/1649584-handleinputmodelistfromview"
            },
            {
              "type": "text",
              "text": " method of your input view controller subclass. The default custom keyboard template does this by adding an action to the button:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "nextKeyboardButton.addTarget(self, action: #selector(handleInputModeList(from:with:)), for: .allTouchEvents)"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3570261",
            "title": "Listing 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Using "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uicontrolevents/uicontroleventalltouchevents"
            },
            {
              "type": "text",
              "text": " allows the system to automatically show the keyboard list picker when the user long presses the button."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3570259",
              "metadata": {
                "anchor": "3570259",
                "title": "Figure 5"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Your keyboard should also be flexible with the layout because the width of the keyboard can vary, even while it’s currently on screen. All keyboards should support both compact and regular widths and allow for transitioning between the two. Test your keyboard in portrait and landscape orientations, and on iPadOS be sure to test your keyboard in a floating view."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3571051",
              "metadata": {
                "anchor": "3571051",
                "title": "Figure 6"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For more details, see "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/configuring_a_custom_keyboard_interface"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Handle Text Interactions",
          "anchor": "3570264"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Custom keyboards run in an isolated process that doesn’t have direct access to the text input view. "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiinputviewcontroller"
            },
            {
              "type": "text",
              "text": " provides a "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiinputviewcontroller/1618193-textdocumentproxy"
            },
            {
              "type": "text",
              "text": " property allowing your keyboard to access the text input view. You use this proxy to get the selected text, insert or delete text, manipulate the text insertion position, and get surrounding textual context in order to support things like autocorrect or autocomplete."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "// Insert a string into the text input view.",
            "textDocumentProxy.insertText(\"Hello world.\")",
            "",
            "// Get the currently selected text",
            "let selectedText = textDocumentProxy.selectedText"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3570260",
            "title": "Listing 2"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For more information, see "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/keyboards_and_input/creating_a_custom_keyboard/handling_text_interactions_in_custom_keyboards"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Debug Your Custom Keyboard",
          "anchor": "3570262"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Debugging a custom keyboard is similar to debugging any app extension. Xcode prompts you to choose a host app to launch, then you begin editing text in that host app in order to invoke your custom keyboard. The host app can be any app available in the run destination, including your app that contains the keyboard extension."
            }
          ]
        },
        {
          "type": "orderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Select the build scheme for your keyboard extension target and a run destination (simulator or device). "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Select Product > Run to begin your debugging session. "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Xcode prompts you to select a host app. Choose an app that allows text input, like Notes. Xcode builds and installs your app with its keyboard extension, then launches the app you selected. "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "After the host app launches, begin editing a text field. The most recently used keyboard is shown."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Touch and hold the globe button to display the list of available keyboards. Choose your app’s keyboard."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "iOS launches your keyboard extension in its own process, and Xcode attaches a debugging session to it. You can now set breakpoints and perform normal debugging tasks in your extension code. "
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "If your keyboard isn’t available in the list of active keyboards, you have to enable it. In Settings, navigate to General > Keyboard > Keyboards and select Add New Keyboard. Choose your keyboard(s) from the list of third-party keyboards."
                }
              ]
            }
          ],
          "style": "important"
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Limit Memory Usage",
          "anchor": "3570263"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Your custom keyboard code executes in a separate process, and that process has a limit on the amount of memory it may use. If your keyboard extension exceeds the memory limit the system terminates it. Here are some tips for managing memory efficiently:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Test your keyboard on various device models. The memory limits vary from model to model. "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Be sure to handle low memory notifications. Release any resources that aren’t strictly necessary. "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Keep in mind that dismissing the keyboard won’t necessarily terminate the keyboard extension process. Don’t assume the system releases memory your keyboard is using when it is no longer visible on screen."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For more information on crash logs related to memory usage limits, see "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/xcode/diagnosing-issues-using-crash-reports-and-device-logs"
            },
            {
              "type": "text",
              "text": " and "
            },
            {
              "type": "codeVoice",
              "code": "EXC_CRASH (SIGQUIT)"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}