{
  "abstract": [
    {
      "type": "text",
      "text": "Overridden to update the change count with reference to a change-count token passed in by UIKit."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/uikit",
        "doc://com.apple.documentation/documentation/uikit/documents_data_and_pasteboard",
        "doc://com.apple.documentation/documentation/uikit/uidocument"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/uikit/uidocument/1619975-updatechangecountwithtoken",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1619975,
  "kind": "symbol",
  "metadata": {
    "title": "updateChangeCountWithToken:forSaveOperation:",
    "role": "symbol",
    "roleHeading": "Instance Method",
    "modules": [
      {
        "name": "UIKit"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "5.0",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "5.0",
        "current": "15.2"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "15.2"
      }
    ],
    "externalID": "c:objc(cs)UIDocument(im)updateChangeCountWithToken:forSaveOperation:",
    "parent": {
      "title": "UIDocument"
    },
    "symbolKind": "instm"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/uikit/uidocument/1619975-updatechangecountwithtoken"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/uikit/uidocument/1619975-updatechangecount"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/uikit": {
      "title": "UIKit",
      "identifier": "doc://com.apple.documentation/documentation/uikit",
      "url": "/documentation/uikit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/uikit/documents_data_and_pasteboard": {
      "title": "Documents, Data, and Pasteboard",
      "identifier": "doc://com.apple.documentation/documentation/uikit/documents_data_and_pasteboard",
      "url": "/documentation/uikit/documents_data_and_pasteboard",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/uikit/uidocument": {
      "title": "UIDocument",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uidocument",
      "abstract": [
        {
          "type": "text",
          "text": "An abstract base class for managing discrete portions of your app's data. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uidocument/1619954-changecounttokenforsaveoperation": {
      "title": "changeCountTokenForSaveOperation:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619954-changecounttokenforsaveoperation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uidocument/1619954-changecounttokenforsaveoperation",
      "abstract": [
        {
          "type": "text",
          "text": "Overridden to return a change token for a specific save operation."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "changeCountTokenForSaveOperation:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uidocumentsaveoperation": {
      "title": "UIDocumentSaveOperation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uidocumentsaveoperation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uidocumentsaveoperation"
    },
    "doc://com.apple.documentation/documentation/foundation/nsundomanager": {
      "title": "NSUndoManager",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsundomanager",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsundomanager"
    },
    "doc://com.apple.documentation/documentation/uikit/uidocument/1619953-undomanager": {
      "title": "undoManager",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619953-undomanager",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uidocument/1619953-undomanager",
      "abstract": [
        {
          "type": "text",
          "text": "The undo manager for the document."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uidocument/1619961-updatechangecount": {
      "title": "updateChangeCount:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619961-updatechangecount",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uidocument/1619961-updatechangecount",
      "abstract": [
        {
          "type": "text",
          "text": "Update the change counter by indicating the kind of change."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "updateChangeCount:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uidocument/1619965-hasunsavedchanges": {
      "title": "hasUnsavedChanges",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619965-hasunsavedchanges",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uidocument/1619965-hasunsavedchanges",
      "abstract": [
        {
          "type": "text",
          "text": "Returns whether the document has any unsaved changes."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uidocument/1619988-savetourl": {
      "title": "saveToURL:forSaveOperation:completionHandler:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619988-savetourl",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uidocument/1619988-savetourl",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "saveToURL:forSaveOperation:completionHandler:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uidocument/1619975-updatechangecountwithtoken": {
      "title": "updateChangeCountWithToken:forSaveOperation:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619975-updatechangecountwithtoken",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uidocument/1619975-updatechangecountwithtoken",
      "abstract": [
        {
          "type": "text",
          "text": "Overridden to update the change count with reference to a change-count token passed in by UIKit."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "updateChangeCountWithToken:forSaveOperation:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uidocument/1619981-autosavewithcompletionhandler": {
      "title": "autosaveWithCompletionHandler:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619981-autosavewithcompletionhandler",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uidocument/1619981-autosavewithcompletionhandler",
      "abstract": [
        {
          "type": "text",
          "text": "Called by UIKit to initiate automatic saving of documents with unsaved changes."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "autosaveWithCompletionHandler:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/uikit/uidocument/1619965-hasunsavedchanges",
        "doc://com.apple.documentation/documentation/uikit/uidocument/1619961-updatechangecount",
        "doc://com.apple.documentation/documentation/uikit/uidocument/1619953-undomanager",
        "doc://com.apple.documentation/documentation/uikit/uidocument/1619954-changecounttokenforsaveoperation",
        "doc://com.apple.documentation/documentation/uikit/uidocument/1619981-autosavewithcompletionhandler"
      ],
      "title": "Tracking Changes and Autosaving",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "text",
              "text": "- ("
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "identifier",
              "text": "updateChangeCountWithToken:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "keyword",
              "text": "id"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "changeCountToken"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "forSaveOperation:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@UIDocumentSaveOperation",
              "identifier": "doc://com.apple.documentation/documentation/uikit/uidocumentsaveoperation",
              "text": "UIDocumentSaveOperation"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "saveOperation"
            },
            {
              "kind": "text",
              "text": ";"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "Mac Catalyst"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "changeCountToken",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "An object to use as a change-count token. "
                },
                {
                  "type": "codeVoice",
                  "code": "UIDocument"
                },
                {
                  "type": "text",
                  "text": " obtained this token earlier by calling "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619954-changecounttokenforsaveoperation"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            }
          ]
        },
        {
          "name": "saveOperation",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A constant that indicates whether the save operation is writing a new file or overwriting an existing one. See "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/uikit/uidocumentsaveoperation"
                },
                {
                  "type": "text",
                  "text": " for descriptions of these constants."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To get autosaving capabilities for your documents, you must implement change tracking. Typically you do this by using an "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsundomanager"
            },
            {
              "type": "text",
              "text": " object (assigned to "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619953-undomanager"
            },
            {
              "type": "text",
              "text": " property) to register changes or by calling the  "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619961-updatechangecount"
            },
            {
              "type": "text",
              "text": " method every time the user makes a change; UIKit then automatically determines whether there are unsaved changes and returns the proper value from "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619965-hasunsavedchanges"
            },
            {
              "type": "text",
              "text": ". If you take neither of these approaches (and you want the autosaving feature), you must implement this method as well as "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619954-changecounttokenforsaveoperation"
            },
            {
              "type": "text",
              "text": " and "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619965-hasunsavedchanges"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You implement the "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619954-changecounttokenforsaveoperation"
            },
            {
              "type": "text",
              "text": " method to return a change-count token that UIKit uses to encapsulate the history of document changes for a particular save operation. The token can be any object that represents the current change state of the document. This method is called at the start of the default implementation of the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619988-savetourl"
            },
            {
              "type": "text",
              "text": " method. At the end of this default implementation, "
            },
            {
              "type": "codeVoice",
              "code": "UIDocument"
            },
            {
              "type": "text",
              "text": " calls this method ("
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619975-updatechangecountwithtoken"
            },
            {
              "type": "text",
              "text": "), passing in the change-count token. You implement this method to compare the token with the one returned earlier; by doing so, you can determine if the document has acquired new unsaved changes between the start and end of an asynchronous write operation. You can then return the proper value from your override of "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uidocument/1619965-hasunsavedchanges"
            },
            {
              "type": "text",
              "text": ". "
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}