{
  "abstract": [
    {
      "type": "text",
      "text": "Decodes an image synchronously and provides a new one for display in views and animations."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/uikit",
        "doc://com.apple.documentation/documentation/uikit/images_and_pdf",
        "doc://com.apple.documentation/documentation/uikit/uiimage"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/uikit/uiimage/3750834-imagebypreparingfordisplay",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 3750834,
  "kind": "symbol",
  "metadata": {
    "title": "imageByPreparingForDisplay",
    "role": "symbol",
    "roleHeading": "Instance Method",
    "modules": [
      {
        "name": "UIKit"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "15.0",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "15.0",
        "current": "15.2"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "15.0",
        "current": "15.2"
      },
      {
        "name": "tvOS",
        "introducedAt": "15.0",
        "current": "15.2"
      }
    ],
    "externalID": "c:objc(cs)UIImage(im)imageByPreparingForDisplay",
    "parent": {
      "title": "UIImage"
    },
    "symbolKind": "instm"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/uikit/uiimage/3750834-imagebypreparingfordisplay"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/uikit/uiimage/3750834-preparingfordisplay"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/uikit": {
      "title": "UIKit",
      "identifier": "doc://com.apple.documentation/documentation/uikit",
      "url": "/documentation/uikit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/uikit/images_and_pdf": {
      "title": "Images and PDF",
      "identifier": "doc://com.apple.documentation/documentation/uikit/images_and_pdf",
      "url": "/documentation/uikit/images_and_pdf",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/uikit/uiimage": {
      "title": "UIImage",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiimage",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiimage"
    },
    "link-3807530": {
      "title": "instrument",
      "type": "topic",
      "identifier": "link-3807530",
      "kind": "article",
      "role": "link",
      "url": "https://help.apple.com/instruments/mac/current/"
    },
    "doc://com.apple.documentation/documentation/uikit/uiimage/3750844-preparefordisplaywithcompletionh": {
      "title": "prepareForDisplayWithCompletionHandler:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiimage/3750844-preparefordisplaywithcompletionh",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiimage/3750844-preparefordisplaywithcompletionh",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "prepareForDisplayWithCompletionHandler:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uiimageview/1621069-image": {
      "title": "image",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiimageview/1621069-image",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiimageview/1621069-image"
    },
    "doc://com.apple.documentation/documentation/uikit/uiimageview": {
      "title": "UIImageView",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiimageview",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiimageview"
    },
    "doc://com.apple.documentation/documentation/coreimage/ciimage": {
      "title": "CIImage",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/ciimage",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreimage/ciimage"
    },
    "doc://com.apple.documentation/documentation/uikit/uiimage/3750834-imagebypreparingfordisplay#3782907": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiimage/3750834-imagebypreparingfordisplay#3782907",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/uikit/uiimage/3750834-imagebypreparingfordisplay#3782907"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "text",
              "text": "- ("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)UIImage",
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiimage",
              "text": "UIImage"
            },
            {
              "kind": "text",
              "text": " *"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "identifier",
              "text": "imageByPreparingForDisplay"
            },
            {
              "kind": "text",
              "text": ";"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "Mac Catalyst",
            "tvOS"
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A new version of the image object for display. If the system can’t decode the image, this method returns "
            },
            {
              "type": "codeVoice",
              "code": "nil"
            },
            {
              "type": "text",
              "text": ". "
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The Animation Hitches "
            },
            {
              "type": "link",
              "title": "instrument",
              "destination": "https://help.apple.com/instruments/mac/current/"
            },
            {
              "type": "text",
              "text": " measures system performance for multiple stages of preparing views for display. It can show you the exact cause of an animation hitch, which appears to the user as an interruption or jump in an animation that should be smooth. If Animation Hitches indicates that decoding an image takes too long and causes hitches, use this method to move the decoding work to the background."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Avoid using this method on the main thread unless you previously started preparing an image with "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiimage/3750844-preparefordisplaywithcompletionh"
            },
            {
              "type": "text",
              "text": ". If you’re decoding many images, such as with a collection view, calling this method from a concurrent queue can degrade performance by demanding too many system threads. Use a serial queue instead."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This method returns a new image object for efficient display by an image view. Assign the image object created by this method to the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiimageview/1621069-image"
            },
            {
              "type": "text",
              "text": " property of the image view. If "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiimageview"
            },
            {
              "type": "text",
              "text": " can render the image without decoding, this method returns a valid image without further processing. If the system can’t decode the image, such as an image created from a "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreimage/ciimage"
            },
            {
              "type": "text",
              "text": ", the method returns "
            },
            {
              "type": "codeVoice",
              "code": "nil"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "UIKit doesn’t associate the prepared image with the original, or with any related variants from an asset catalog. If your app environment dynamically changes display traits, listen for changes in the trait environment and prepare new images when the environment changes."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "override func collectionView(_ collectionView: UICollectionView, willDisplay cell: UICollectionViewCell, forItemAt indexPath: IndexPath) {",
            "    guard let imageCell = cell as? ImageCell else {",
            "        fatalError(\"Expected `\\(ImageCell.self)` type for reuseIdentifier \\(reuseIdentifier). Check the configuration in Main.storyboard.\")",
            "    }",
            "    let item = models[indexPath.item]",
            "    if let image = preparedImageCache.object(forKey: item.id) {",
            "        // Use a cached prepared image.",
            "        imageCell.imageView.image = image",
            "    } else {",
            "        // If the data source didn't prefetch the cell, prepare the image on a serial dispatch queue.",
            "        serialQueue.async { [weak preparedImageCache, placeholderImage] in",
            "            item.loadAsset()",
            "            let preparedImage: UIImage = item.image.preparingForDisplay() ?? placeholderImage",
            "            preparedImageCache?.setObject(preparedImage, forKey: item.id)",
            "            DispatchQueue.main.async {",
            "                imageCell.imageView.image = preparedImage",
            "            }",
            "        }",
            "    }",
            "}"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3782907",
            "title": "Listing 1"
          }
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}