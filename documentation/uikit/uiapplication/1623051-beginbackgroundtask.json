{
  "abstract": [
    {
      "type": "text",
      "text": "Mark the start of a task that should continue if the app enters the background."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/uikit",
        "doc://com.apple.documentation/documentation/uikit/app_and_environment",
        "doc://com.apple.documentation/documentation/uikit/uiapplication"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/uikit/uiapplication/1623051-beginbackgroundtask",
    "interfaceLanguage": "swift"
  },
  "legacy_identifier": 1623051,
  "kind": "symbol",
  "metadata": {
    "title": "beginBackgroundTask(withName:expirationHandler:)",
    "role": "symbol",
    "roleHeading": "Instance Method",
    "modules": [
      {
        "name": "UIKit"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "7.0",
        "current": "14.3"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "14.3"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "current": "14.3"
      }
    ],
    "externalID": "c:objc(cs)UIApplication(im)beginBackgroundTaskWithName:expirationHandler:",
    "symbolKind": "instm",
    "fragments": [
      {
        "kind": "text",
        "text": "func "
      },
      {
        "kind": "identifier",
        "text": "beginBackgroundTask"
      },
      {
        "kind": "text",
        "text": "("
      },
      {
        "kind": "identifier",
        "text": "withName"
      },
      {
        "kind": "text",
        "text": ": String?, "
      },
      {
        "kind": "identifier",
        "text": "expirationHandler"
      },
      {
        "kind": "text",
        "text": ": (() -> Void)?) -> UIBackgroundTaskIdentifier"
      }
    ]
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/uikit/uiapplication/1623051-beginbackgroundtaskwithname"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/uikit/uiapplication/1623051-beginbackgroundtask"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/uikit": {
      "title": "UIKit",
      "identifier": "doc://com.apple.documentation/documentation/uikit",
      "url": "/documentation/uikit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/uikit/app_and_environment": {
      "title": "App and Environment",
      "identifier": "doc://com.apple.documentation/documentation/uikit/app_and_environment",
      "url": "/documentation/uikit/app_and_environment",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/uikit/uiapplication": {
      "title": "UIApplication",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplication",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiapplication",
      "abstract": [
        {
          "type": "text",
          "text": "The centralized point of control and coordination for apps running in iOS. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uiapplication/1622970-endbackgroundtask": {
      "title": "endBackgroundTask(_:)",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplication/1622970-endbackgroundtask",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiapplication/1622970-endbackgroundtask",
      "abstract": [
        {
          "type": "text",
          "text": "Marks the end of a specific long-running background task."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "endBackgroundTask"
        },
        {
          "kind": "text",
          "text": "(UIBackgroundTaskIdentifier)"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uibackgroundtaskidentifier/1622983-invalid": {
      "title": "invalid",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uibackgroundtaskidentifier/1622983-invalid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uibackgroundtaskidentifier/1622983-invalid"
    },
    "doc://com.apple.documentation/documentation/backgroundtasks": {
      "title": "Background Tasks",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/backgroundtasks",
      "kind": "article",
      "role": "collection",
      "url": "/documentation/backgroundtasks",
      "abstract": [
        {
          "type": "text",
          "text": "Request the system to launch your app in the background to run tasks."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uiapplicationdelegate/1622997-applicationdidenterbackground": {
      "title": "applicationDidEnterBackground(_:)",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplicationdelegate/1622997-applicationdidenterbackground",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiapplicationdelegate/1622997-applicationdidenterbackground"
    },
    "doc://com.apple.documentation/documentation/uikit/uiapplication/1623029-backgroundtimeremaining": {
      "title": "backgroundTimeRemaining",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplication/1623029-backgroundtimeremaining",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiapplication/1623029-backgroundtimeremaining",
      "abstract": [
        {
          "type": "text",
          "text": "The maximum amount of  time remaining for the app to run in the background."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "var "
        },
        {
          "kind": "identifier",
          "text": "backgroundTimeRemaining"
        },
        {
          "kind": "text",
          "text": ": TimeInterval"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/processinfo/1617030-performexpiringactivity": {
      "title": "performExpiringActivity(withReason:using:)",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/processinfo/1617030-performexpiringactivity",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/processinfo/1617030-performexpiringactivity"
    },
    "doc://com.apple.documentation/documentation/foundation/processinfo": {
      "title": "ProcessInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/processinfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/processinfo"
    },
    "doc://com.apple.documentation/documentation/swift/string": {
      "title": "String",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/swift/string",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/swift/string"
    },
    "doc://com.apple.documentation/documentation/swift/void": {
      "title": "Void",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/swift/void",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/swift/void"
    },
    "doc://com.apple.documentation/documentation/uikit/uibackgroundtaskidentifier": {
      "title": "UIBackgroundTaskIdentifier",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uibackgroundtaskidentifier",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uibackgroundtaskidentifier",
      "abstract": [
        {
          "type": "text",
          "text": "A unique token that identifies a request to run in the background."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "struct "
        },
        {
          "kind": "identifier",
          "text": "UIBackgroundTaskIdentifier"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uiapplication/1622994-backgroundrefreshstatus": {
      "title": "backgroundRefreshStatus",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplication/1622994-backgroundrefreshstatus",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiapplication/1622994-backgroundrefreshstatus",
      "abstract": [
        {
          "type": "text",
          "text": "Indicates whether the app can refresh content when running in the background."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "var "
        },
        {
          "kind": "identifier",
          "text": "backgroundRefreshStatus"
        },
        {
          "kind": "text",
          "text": ": UIBackgroundRefreshStatus"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uibackgroundrefreshstatus": {
      "title": "UIBackgroundRefreshStatus",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uibackgroundrefreshstatus",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uibackgroundrefreshstatus",
      "abstract": [
        {
          "type": "text",
          "text": "Constants indicating whether background execution is enabled for the app."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "enum "
        },
        {
          "kind": "identifier",
          "text": "UIBackgroundRefreshStatus"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uiapplication/1623085-backgroundrefreshstatusdidchange": {
      "title": "backgroundRefreshStatusDidChangeNotification",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplication/1623085-backgroundrefreshstatusdidchange",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiapplication/1623085-backgroundrefreshstatusdidchange",
      "abstract": [
        {
          "type": "text",
          "text": "Posted when the app’s status for downloading content in the background changes."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "class let "
        },
        {
          "kind": "identifier",
          "text": "backgroundRefreshStatusDidChangeNotification"
        },
        {
          "kind": "text",
          "text": ": NSNotification.Name"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uiapplication/1623051-beginbackgroundtask": {
      "title": "beginBackgroundTask(withName:expirationHandler:)",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplication/1623051-beginbackgroundtask",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiapplication/1623051-beginbackgroundtask",
      "abstract": [
        {
          "type": "text",
          "text": "Mark the start of a task that should continue if the app enters the background."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "beginBackgroundTask"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "withName"
        },
        {
          "kind": "text",
          "text": ": String?, "
        },
        {
          "kind": "identifier",
          "text": "expirationHandler"
        },
        {
          "kind": "text",
          "text": ": (() -> Void)?) -> UIBackgroundTaskIdentifier"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uiapplication/1623031-beginbackgroundtask": {
      "title": "beginBackgroundTask(expirationHandler:)",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplication/1623031-beginbackgroundtask",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiapplication/1623031-beginbackgroundtask",
      "abstract": [
        {
          "type": "text",
          "text": "Mark the start of a task that should continue if the app enters the background."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "beginBackgroundTask"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "expirationHandler"
        },
        {
          "kind": "text",
          "text": ": (() -> Void)?) -> UIBackgroundTaskIdentifier"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/uikit/uiapplication/1622994-backgroundrefreshstatus",
        "doc://com.apple.documentation/documentation/uikit/uibackgroundrefreshstatus",
        "doc://com.apple.documentation/documentation/uikit/uiapplication/1623085-backgroundrefreshstatusdidchange",
        "doc://com.apple.documentation/documentation/uikit/uiapplication/1623031-beginbackgroundtask",
        "doc://com.apple.documentation/documentation/uikit/uiapplication/1622970-endbackgroundtask",
        "doc://com.apple.documentation/documentation/uikit/uibackgroundtaskidentifier",
        "doc://com.apple.documentation/documentation/uikit/uiapplication/1623029-backgroundtimeremaining"
      ],
      "title": "Managing Background Execution",
      "generated": true
    },
    {
      "title": "Related Documentation",
      "generated": false,
      "identifiers": [
        "doc://com.apple.documentation/documentation/backgroundtasks"
      ]
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "swift"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "func"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "beginBackgroundTask"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "externalParam",
              "text": "withName"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "internalParam",
              "text": "taskName"
            },
            {
              "kind": "text",
              "text": ": "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "s:SS",
              "identifier": "doc://com.apple.documentation/documentation/swift/string",
              "text": "String"
            },
            {
              "kind": "text",
              "text": "?"
            },
            {
              "kind": "text",
              "text": ", "
            },
            {
              "kind": "externalParam",
              "text": "expirationHandler"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "internalParam",
              "text": "handler"
            },
            {
              "kind": "text",
              "text": ": "
            },
            {
              "kind": "text",
              "text": "(() -> "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "s:s4Voida",
              "identifier": "doc://com.apple.documentation/documentation/swift/void",
              "text": "Void"
            },
            {
              "kind": "text",
              "text": ")?"
            },
            {
              "kind": "text",
              "text": " = nil"
            },
            {
              "kind": "text",
              "text": ") -> "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@UIBackgroundTaskIdentifier",
              "identifier": "doc://com.apple.documentation/documentation/uikit/uibackgroundtaskidentifier",
              "text": "UIBackgroundTaskIdentifier"
            }
          ],
          "platforms": [
            "iOS",
            "Mac Catalyst",
            "tvOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "swift"
      ],
      "parameters": [
        {
          "name": "taskName",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The name to display in the debugger when viewing the background task. If you specify "
                },
                {
                  "type": "codeVoice",
                  "code": "nil"
                },
                {
                  "type": "text",
                  "text": " for this parameter, this method generates a name based on the name of the calling function or method."
                }
              ]
            }
          ]
        },
        {
          "name": "handler",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A handler to be called shortly before the app’s remaining background time reaches 0. Use this handler to clean up and mark the end of the background task. Failure to end the task explicitly will result in the termination of the app. The system calls the handler synchronously on the main thread, blocking the app’s suspension momentarily."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A unique identifier for the new background task. You must pass this value to the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplication/1622970-endbackgroundtask"
            },
            {
              "type": "text",
              "text": " method to mark the end of this task. This method returns "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uibackgroundtaskidentifier/1622983-invalid"
            },
            {
              "type": "text",
              "text": " if running in the background is not possible."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This method requests additional background execution time for your app. Call this method when leaving a task unfinished might be detrimental to your app’s user experience. For example, call this method before writing data to a file to prevent the system from suspending your app while the operation is in progress. For background tasks requiring more time use "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/backgroundtasks"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Call this method as early as possible before starting your task, and preferably before your app actually enters the background. The method requests the task assertion for your app asynchronously. If you call this method shortly before your app is due to be suspended, there is a chance that the system might suspend your app before that task assertion is granted. For example, do not call this method at the end of your "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplicationdelegate/1622997-applicationdidenterbackground"
            },
            {
              "type": "text",
              "text": " method and expect your app to continue running. If the system is unable to grant the task assertion, it calls your expiration handler. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Each call to this method must be balanced by a matching call to the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplication/1622970-endbackgroundtask"
            },
            {
              "type": "text",
              "text": " method. Apps running background tasks have a finite amount of time in which to run them. (You can find out the maximum background time available using the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplication/1623029-backgroundtimeremaining"
            },
            {
              "type": "text",
              "text": " property.) If you do not call "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplication/1622970-endbackgroundtask"
            },
            {
              "type": "text",
              "text": " for each task before time expires, the system kills the app. If you provide a block object in the handler parameter, the system calls your handler before time expires to give you a chance to end the task."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You can call this method at any point in your app’s execution. You may also call this method multiple times to mark the beginning of several background tasks that run in parallel. However, each task must be ended separately. You identify a given task using the value returned by this method."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This method can be safely called on a non-main thread. To extend the execution time of an app extension, use the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/foundation/processinfo/1617030-performexpiringactivity"
            },
            {
              "type": "text",
              "text": " method of "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/foundation/processinfo"
            },
            {
              "type": "text",
              "text": " instead."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}