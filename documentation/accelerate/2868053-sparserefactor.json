{
  "abstract": [
    {
      "type": "text",
      "text": "Computes a factorization of the specified single-precision matrix using an existing factorization’s storage."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/accelerate",
        "doc://com.apple.documentation/documentation/accelerate/sparse_solvers",
        "doc://com.apple.documentation/documentation/accelerate/sparse_solvers/sparse_refactor_functions"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/accelerate/2868053-sparserefactor",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 2868053,
  "kind": "symbol",
  "metadata": {
    "title": "SparseRefactor",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Accelerate"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "11.0",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "11.0",
        "current": "15.2"
      },
      {
        "name": "macOS",
        "introducedAt": "10.13",
        "current": "12.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "15.2"
      },
      {
        "name": "tvOS",
        "introducedAt": "11.0",
        "current": "15.2"
      },
      {
        "name": "watchOS",
        "introducedAt": "4.0",
        "current": "8.3"
      }
    ],
    "externalID": "c:@F@SparseRefactor#$@SA@SparseMatrix_Float#*$@SA@SparseOpaqueFactorization_Float#",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/accelerate/2868053-sparserefactor"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/accelerate/2868053-sparserefactor"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/accelerate": {
      "title": "Accelerate",
      "identifier": "doc://com.apple.documentation/documentation/accelerate",
      "url": "/documentation/accelerate",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/accelerate/sparse_solvers": {
      "title": "Sparse Solvers",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/sparse_solvers",
      "url": "/documentation/accelerate/sparse_solvers",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/accelerate/sparse_solvers/sparse_refactor_functions": {
      "title": "Sparse Refactor Functions",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/sparse_solvers/sparse_refactor_functions",
      "url": "/documentation/accelerate/sparse_solvers/sparse_refactor_functions",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/accelerate/2868245-sparsefactor": {
      "title": "SparseFactor",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/2868245-sparsefactor",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/2868245-sparsefactor"
    },
    "link-media-3703914": {
      "identifier": "link-media-3703914",
      "type": "link",
      "title": "Figure 1",
      "url": "/documentation/accelerate/2868053-sparserefactor#3703914"
    },
    "media-3703914": {
      "identifier": "media-3703914",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 403,
            "height": 171
          },
          "url": "https://docs-assets.developer.apple.com/published/fccc35fb2c/rendered2x-1606992651.png"
        }
      ],
      "alt": "A mathematical equation that has two stacked sets of three simultaneous equations on the left. Each equation has three unknowns. The same sets of simultaneous equations appear on the right as two matrix equations, A x equals B. Each matrix equation consists of a three-by-three matrix multiplied by a three-element column matrix that equals a three-element column matrix.",
      "title": "Figure 1"
    },
    "doc://com.apple.documentation/documentation/accelerate/2868053-sparserefactor#3703057": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/2868053-sparserefactor#3703057",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/accelerate/2868053-sparserefactor#3703057"
    },
    "doc://com.apple.documentation/documentation/accelerate/sparsematrix_float": {
      "title": "SparseMatrix_Float",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/sparsematrix_float",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/sparsematrix_float"
    },
    "doc://com.apple.documentation/documentation/accelerate/sparseopaquefactorization_float": {
      "title": "SparseOpaqueFactorization_Float",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/sparseopaquefactorization_float",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/sparseopaquefactorization_float"
    },
    "doc://com.apple.documentation/documentation/accelerate/2865545-sparserefactor": {
      "title": "SparseRefactor",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/2865545-sparserefactor",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/2865545-sparserefactor",
      "abstract": [
        {
          "type": "text",
          "text": "Computes a factorization of the specified double-precision matrix using an existing factorization’s storage."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/2868053-sparserefactor": {
      "title": "SparseRefactor",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/2868053-sparserefactor",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/2868053-sparserefactor",
      "abstract": [
        {
          "type": "text",
          "text": "Computes a factorization of the specified single-precision matrix using an existing factorization’s storage."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/2868252-sparserefactor": {
      "title": "SparseRefactor",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/2868252-sparserefactor",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/2868252-sparserefactor",
      "abstract": [
        {
          "type": "text",
          "text": "Computes a factorization of the specified double-precision matrix using an existing factorization’s storage and specified options."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/2868168-sparserefactor": {
      "title": "SparseRefactor",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/2868168-sparserefactor",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/2868168-sparserefactor",
      "abstract": [
        {
          "type": "text",
          "text": "Computes a factorization of the specified single-precision matrix using an existing factorization’s storage and specified options."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/accelerate/2865545-sparserefactor",
        "doc://com.apple.documentation/documentation/accelerate/2868252-sparserefactor",
        "doc://com.apple.documentation/documentation/accelerate/2868168-sparserefactor"
      ],
      "title": "Matrix Refactorization Functions",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "SparseRefactor"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@SparseMatrix_Float",
              "identifier": "doc://com.apple.documentation/documentation/accelerate/sparsematrix_float",
              "text": "SparseMatrix_Float"
            },
            {
              "kind": "text",
              "text": " Matrix, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@SparseOpaqueFactorization_Float",
              "identifier": "doc://com.apple.documentation/documentation/accelerate/sparseopaquefactorization_float",
              "text": "SparseOpaqueFactorization_Float"
            },
            {
              "kind": "text",
              "text": " *Factorization);"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "Matrix",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The matrix that contains numerical data to recompute."
                }
              ]
            }
          ]
        },
        {
          "name": "Factorization",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On input, the factorization to recompute. On output, the recomputed result."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Use this function to calculate the factorization of a sparse matrix to pass to the direct solve functions using an existing factorization’s storage. The specified matrix must have the same sparsity structure as the matrix of the original factorization."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This function provides behavior similar to "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/accelerate/2868245-sparsefactor"
            },
            {
              "type": "text",
              "text": " by reusing explicit storage that you supply to "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/accelerate/2868245-sparsefactor"
            },
            {
              "type": "text",
              "text": " as the argument "
            },
            {
              "type": "codeVoice",
              "code": "factorStorage"
            },
            {
              "type": "text",
              "text": ". However, in addition to providing a simplified call sequence, this call can also reuse any additional storage that you allocate to accommodate delayed pivots."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The following figure shows two systems of equations where the coefficient matrix is sparse:"
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3703914",
              "metadata": {
                "anchor": "3703914",
                "title": "Figure 1"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The following code solves these two systems with refactoring. After factorizing and solving for the coefficient matrix "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A0"
                }
              ]
            },
            {
              "type": "text",
              "text": ", the code refactors and solves for matrix "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A1"
                }
              ]
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "/// Define the sparsity structure of matrices `A0` and `A1`.",
            "let rowIndices: [Int32] =    [ 0, 1, 1, 2]",
            "let columnIndices: [Int32] = [ 2, 0, 2, 1]",
            "",
            "/// Create the single-precision coefficient matrix _A0_.",
            "let a0Values: [Float] = [10, 20, 5, 50]",
            "let A0 = SparseConvertFromCoordinate(3, 3,",
            "                                     4, 1,",
            "                                     SparseAttributes_t(),",
            "                                     rowIndices, columnIndices,",
            "                                     a0Values)",
            "",
            "/// Factorize _A0_.",
            "var factorization = SparseFactor(SparseFactorizationQR, A0)",
            "",
            "/// Solve _A0 · x = b0_ in place.",
            "var b0Values: [Float] = [30, 35, 100]",
            "b0Values.withUnsafeMutableBufferPointer { bPtr in",
            "    let xb = DenseVector_Float(count: 3,",
            "                               data: bPtr.baseAddress!)",
            "    ",
            "    SparseSolve(factorization, xb)",
            "}",
            "",
            "/// Create the single-precision coefficient matrix _A1_.",
            "let a1Values: [Float] = [5, 10, 2.5, 25]",
            "let A1 = SparseConvertFromCoordinate(3, 3,",
            "                                     4, 1,",
            "                                     SparseAttributes_t(),",
            "                                     rowIndices, columnIndices,",
            "                                     a1Values)",
            "",
            "/// Factorize _A1_ into the existing factorization.",
            "SparseRefactor(A1, &factorization)",
            "",
            "/// Solve _A1 · x = b1_ in place.",
            "var b1Values: [Float] = [60, 70, 200]",
            "b1Values.withUnsafeMutableBufferPointer { bPtr in",
            "    let xb = DenseVector_Float(count: 3,",
            "                                data: bPtr.baseAddress!)",
            "    ",
            "    SparseSolve(factorization, xb)",
            "}",
            "",
            "SparseCleanup(A0)",
            "SparseCleanup(A1)",
            "SparseCleanup(factorization)"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3703057",
            "title": "Listing 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "On return, "
            },
            {
              "type": "codeVoice",
              "code": "b0Values"
            },
            {
              "type": "text",
              "text": " contains the values "
            },
            {
              "type": "codeVoice",
              "code": "[1.0, 2.0, 3.0]"
            },
            {
              "type": "text",
              "text": ", and "
            },
            {
              "type": "codeVoice",
              "code": "b1Values"
            },
            {
              "type": "text",
              "text": " contains the values "
            },
            {
              "type": "codeVoice",
              "code": "[4.0, 8.0, 12.0]"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "type": "paragraph",
          "inlineContent": []
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}