{
  "abstract": [
    {
      "type": "text",
      "text": "Enhance and adjust the contrast of an image with histogram equalization and contrast stretching."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/accelerate"
      ],
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/accelerate",
        "doc://com.apple.documentation/documentation/accelerate/vimage"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 3701603,
  "kind": "article",
  "metadata": {
    "title": "Enhancing Image Contrast with Histogram Manipulation ",
    "role": "article",
    "roleHeading": "Article",
    "modules": [
      {
        "name": "Accelerate"
      }
    ]
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation",
        "documentation/accelerate/vimage/enhancing_image_contrast_with_histogram_manipulation"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation",
        "documentation/accelerate/vimage/enhancing_image_contrast_with_histogram_manipulation"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/accelerate": {
      "title": "Accelerate",
      "identifier": "doc://com.apple.documentation/documentation/accelerate",
      "url": "/documentation/accelerate",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage": {
      "title": "vImage",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage",
      "url": "/documentation/accelerate/vimage",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/accelerate/1546860-vimageequalization_argb8888": {
      "title": "vImageEqualization_ARGB8888",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546860-vimageequalization_argb8888",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1546860-vimageequalization_argb8888",
      "abstract": [
        {
          "type": "text",
          "text": "Equalizes the histogram of an ARGB8888 source image."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3701701": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3701701",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3701701"
    },
    "link-media-3702119": {
      "identifier": "link-media-3702119",
      "type": "link",
      "title": "Figure 2",
      "url": "/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3702119"
    },
    "media-3702119": {
      "identifier": "media-3702119",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 680,
            "height": 200
          },
          "url": "https://docs-assets.developer.apple.com/published/db8a114e1e/rendered2x-1605866840.png"
        }
      ],
      "alt": "Two side-by-side images show a very high-contrast photograph of a landscape and a chart that represents the photograph’s histogram. The vertical peaks in the chart are unevenly distributed across the length of the chart. The continous line that represents the cumulative histogram follows the diagonal line from the bottom left to the top right of the chart.",
      "title": "Figure 2"
    },
    "doc://com.apple.documentation/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3701702": {
      "title": "Listing 2",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3701702",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3701702"
    },
    "link-media-3702118": {
      "identifier": "link-media-3702118",
      "type": "link",
      "title": "Figure 3",
      "url": "/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3702118"
    },
    "media-3702118": {
      "identifier": "media-3702118",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 680,
            "height": 200
          },
          "url": "https://docs-assets.developer.apple.com/published/44b99c70ba/rendered2x-1605866834.png"
        }
      ],
      "alt": "Two side-by-side images show a high-contrast photograph of a landscape and a chart that represents the photograph’s histogram. The vertical peaks in the chart are evenly distributed across the length of the chart. The continous line that represents the cumulative histogram rises where the histogram values are high and is flat where the histogram values are low. ",
      "title": "Figure 3"
    },
    "link-media-3723432": {
      "identifier": "link-media-3723432",
      "type": "link",
      "title": "Figure 4",
      "url": "/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3723432"
    },
    "media-3723432": {
      "identifier": "media-3723432",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 680,
            "height": 269
          },
          "url": "https://docs-assets.developer.apple.com/published/cf77418ca2/rendered2x-1610703291.png"
        }
      ],
      "alt": "Two stacked graphics represent histograms before and after applying ends-in contrast stretching. The original histogram that’s displayed in the top graphic is split 25% - 50% - 25%. The transformed original histogram that’s displayed in the bottom graphic contains the middle 50% of the original  but stretched to its full width.",
      "title": "Figure 4"
    },
    "doc://com.apple.documentation/documentation/accelerate/1545003-vimageendsincontraststretch_argb": {
      "title": "vImageEndsInContrastStretch_ARGB8888",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1545003-vimageendsincontraststretch_argb",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1545003-vimageendsincontraststretch_argb",
      "abstract": [
        {
          "type": "text",
          "text": "Performs an ends-in contrast stretch operation on an ARGB8888 source image."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3702121": {
      "title": "Listing 3",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3702121",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3702121"
    },
    "link-media-3702115": {
      "identifier": "link-media-3702115",
      "type": "link",
      "title": "Figure 5",
      "url": "/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3702115"
    },
    "media-3702115": {
      "identifier": "media-3702115",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 680,
            "height": 200
          },
          "url": "https://docs-assets.developer.apple.com/published/e22c391cb5/rendered2x-1605866816.png"
        }
      ],
      "alt": "Two side-by-side images show a dark photograph of a landscape and a chart that represents the photograph’s histogram. The vertical peaks in the chart are clustered at the left side of the chart. The continous line that represents the cumulative histogram rises rapidly and flattens out where the histogram values are low.",
      "title": "Figure 5"
    },
    "doc://com.apple.documentation/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3702120": {
      "title": "Listing 4",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3702120",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3702120"
    },
    "link-media-3702116": {
      "identifier": "link-media-3702116",
      "type": "link",
      "title": "Figure 6",
      "url": "/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3702116"
    },
    "media-3702116": {
      "identifier": "media-3702116",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 680,
            "height": 200
          },
          "url": "https://docs-assets.developer.apple.com/published/3caf93bc64/rendered2x-1605866822.png"
        }
      ],
      "alt": "Two side-by-side images show a bright photograph of a landscape and a chart that represents the photograph’s histogram. The vertical peaks in the chart are clustered at the right side of the chart. The continous line that represents the cumulative histogram is mostly flat and rises where the histogram values are high.",
      "title": "Figure 6"
    },
    "link-media-3702117": {
      "identifier": "link-media-3702117",
      "type": "link",
      "title": "Figure 1",
      "url": "/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation#3702117"
    },
    "media-3702117": {
      "identifier": "media-3702117",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 680,
            "height": 200
          },
          "url": "https://docs-assets.developer.apple.com/published/b107254288/rendered2x-1605866828.png"
        }
      ],
      "alt": "Two side-by-side images show a low-contrast photograph of a landscape and a chart that represents the photograph’s histogram. The vertical peaks in the chart are clustered around the horizontal center. The continous line that represents the cumulative histogram is flat at either side and sloped in the center.",
      "title": "Figure 1"
    },
    "doc://com.apple.documentation/documentation/accelerate/specifying_histograms_with_vimage": {
      "title": "Specifying Histograms with vImage",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/specifying_histograms_with_vimage",
      "kind": "article",
      "role": "sampleCode",
      "url": "/documentation/accelerate/specifying_histograms_with_vimage",
      "abstract": [
        {
          "type": "text",
          "text": "Calculate the histogram of one image and apply it to a second image."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1546811-vimagecontraststretch_argb8888": {
      "title": "vImageContrastStretch_ARGB8888",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546811-vimagecontraststretch_argb8888",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1546811-vimagecontraststretch_argb8888",
      "abstract": [
        {
          "type": "text",
          "text": "Stretches the contrast of an  ARGB8888 source image."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/adjusting_the_brightness_and_contrast_of_an_image": {
      "title": "Adjusting the Brightness and Contrast of an Image",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/adjusting_the_brightness_and_contrast_of_an_image",
      "kind": "article",
      "role": "sampleCode",
      "url": "/documentation/accelerate/adjusting_the_brightness_and_contrast_of_an_image",
      "abstract": [
        {
          "type": "text",
          "text": "Use a gamma function to apply a linear or exponential curve."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/applying_tone_curve_adjustments_to_images": {
      "title": "Applying Tone Curve Adjustments to Images",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/applying_tone_curve_adjustments_to_images",
      "kind": "article",
      "role": "sampleCode",
      "url": "/documentation/accelerate/applying_tone_curve_adjustments_to_images",
      "abstract": [
        {
          "type": "text",
          "text": "Use the vImage library’s polynomial transform to apply tone curve adjustments to images."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation": {
      "title": "Enhancing Image Contrast with Histogram Manipulation ",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation",
      "kind": "article",
      "role": "article",
      "url": "/documentation/accelerate/enhancing_image_contrast_with_histogram_manipulation",
      "abstract": [
        {
          "type": "text",
          "text": "Enhance and adjust the contrast of an image with histogram equalization and contrast stretching."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/transform": {
      "title": "Transform",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/transform",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/accelerate/transform",
      "abstract": [
        {
          "type": "text",
          "text": "Apply color transformations to images. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/histogram": {
      "title": "Histogram",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/histogram",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/accelerate/histogram",
      "abstract": [
        {
          "type": "text",
          "text": "Calculate or manipulate an image's histogram."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/accelerate/adjusting_the_brightness_and_contrast_of_an_image",
        "doc://com.apple.documentation/documentation/accelerate/applying_tone_curve_adjustments_to_images",
        "doc://com.apple.documentation/documentation/accelerate/specifying_histograms_with_vimage",
        "doc://com.apple.documentation/documentation/accelerate/transform",
        "doc://com.apple.documentation/documentation/accelerate/histogram"
      ],
      "title": "Color and Tone Adjustment",
      "generated": true
    },
    {
      "title": "Related Documentation",
      "generated": false,
      "identifiers": [
        "doc://com.apple.documentation/documentation/accelerate/1546860-vimageequalization_argb8888",
        "doc://com.apple.documentation/documentation/accelerate/1546811-vimagecontraststretch_argb8888",
        "doc://com.apple.documentation/documentation/accelerate/1545003-vimageendsincontraststretch_argb"
      ]
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "An image histogram is a representation of an image that describes its color tones distribution. The histogram contains a series of bins that represent the possible values for each color channel. For example, each channel of an 8-bit image contains 256 histogram bins. Each bin contains the image’s pixel count of the corresponding value."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The histogram of the following low-contrast image shows that almost all of its pixel values are clustered around the mid values. There are no pixels on the left side — corresponding to low values — indicating the image doesn’t contain any very dark colors. Similarly, there are no pixels on the right side — corresponding to high values — indicating the images doesn’t contain any very bright colors. The thin, gray line shows the cumulative histogram, that is, a running sum of pixel counts at each intensity."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3702117",
              "metadata": {
                "anchor": "3702117",
                "title": "Figure 1"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "vImage provides functions that can either equalize or stretch an image’s histogram to enhance the contrast of an image."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Apply Histogram Equalization to an Image",
          "anchor": "3701608"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Histogram equalization transforms an image so that its histogram is more uniformly distributed across the entire range of values. The operation stretches dense parts of the histogram, where contrast is low, and condenses sparse parts of the histogram, where contrast is high. A truly uniform histogram is one in which each histogram bin contains the same value, that is, its cumulative histogram is a diagonal line. The vImage histogram equalization functions approximate that truly uniform histogram."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Given two buffers, "
            },
            {
              "type": "codeVoice",
              "code": "sourceBuffer"
            },
            {
              "type": "text",
              "text": ", with alpha as its first channel, and "
            },
            {
              "type": "codeVoice",
              "code": "destinationBuffer"
            },
            {
              "type": "text",
              "text": ", the following code calls "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/accelerate/1546860-vimageequalization_argb8888"
            },
            {
              "type": "text",
              "text": " to perform histogram equalization:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "vImageEqualization_ARGB8888(&sourceBuffer,",
            "                            &destinationBuffer,",
            "                            vImage_Flags(kvImageLeaveAlphaUnchanged))"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3701701",
            "title": "Listing 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "On return, "
            },
            {
              "type": "codeVoice",
              "code": "destinationBuffer"
            },
            {
              "type": "text",
              "text": " contains the transformed image. The picture below shows the low-contrast image after histogram equalization. The operation distributed the nonzero histogram bins across the entire range of values, and the result has a lot more contrast. The cumulative histogram is nearly a straight diagonal line, indicating an almost uniform distribution of values."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3702119",
              "metadata": {
                "anchor": "3702119",
                "title": "Figure 2"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Note that the histogram bins aren’t evenly distributed throughout the resulting histogram. The amount of stretching correlates to the number of pixels in each bin."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Apply Contrast Stretching to an Image",
          "anchor": "3701609"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Contrast stretching evenly distributes a histogram’s pixel values across the full range of available pixel values. This technique is ideal for enhancing the contrast of an image with pixel values concentrated in one area of the intensity spectrum, such as the such as the original low-contrast image above."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Given two buffers, "
            },
            {
              "type": "codeVoice",
              "code": "sourceBuffer"
            },
            {
              "type": "text",
              "text": ", with alpha as its first channel, and "
            },
            {
              "type": "codeVoice",
              "code": "destinationBuffer"
            },
            {
              "type": "text",
              "text": ", the following code calls "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/accelerate/1546860-vimageequalization_argb8888"
            },
            {
              "type": "text",
              "text": " to perform contrast stretching:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "vImageContrastStretch_ARGB8888(&sourceBuffer,",
            "                               &destinationBuffer,",
            "                               vImage_Flags(kvImageLeaveAlphaUnchanged))"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3701702",
            "title": "Listing 2"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "On return, "
            },
            {
              "type": "codeVoice",
              "code": "destinationBuffer"
            },
            {
              "type": "text",
              "text": " contains the transformed image. The picture below shows the low-contrast image after histogram stretching. The result has a lot more contrast, and its histogram shows that values are evenly distributed throughout the entire range. The shape of the contrast stretched image’s cumulative histogram is very similar to the original image’s cumulative histogram."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3702118",
              "metadata": {
                "anchor": "3702118",
                "title": "Figure 3"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Apply Ends-In Contrast Stretching to an Image",
          "anchor": "3701605"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The vImage ends-in contrast stretching functions accept parameters that allow you to control which part of the histogram the operation stretches. Use ends-in contrast stretching for images with the majority of their pixels clustered in a single area and a small number of pixels at either end of their histogram. In these situations, standard contrast stretching may not yield your desired result."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The following figure illustrates how ends-in contrast stretching discards elements from a histogram and stretches the remaining values. The operation maps the 25% low values and 25% high values to 0 and 255 (for a 8-bit image), respectively. The transform result contains the central 50% of the source histogram stretched to fill the remaining 254 bins."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3723432",
              "metadata": {
                "anchor": "3723432",
                "title": "Figure 4"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Note that this illustration isn’t to scale; the operation uses percentages based on the number of pixels for each intensity."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Set the "
            },
            {
              "type": "codeVoice",
              "code": "percent_low"
            },
            {
              "type": "text",
              "text": " parameter of the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/accelerate/1545003-vimageendsincontraststretch_argb"
            },
            {
              "type": "text",
              "text": " function to define the percentage of pixels that the operation maps to the lowest end of the transformed image’s histogram. The following code performs ends-in contrast stretching with "
            },
            {
              "type": "codeVoice",
              "code": "percent_low"
            },
            {
              "type": "text",
              "text": " set to 25% for the red, green, and blue channels:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "vImageEndsInContrastStretch_ARGB8888(&sourceBuffer,",
            "                                     &destinationBuffer,",
            "                                     [0, 25, 25, 25],",
            "                                     [0, 0, 0, 0],",
            "                                     vImage_Flags(kvImageLeaveAlphaUnchanged))"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3702121",
            "title": "Listing 3"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "On return, "
            },
            {
              "type": "codeVoice",
              "code": "destinationBuffer"
            },
            {
              "type": "text",
              "text": " contains the transformed image. The picture below shows the low-contrast image after ends-in contrast stretching. This result is much darker overall with the histogram shifted to the left."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3702115",
              "metadata": {
                "anchor": "3702115",
                "title": "Figure 5"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Set the "
            },
            {
              "type": "codeVoice",
              "code": "percent_high"
            },
            {
              "type": "text",
              "text": " parameter of the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/accelerate/1545003-vimageendsincontraststretch_argb"
            },
            {
              "type": "text",
              "text": " function to define the percentage of pixels that the operation maps to the high end of the transformed image’s histogram. The following code performs ends-in contrast stretching with "
            },
            {
              "type": "codeVoice",
              "code": "percent_high"
            },
            {
              "type": "text",
              "text": " set to 25% for the red, green, and blue channels: "
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "vImageEndsInContrastStretch_ARGB8888(&sourceBuffer,",
            "                                     &destinationBuffer,",
            "                                     [0, 0, 0, 0],",
            "                                     [0, 25, 25, 25],",
            "                                     vImage_Flags(kvImageLeaveAlphaUnchanged))"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3702120",
            "title": "Listing 4"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "On return, "
            },
            {
              "type": "codeVoice",
              "code": "destinationBuffer"
            },
            {
              "type": "text",
              "text": " contains the transformed image. The picture below shows the low-contrast image after ends-in contrast stretching. This result is much brighter overall with the histogram shifted to the right."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3702116",
              "metadata": {
                "anchor": "3702116",
                "title": "Figure 6"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": []
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}