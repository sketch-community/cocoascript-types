{
  "abstract": [
    {
      "type": "text",
      "text": "Dilate and erode images. "
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/accelerate"
      ],
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/accelerate",
        "doc://com.apple.documentation/documentation/accelerate/vimage",
        "doc://com.apple.documentation/documentation/accelerate/vimage/vimage_operations"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/accelerate/morphology",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1652546,
  "kind": "symbol",
  "metadata": {
    "title": "Morphology",
    "role": "collectionGroup",
    "modules": [
      {
        "name": "Accelerate"
      }
    ]
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/accelerate/morphology",
        "documentation/accelerate/vimage/vimage_operations/morphology"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/accelerate/morphology",
        "documentation/accelerate/vimage/vimage_operations/morphology"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/accelerate": {
      "title": "Accelerate",
      "identifier": "doc://com.apple.documentation/documentation/accelerate",
      "url": "/documentation/accelerate",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage": {
      "title": "vImage",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage",
      "url": "/documentation/accelerate/vimage",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage/vimage_operations": {
      "title": "vImage Operations",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage/vimage_operations",
      "url": "/documentation/accelerate/vimage/vimage_operations",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "devLink-1719678": {
      "identifier": "devLink-1719678",
      "type": "link",
      "title": "vImage Programming Guide",
      "url": "https://developer.apple.com/library/archive/documentation/Performance/Conceptual/vImage/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001001"
    },
    "doc://com.apple.documentation/documentation/accelerate/1545570-vimagedilate_argbffff": {
      "title": "vImageDilate_ARGBFFFF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1545570-vimagedilate_argbffff",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1545570-vimagedilate_argbffff",
      "abstract": [
        {
          "type": "text",
          "text": "Dilates a region of interest within an ARGBFFFF source image using an M x N kernel."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1545760-vimagedilate_argb8888": {
      "title": "vImageDilate_ARGB8888",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1545760-vimagedilate_argb8888",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1545760-vimagedilate_argb8888",
      "abstract": [
        {
          "type": "text",
          "text": "Dilates a region of interest within an ARGB8888 source image using an M x N kernel. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1547004-vimagedilate_planarf": {
      "title": "vImageDilate_PlanarF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1547004-vimagedilate_planarf",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1547004-vimagedilate_planarf",
      "abstract": [
        {
          "type": "text",
          "text": "Dilates a region of interest within a PlanarF source image using an M x N kernel. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1545869-vimagedilate_planar8": {
      "title": "vImageDilate_Planar8",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1545869-vimagedilate_planar8",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1545869-vimagedilate_planar8",
      "abstract": [
        {
          "type": "text",
          "text": "Dilates a region of interest within a Planar8 source image using an M x N kernel. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1546484-vimageerode_argbffff": {
      "title": "vImageErode_ARGBFFFF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546484-vimageerode_argbffff",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1546484-vimageerode_argbffff",
      "abstract": [
        {
          "type": "text",
          "text": "Erodes a region of interest within an ARGBFFFF  source image using an M x N kernel. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1546816-vimageerode_argb8888": {
      "title": "vImageErode_ARGB8888",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546816-vimageerode_argb8888",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1546816-vimageerode_argb8888",
      "abstract": [
        {
          "type": "text",
          "text": "Erodes a region of interest within an ARGB8888 source image using an M x N kernel. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1546818-vimageerode_planarf": {
      "title": "vImageErode_PlanarF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546818-vimageerode_planarf",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1546818-vimageerode_planarf",
      "abstract": [
        {
          "type": "text",
          "text": "Erodes a region of interest within a PlanarF source image using an M x N kernel. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1545856-vimageerode_planar8": {
      "title": "vImageErode_Planar8",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1545856-vimageerode_planar8",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1545856-vimageerode_planar8",
      "abstract": [
        {
          "type": "text",
          "text": "Erodes a region of interest within a Planar8 source image using an M x N kernel. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1545640-vimagemax_argbffff": {
      "title": "vImageMax_ARGBFFFF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1545640-vimagemax_argbffff",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1545640-vimagemax_argbffff",
      "abstract": [
        {
          "type": "text",
          "text": "Maximizes a region of interest within an ARGBFFFF source image using an M x N kernel. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1546943-vimagemax_argb8888": {
      "title": "vImageMax_ARGB8888",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546943-vimagemax_argb8888",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1546943-vimagemax_argb8888",
      "abstract": [
        {
          "type": "text",
          "text": "Maximizes a region of interest within an ARGB8888 source image using an M x N kernel.  "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1546665-vimagemax_planarf": {
      "title": "vImageMax_PlanarF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546665-vimagemax_planarf",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1546665-vimagemax_planarf",
      "abstract": [
        {
          "type": "text",
          "text": "Maximizes with a region of interest within a PlanarF source image using an M x N kernel."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1544630-vimagemax_planar8": {
      "title": "vImageMax_Planar8",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1544630-vimagemax_planar8",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1544630-vimagemax_planar8",
      "abstract": [
        {
          "type": "text",
          "text": "Maximizes  a region of interest within a Planar8 source image using an M x N kernel. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1545797-vimagemin_argbffff": {
      "title": "vImageMin_ARGBFFFF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1545797-vimagemin_argbffff",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1545797-vimagemin_argbffff",
      "abstract": [
        {
          "type": "text",
          "text": "Minimizes a region of interest within an ARGBFFFF source image using an M x N kernel.  "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1546276-vimagemin_argb8888": {
      "title": "vImageMin_ARGB8888",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546276-vimagemin_argb8888",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1546276-vimagemin_argb8888",
      "abstract": [
        {
          "type": "text",
          "text": "Minimizes a region of interest within an ARGB8888 source image using an M x N kernel.  "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1545440-vimagemin_planarf": {
      "title": "vImageMin_PlanarF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1545440-vimagemin_planarf",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1545440-vimagemin_planarf",
      "abstract": [
        {
          "type": "text",
          "text": "Minimizes a region of interest within a PlanarF source image using an M x N kernel. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1544288-vimagemin_planar8": {
      "title": "vImageMin_Planar8",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1544288-vimagemin_planar8",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1544288-vimagemin_planar8",
      "abstract": [
        {
          "type": "text",
          "text": "Minimizes a region of interest within a Planar8 source image using an M x N kernel. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/morphology/1807043-vimagegetminimumtempbuffersizefo": {
      "title": "vImageGetMinimumTempBufferSizeForMinMax",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/morphology/1807043-vimagegetminimumtempbuffersizefo",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "url": "/documentation/accelerate/morphology/1807043-vimagegetminimumtempbuffersizefo",
      "abstract": [
        {
          "type": "text",
          "text": "Returns the minimum size, in bytes, for the temporary buffer that the caller supplies to any of the Min or Max morphological functions."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/blurring_an_image": {
      "title": "Blurring an Image",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/blurring_an_image",
      "kind": "article",
      "role": "sampleCode",
      "url": "/documentation/accelerate/blurring_an_image",
      "abstract": [
        {
          "type": "text",
          "text": "Filter an image by convolving it with custom and high-speed kernels."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/adding_a_bokeh_effect": {
      "title": "Adding a Bokeh Effect",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/adding_a_bokeh_effect",
      "kind": "article",
      "role": "sampleCode",
      "url": "/documentation/accelerate/adding_a_bokeh_effect",
      "abstract": [
        {
          "type": "text",
          "text": "Simulate a bokeh effect by applying dilation."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/convolution": {
      "title": "Convolution",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/convolution",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/accelerate/convolution",
      "abstract": [
        {
          "type": "text",
          "text": "Apply a convolution kernel to an image. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/morphology": {
      "title": "Morphology",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/morphology",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/accelerate/morphology",
      "abstract": [
        {
          "type": "text",
          "text": "Dilate and erode images. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "topicSections": [
    {
      "kind": "taskGroup",
      "title": "Dilating an Object",
      "identifiers": [
        "doc://com.apple.documentation/documentation/accelerate/1545570-vimagedilate_argbffff",
        "doc://com.apple.documentation/documentation/accelerate/1545760-vimagedilate_argb8888",
        "doc://com.apple.documentation/documentation/accelerate/1547004-vimagedilate_planarf",
        "doc://com.apple.documentation/documentation/accelerate/1545869-vimagedilate_planar8"
      ],
      "anchor": "1681408"
    },
    {
      "kind": "taskGroup",
      "title": "Eroding an Object",
      "identifiers": [
        "doc://com.apple.documentation/documentation/accelerate/1546484-vimageerode_argbffff",
        "doc://com.apple.documentation/documentation/accelerate/1546816-vimageerode_argb8888",
        "doc://com.apple.documentation/documentation/accelerate/1546818-vimageerode_planarf",
        "doc://com.apple.documentation/documentation/accelerate/1545856-vimageerode_planar8"
      ],
      "anchor": "1681450"
    },
    {
      "kind": "taskGroup",
      "title": "Maximizing an Object",
      "identifiers": [
        "doc://com.apple.documentation/documentation/accelerate/1545640-vimagemax_argbffff",
        "doc://com.apple.documentation/documentation/accelerate/1546943-vimagemax_argb8888",
        "doc://com.apple.documentation/documentation/accelerate/1546665-vimagemax_planarf",
        "doc://com.apple.documentation/documentation/accelerate/1544630-vimagemax_planar8"
      ],
      "anchor": "1681474"
    },
    {
      "kind": "taskGroup",
      "title": "Minimizing an Object",
      "identifiers": [
        "doc://com.apple.documentation/documentation/accelerate/1545797-vimagemin_argbffff",
        "doc://com.apple.documentation/documentation/accelerate/1546276-vimagemin_argb8888",
        "doc://com.apple.documentation/documentation/accelerate/1545440-vimagemin_planarf",
        "doc://com.apple.documentation/documentation/accelerate/1544288-vimagemin_planar8"
      ],
      "anchor": "1681499"
    },
    {
      "kind": "taskGroup",
      "title": "Getting the Buffer Size",
      "identifiers": [
        "doc://com.apple.documentation/documentation/accelerate/morphology/1807043-vimagegetminimumtempbuffersizefo"
      ],
      "anchor": "1652706"
    }
  ],
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/accelerate/blurring_an_image",
        "doc://com.apple.documentation/documentation/accelerate/adding_a_bokeh_effect",
        "doc://com.apple.documentation/documentation/accelerate/convolution"
      ],
      "title": "Convolution and Morphology",
      "generated": true
    },
    {
      "title": "Related Documentation",
      "generated": false,
      "identifiers": [
        "devLink-1719678"
      ]
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Morphological functions change the shape of an object by performing dilatation, erosion, maximum, and minimum operations. Dilation expands objects. Erosion contracts them. Maximum is a special case of dilation, while minimum is a special case of erosion. The precise nature of the expanding or shrinking is determined by a kernel (also known as a structure element) provided by the caller. The number of rows and number of columns  of the image does not change after applying a morphological operation."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You can use morphological functions on grayscale images, where the source image is planar (single-channel) or on full-color images. The kernel itself is always planar."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "vImage applies morphological operations to an "
            },
            {
              "type": "strong",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "object"
                }
              ]
            },
            {
              "type": "text",
              "text": ", which is not the same as the entire image. An object is either comprised of the brightest pixels in an image or the darkest pixels in the image, where brightness is defined relative to the particular image. When you define bright pixels as the object, dark pixels become the background. In this case dilation expands objects with erosion contracts them. When you define dark pixels as the object, bright pixels become the background. In this case, dilation contracts objects and erosion expands them."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Each morphological function requires that you pass it a convolution kernel that determines how the values of neighboring pixels are used to compute the value of a destination pixel. A kernel is a packed array, without padding at the ends of the rows. The elements of the array must be of type "
            },
            {
              "type": "codeVoice",
              "code": "uint8_t"
            },
            {
              "type": "text",
              "text": " (for the Planar8 and ARGB8888 formats) or of type "
            },
            {
              "type": "codeVoice",
              "code": "float"
            },
            {
              "type": "text",
              "text": " (for the PlanarF and ARGBFFFF formats). The height and the width of the array must both be odd numbers."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For example, a 3 x 3 convolution kernel for a Planar8 image consists of nine 8-bit (1-byte) values, arranged consecutively. The first three values represent the first row of the kernel, the next three values the second row, and the last three values the third row."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Morphology functions perform clipping to prevent overflow for the Planar8 and ARGB8888 formats. Saturated clipping maps all intensity levels above 255, to 255, all intensity levels below 0, to 0, and leaves intensity levels between 0 and 255, inclusive, unchanged."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When the pixel to be transformed is near the edge of the image—not merely the region of interest, but the entire image of which it is a part—the kernel may extend beyond the edge of the image, so that there are no existing pixels beneath some of the kernel  elements. In this case the morphology functions only make use of that part of the kernel which overlaps the source buffer. The other kernel elements are ignored."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}