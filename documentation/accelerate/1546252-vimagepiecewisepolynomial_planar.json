{
  "abstract": [
    {
      "type": "text",
      "text": "Applies a set of piecewise polynomials to transform an image in Planar8 format to an image in PlanarF format. "
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/accelerate",
        "doc://com.apple.documentation/documentation/accelerate/transform"
      ],
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/accelerate",
        "doc://com.apple.documentation/documentation/accelerate/vimage",
        "doc://com.apple.documentation/documentation/accelerate/vimage/vimage_operations",
        "doc://com.apple.documentation/documentation/accelerate/transform"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/accelerate/1546252-vimagepiecewisepolynomial_planar",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1546252,
  "kind": "symbol",
  "metadata": {
    "title": "vImagePiecewisePolynomial_Planar8toPlanarF",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Accelerate"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "5.0",
        "current": "14.3"
      },
      {
        "name": "macOS",
        "introducedAt": "10.4",
        "current": "11.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "14.3"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "current": "14.3"
      },
      {
        "name": "watchOS",
        "introducedAt": "2.0",
        "current": "7.2"
      }
    ],
    "externalID": "c:@F@vImagePiecewisePolynomial_Planar8toPlanarF",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/accelerate/1546252-vimagepiecewisepolynomial_planar"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/accelerate/1546252-vimagepiecewisepolynomial_planar"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/accelerate": {
      "title": "Accelerate",
      "identifier": "doc://com.apple.documentation/documentation/accelerate",
      "url": "/documentation/accelerate",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/accelerate/transform": {
      "title": "Transform",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/transform",
      "url": "/documentation/accelerate/transform",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage": {
      "title": "vImage",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage",
      "url": "/documentation/accelerate/vimage",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage/vimage_operations": {
      "title": "vImage Operations",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage/vimage_operations",
      "url": "/documentation/accelerate/vimage/vimage_operations",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/accelerate/1546252-vimagepiecewisepolynomial_planar#2557534": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546252-vimagepiecewisepolynomial_planar#2557534",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/accelerate/1546252-vimagepiecewisepolynomial_planar#2557534"
    },
    "doc://com.apple.documentation/documentation/accelerate/1578972-error_codes/kvimagenoerror": {
      "title": "kvImageNoError",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1578972-error_codes/kvimagenoerror",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1578972-error_codes/kvimagenoerror"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage/data_types_and_constants": {
      "title": "Data Types and Constants",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage/data_types_and_constants",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/accelerate/vimage/data_types_and_constants"
    },
    "doc://com.apple.documentation/documentation/accelerate/1578976-processing_flags/kvimagedonottile": {
      "title": "kvImageDoNotTile",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1578976-processing_flags/kvimagedonottile",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1578976-processing_flags/kvimagedonottile"
    },
    "doc://com.apple.documentation/documentation/accelerate/1546813-vimagepiecewisepolynomial_planar": {
      "title": "vImagePiecewisePolynomial_PlanarF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546813-vimagepiecewisepolynomial_planar",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1546813-vimagepiecewisepolynomial_planar",
      "abstract": [
        {
          "type": "text",
          "text": "Applies a set of piecewise polynomials to an image in PlanarF format."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage_error": {
      "title": "vImage_Error",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_error",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/vimage_error"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage_buffer": {
      "title": "vImage_Buffer",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_buffer",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/vimage_buffer"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage_flags": {
      "title": "vImage_Flags",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_flags",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/vimage_flags"
    },
    "doc://com.apple.documentation/documentation/accelerate/applying_tone_curve_adjustments_to_images": {
      "title": "Applying Tone Curve Adjustments to Images",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/applying_tone_curve_adjustments_to_images",
      "kind": "article",
      "role": "sampleCode",
      "url": "/documentation/accelerate/applying_tone_curve_adjustments_to_images",
      "abstract": [
        {
          "type": "text",
          "text": "Use the vImage libraryâ€™s polynomial transform to apply tone curve adjustments to images."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1546252-vimagepiecewisepolynomial_planar": {
      "title": "vImagePiecewisePolynomial_Planar8toPlanarF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546252-vimagepiecewisepolynomial_planar",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1546252-vimagepiecewisepolynomial_planar",
      "abstract": [
        {
          "type": "text",
          "text": "Applies a set of piecewise polynomials to transform an image in Planar8 format to an image in PlanarF format. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1546201-vimagepiecewisepolynomial_planar": {
      "title": "vImagePiecewisePolynomial_PlanarFtoPlanar8",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546201-vimagepiecewisepolynomial_planar",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1546201-vimagepiecewisepolynomial_planar",
      "abstract": [
        {
          "type": "text",
          "text": "Applies a set of piecewise polynomials to transform an image in PlanarF format to an image in Planar8 format."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1545831-vimagepiecewiserational_planarf": {
      "title": "vImagePiecewiseRational_PlanarF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1545831-vimagepiecewiserational_planarf",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1545831-vimagepiecewiserational_planarf",
      "abstract": [
        {
          "type": "text",
          "text": "Applies a piecewise rational expression to  an image in PlanarF format. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1544253-vimagesymmetricpiecewisepolynomi": {
      "title": "vImageSymmetricPiecewisePolynomial_PlanarF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1544253-vimagesymmetricpiecewisepolynomi",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1544253-vimagesymmetricpiecewisepolynomi",
      "abstract": [
        {
          "type": "text",
          "text": "Applies a set of symmetric piecewise polynomials to an image in PlanarF format."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/accelerate/applying_tone_curve_adjustments_to_images",
        "doc://com.apple.documentation/documentation/accelerate/1546813-vimagepiecewisepolynomial_planar",
        "doc://com.apple.documentation/documentation/accelerate/1546201-vimagepiecewisepolynomial_planar",
        "doc://com.apple.documentation/documentation/accelerate/1545831-vimagepiecewiserational_planarf",
        "doc://com.apple.documentation/documentation/accelerate/1544253-vimagesymmetricpiecewisepolynomi"
      ],
      "title": "Applying a Polynomial",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@vImage_Error",
              "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_error",
              "text": "vImage_Error"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "vImagePiecewisePolynomial_Planar8toPlanarF"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@vImage_Buffer",
              "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_buffer",
              "text": "vImage_Buffer"
            },
            {
              "kind": "text",
              "text": " *src, "
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@vImage_Buffer",
              "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_buffer",
              "text": "vImage_Buffer"
            },
            {
              "kind": "text",
              "text": " *dest, "
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "keyword",
              "text": "float"
            },
            {
              "kind": "text",
              "text": " **coefficients, "
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "keyword",
              "text": "float"
            },
            {
              "kind": "text",
              "text": " *boundaries, "
            },
            {
              "kind": "keyword",
              "text": "uint32_t"
            },
            {
              "kind": "text",
              "text": " order, "
            },
            {
              "kind": "keyword",
              "text": "uint32_t"
            },
            {
              "kind": "text",
              "text": " log2segments, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@vImage_Flags",
              "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_flags",
              "text": "vImage_Flags"
            },
            {
              "kind": "text",
              "text": " flags);"
            }
          ],
          "platforms": [
            "iOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "src",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer to a vImage buffer structure that contains the source image."
                }
              ]
            }
          ]
        },
        {
          "name": "dest",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer to a vImage buffer data structure. You're responsible for filling out the "
                },
                {
                  "type": "codeVoice",
                  "code": "height"
                },
                {
                  "type": "text",
                  "text": ", "
                },
                {
                  "type": "codeVoice",
                  "code": "width"
                },
                {
                  "type": "text",
                  "text": ", and "
                },
                {
                  "type": "codeVoice",
                  "code": "rowBytes"
                },
                {
                  "type": "text",
                  "text": " fields of this structure, and for allocating a data buffer of the appropriate size. On return, the data buffer this structure points to contains the destination image data. When you no longer need the data buffer, you must deallocate the memory"
                }
              ]
            }
          ]
        },
        {
          "name": "coefficients",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer to an array of polynomial coefficient arrays. Each polynomial coefficient array contains the coefficients for one polynomial. Note that a polynomial of order R has R+1 coefficients. All the polynomial coefficient arrays must be the same size, R+1, and in each array the coefficients must be ordered from the 0th-order term to the highest-order term."
                }
              ]
            }
          ]
        },
        {
          "name": "boundaries",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer to an array of boundary values, in increasing order, for separating adjacent ranges of pixel values. The first boundary value is the lowest in the range; input values lower than this are clipped to this value. The last boundary value is the highest in the range; input values higher than this are clipped to this value. The boundary values between the first and last separate the subranges from each other."
                }
              ]
            }
          ]
        },
        {
          "name": "log2segments",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The number of polynomials represented as a  base-2 logarithm. If you pass a non-integer power-of-two number of polynomials (for example, 5), you must round up to the next integer power of 2 (for the example of 5, that would be 8), and simply repeat the last polynomial the appropriate number of times."
                }
              ]
            }
          ]
        },
        {
          "name": "flags",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The options to use when performing the operation. If your code implements its own tiling or its own multithreading, pass "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/accelerate/1578976-processing_flags/kvimagedonottile"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/accelerate/1578972-error_codes/kvimagenoerror"
            },
            {
              "type": "text",
              "text": "; otherwise, one of the error codes described in "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage/data_types_and_constants"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You can approximate many different correction functions by carefully choosing the polynomials and the ranges of input values they operate on. The number of polynomials must be a non-negative integer power of 2."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Suppose that you want to use N polynomials of order R to process N contiguous ranges of pixel values. For each pixel in the image, the range of usable values is divided into segments by the values passed in the "
            },
            {
              "type": "codeVoice",
              "code": "boundaries"
            },
            {
              "type": "text",
              "text": " array. Each segment is processed by the corresponding polynomial. Since there are N polynomials, then there must be N segments, so you must supply N+1 boundaries."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You must order the boundaries  by increasing value. The ith segment is the set of pixel values that fall in the range:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "    boundary[i] <= value < boundary[i+1]"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "2557534",
            "title": "Listing 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "where i ranges from 0 to N. Values in this segment are processed by the i-th polynomial."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "From a performance standpoint, it costs much more to resolve additional polynomials than to work with higher-order polynomials. You typically achieve better performance with one 9th-order polynomial that covers the whole range of values you are interested in than with many lower-order polynomials covering the range piecewise."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This function uses single-precision floating-point arithmetic. As a result, polynomials with large high-order coefficients may cause significant rounding error."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}