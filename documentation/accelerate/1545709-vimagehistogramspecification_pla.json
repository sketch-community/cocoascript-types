{
  "abstract": [
    {
      "type": "text",
      "text": "Performs a histogram specification operation on a PlanarF source image."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/accelerate",
        "doc://com.apple.documentation/documentation/accelerate/histogram"
      ],
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/accelerate",
        "doc://com.apple.documentation/documentation/accelerate/vimage",
        "doc://com.apple.documentation/documentation/accelerate/vimage/vimage_operations",
        "doc://com.apple.documentation/documentation/accelerate/histogram"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/accelerate/1545709-vimagehistogramspecification_pla",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1545709,
  "kind": "symbol",
  "metadata": {
    "title": "vImageHistogramSpecification_PlanarF",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Accelerate"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "5.0",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "5.0",
        "current": "15.2"
      },
      {
        "name": "macOS",
        "introducedAt": "10.3",
        "current": "12.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "15.2"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "current": "15.2"
      },
      {
        "name": "watchOS",
        "introducedAt": "2.0",
        "current": "8.3"
      }
    ],
    "externalID": "c:@F@vImageHistogramSpecification_PlanarF",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/accelerate/1545709-vimagehistogramspecification_pla"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/accelerate/1545709-vimagehistogramspecification_pla"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/accelerate": {
      "title": "Accelerate",
      "identifier": "doc://com.apple.documentation/documentation/accelerate",
      "url": "/documentation/accelerate",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/accelerate/histogram": {
      "title": "Histogram",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/histogram",
      "url": "/documentation/accelerate/histogram",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage": {
      "title": "vImage",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage",
      "url": "/documentation/accelerate/vimage",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage/vimage_operations": {
      "title": "vImage Operations",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage/vimage_operations",
      "url": "/documentation/accelerate/vimage/vimage_operations",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/accelerate/1578972-error_codes/kvimagenoerror": {
      "title": "kvImageNoError",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1578972-error_codes/kvimagenoerror",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1578972-error_codes/kvimagenoerror"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage/data_types_and_constants": {
      "title": "Data Types and Constants",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage/data_types_and_constants",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/accelerate/vimage/data_types_and_constants"
    },
    "doc://com.apple.documentation/documentation/accelerate/1578976-processing_flags/kvimagedonottile": {
      "title": "kvImageDoNotTile",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1578976-processing_flags/kvimagedonottile",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1578976-processing_flags/kvimagedonottile"
    },
    "doc://com.apple.documentation/documentation/accelerate/1578976-processing_flags/kvimageleavealphaunchanged": {
      "title": "kvImageLeaveAlphaUnchanged",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1578976-processing_flags/kvimageleavealphaunchanged",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1578976-processing_flags/kvimageleavealphaunchanged"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage_error": {
      "title": "vImage_Error",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_error",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/vimage_error"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage_buffer": {
      "title": "vImage_Buffer",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_buffer",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/vimage_buffer"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimagepixelcount": {
      "title": "vImagePixelCount",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimagepixelcount",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/vimagepixelcount"
    },
    "doc://com.apple.documentation/documentation/accelerate/pixel_f": {
      "title": "Pixel_F",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/pixel_f",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/pixel_f"
    },
    "doc://com.apple.documentation/documentation/accelerate/vimage_flags": {
      "title": "vImage_Flags",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_flags",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/vimage_flags"
    },
    "doc://com.apple.documentation/documentation/accelerate/1546602-vimagehistogramspecification_arg": {
      "title": "vImageHistogramSpecification_ARGBFFFF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546602-vimagehistogramspecification_arg",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1546602-vimagehistogramspecification_arg",
      "abstract": [
        {
          "type": "text",
          "text": "Performs a histogram specification operation on an ARGBFFFF source image."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1546963-vimagehistogramspecification_arg": {
      "title": "vImageHistogramSpecification_ARGB8888",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1546963-vimagehistogramspecification_arg",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1546963-vimagehistogramspecification_arg",
      "abstract": [
        {
          "type": "text",
          "text": "Performs a histogram specification operation on an ARGB8888 source image."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1545709-vimagehistogramspecification_pla": {
      "title": "vImageHistogramSpecification_PlanarF",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1545709-vimagehistogramspecification_pla",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1545709-vimagehistogramspecification_pla",
      "abstract": [
        {
          "type": "text",
          "text": "Performs a histogram specification operation on a PlanarF source image."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/accelerate/1545851-vimagehistogramspecification_pla": {
      "title": "vImageHistogramSpecification_Planar8",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/accelerate/1545851-vimagehistogramspecification_pla",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/accelerate/1545851-vimagehistogramspecification_pla",
      "abstract": [
        {
          "type": "text",
          "text": "Performs a histogram specification operation on a Planar8 source image."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/accelerate/1546602-vimagehistogramspecification_arg",
        "doc://com.apple.documentation/documentation/accelerate/1546963-vimagehistogramspecification_arg",
        "doc://com.apple.documentation/documentation/accelerate/1545851-vimagehistogramspecification_pla"
      ],
      "title": "Specifying a Histogram",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@vImage_Error",
              "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_error",
              "text": "vImage_Error"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "vImageHistogramSpecification_PlanarF"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@vImage_Buffer",
              "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_buffer",
              "text": "vImage_Buffer"
            },
            {
              "kind": "text",
              "text": " *src, "
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@vImage_Buffer",
              "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_buffer",
              "text": "vImage_Buffer"
            },
            {
              "kind": "text",
              "text": " *dest, "
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": " *tempBuffer, "
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@vImagePixelCount",
              "identifier": "doc://com.apple.documentation/documentation/accelerate/vimagepixelcount",
              "text": "vImagePixelCount"
            },
            {
              "kind": "text",
              "text": " *desired_histogram, "
            },
            {
              "kind": "keyword",
              "text": "unsigned"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "keyword",
              "text": "int"
            },
            {
              "kind": "text",
              "text": " histogram_entries, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@Pixel_F",
              "identifier": "doc://com.apple.documentation/documentation/accelerate/pixel_f",
              "text": "Pixel_F"
            },
            {
              "kind": "text",
              "text": " minVal, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@Pixel_F",
              "identifier": "doc://com.apple.documentation/documentation/accelerate/pixel_f",
              "text": "Pixel_F"
            },
            {
              "kind": "text",
              "text": " maxVal, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@vImage_Flags",
              "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage_flags",
              "text": "vImage_Flags"
            },
            {
              "kind": "text",
              "text": " flags);"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "src",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer to a vImage buffer structure that contains  the source image."
                }
              ]
            }
          ]
        },
        {
          "name": "dest",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer to a vImage buffer data structure. You are responsible for filling out the "
                },
                {
                  "type": "codeVoice",
                  "code": "height"
                },
                {
                  "type": "text",
                  "text": ", "
                },
                {
                  "type": "codeVoice",
                  "code": "width"
                },
                {
                  "type": "text",
                  "text": ", and "
                },
                {
                  "type": "codeVoice",
                  "code": "rowBytes"
                },
                {
                  "type": "text",
                  "text": " fields of this structure, and for allocating a data buffer of the appropriate size.  On return, the data buffer pointed to by this structure contains  the destination image data. When you no longer need the data buffer, you must deallocate the memory."
                }
              ]
            }
          ]
        },
        {
          "name": "tempBuffer",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer to a temporary buffer. If you pass "
                },
                {
                  "type": "codeVoice",
                  "code": "NULL"
                },
                {
                  "type": "text",
                  "text": ", the function allocates the buffer, then deallocates it before returning. Alternatively, you can allocate the buffer yourself, in which case you are responsible for deallocating it when you is no longer need it."
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "If you want to allocate the buffer yourself, see the Discussion for information on how to determine the minimum size that you must allocate."
                }
              ]
            }
          ]
        },
        {
          "name": "desiredHistogram",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A pointer the desired histogram for the transformed image. The histogram should be an array with "
                },
                {
                  "type": "codeVoice",
                  "code": "histogram_entries"
                },
                {
                  "type": "text",
                  "text": " elements."
                }
              ]
            }
          ]
        },
        {
          "name": "histogram_entries",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The number of histogram entries, or “bins,” to be used in histograms for this operation."
                }
              ]
            }
          ]
        },
        {
          "name": "minVal",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A minimum pixel value. Any pixel value less than this will be clipped to this value (for the purposes of histogram calculation), and assigned to the first histogram entry. This minimum value is applied to each of the four channels separately."
                }
              ]
            }
          ]
        },
        {
          "name": "maxVal",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A maximum pixel value. Any pixel value greater than this will be clipped to this value (for the purposes of histogram calculation), and assigned to the last histogram entry. This maximum value is applied to each of the four channels separately."
                }
              ]
            }
          ]
        },
        {
          "name": "flags",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The options to use when performing the operation. If your code implements its own tiling or its own multithreading, pass "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/accelerate/1578976-processing_flags/kvimagedonottile"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Set the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/accelerate/1578976-processing_flags/kvimageleavealphaunchanged"
                },
                {
                  "type": "text",
                  "text": " flag to copy the alpha channel to the destination image unchanged."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/accelerate/1578972-error_codes/kvimagenoerror"
            },
            {
              "type": "text",
              "text": "; otherwise, one of the error codes described in "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/accelerate/vimage/data_types_and_constants"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The specification operation alters the image histogram so that it more closely resembles a given histogram. The histogram specification operation is done separately for each of the four channels—alpha, red, green, and blue. However, the size and range values are the same for each of the four histograms, and for each of the four desired histograms."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The source and destination buffers must have the same height and the same width."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If you want to allocate the memory for the "
            },
            {
              "type": "codeVoice",
              "code": "tempBuffer"
            },
            {
              "type": "text",
              "text": " parameter yourself, call this function twice, as follows:"
            }
          ]
        },
        {
          "type": "orderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "To determine the minimum size for the temporary buffer, the first time you call this function pass the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "kvImageGetTempBufferSize"
                    },
                    {
                      "type": "text",
                      "text": " flag. Pass the same values for all other parameters that you intend to use in for the second call. The function returns the required minimum size, which should be a positive value. (A negative returned value indicates an error.) The "
                    },
                    {
                      "type": "codeVoice",
                      "code": "kvImageGetTempBufferSize"
                    },
                    {
                      "type": "text",
                      "text": " flag prevents the function from performing any processing other than to determine the minimum buffer size."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "After you allocate enough space for a buffer of the returned size, call the function a second time, passing a valid pointer in the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "tempBuffer"
                    },
                    {
                      "type": "text",
                      "text": " parameter. This time, do not pass the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "kvImageGetTempBufferSize"
                    },
                    {
                      "type": "text",
                      "text": " flag."
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}