{
  "abstract": [
    {
      "type": "text",
      "text": "Gain fine-tuned control of objects that are connected by joints. "
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/spritekit"
      ],
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/spritekit",
        "doc://com.apple.documentation/documentation/spritekit/skaction",
        "doc://com.apple.documentation/documentation/spritekit/skaction/action_initializers"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/spritekit/working_with_inverse_kinematics",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 2975368,
  "kind": "article",
  "metadata": {
    "title": "Working with Inverse Kinematics",
    "role": "article",
    "roleHeading": "Article",
    "modules": [
      {
        "name": "SpriteKit"
      }
    ]
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/spritekit/working_with_inverse_kinematics",
        "documentation/spritekit/skaction/action_initializers/working_with_inverse_kinematics"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/spritekit/working_with_inverse_kinematics",
        "documentation/spritekit/skaction/action_initializers/working_with_inverse_kinematics"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/spritekit": {
      "title": "SpriteKit",
      "identifier": "doc://com.apple.documentation/documentation/spritekit",
      "url": "/documentation/spritekit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/spritekit/skaction": {
      "title": "SKAction",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/spritekit/skaction",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/spritekit/skaction"
    },
    "doc://com.apple.documentation/documentation/spritekit/skaction/action_initializers": {
      "title": "Action Initializers",
      "identifier": "doc://com.apple.documentation/documentation/spritekit/skaction/action_initializers",
      "url": "/documentation/spritekit/skaction/action_initializers",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/spritekit/skconstraint": {
      "title": "SKConstraint",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/spritekit/skconstraint",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/spritekit/skconstraint"
    },
    "doc://com.apple.documentation/documentation/spritekit/working_with_inverse_kinematics#3020288": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/spritekit/working_with_inverse_kinematics#3020288",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/spritekit/working_with_inverse_kinematics#3020288"
    },
    "link-media-3020290": {
      "identifier": "link-media-3020290",
      "type": "link",
      "title": "Figure 1",
      "url": "/documentation/spritekit/working_with_inverse_kinematics#3020290"
    },
    "media-3020290": {
      "identifier": "media-3020290",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 320,
            "height": 174
          },
          "url": "https://docs-assets.developer.apple.com/published/7600e89390/77c38feb-9878-41dd-bf01-4b141d0e4d1d.png"
        }
      ],
      "alt": "Robot arm in rest position",
      "title": "Figure 1"
    },
    "doc://com.apple.documentation/documentation/spritekit/working_with_inverse_kinematics#3020293": {
      "title": "Listing 2",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/spritekit/working_with_inverse_kinematics#3020293",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/spritekit/working_with_inverse_kinematics#3020293"
    },
    "link-media-3020292": {
      "identifier": "link-media-3020292",
      "type": "link",
      "title": "Figure 2",
      "url": "/documentation/spritekit/working_with_inverse_kinematics#3020292"
    },
    "media-3020292": {
      "identifier": "media-3020292",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 320,
            "height": 175
          },
          "url": "https://docs-assets.developer.apple.com/published/7600e89390/081446d9-4f2e-47fa-a09f-97c98fecef02.png"
        }
      ],
      "alt": "Robot arm after IK solve",
      "title": "Figure 2"
    },
    "doc://com.apple.documentation/documentation/spritekit/working_with_inverse_kinematics": {
      "title": "Working with Inverse Kinematics",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/spritekit/working_with_inverse_kinematics",
      "kind": "article",
      "role": "article",
      "url": "/documentation/spritekit/working_with_inverse_kinematics",
      "abstract": [
        {
          "type": "text",
          "text": "Gain fine-tuned control of objects that are connected by joints. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/spritekit/skphysicsjoint": {
      "title": "SKPhysicsJoint",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/spritekit/skphysicsjoint",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/spritekit/skphysicsjoint",
      "abstract": [
        {
          "type": "text",
          "text": "The abstract superclass for objects that connect physics bodies."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/spritekit/skphysicsjointfixed": {
      "title": "SKPhysicsJointFixed",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/spritekit/skphysicsjointfixed",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/spritekit/skphysicsjointfixed",
      "abstract": [
        {
          "type": "text",
          "text": "A joint that fuses two physics bodies together at a reference point."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/spritekit/skphysicsjointlimit": {
      "title": "SKPhysicsJointLimit",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/spritekit/skphysicsjointlimit",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/spritekit/skphysicsjointlimit",
      "abstract": [
        {
          "type": "text",
          "text": "A joint that imposes a maximum distance between two physics bodies, as if they were connected by a rope."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/spritekit/skphysicsjointpin": {
      "title": "SKPhysicsJointPin",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/spritekit/skphysicsjointpin",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/spritekit/skphysicsjointpin",
      "abstract": [
        {
          "type": "text",
          "text": "A joint that pins together two physics bodies, allowing independent rotation. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/spritekit/skphysicsjointsliding": {
      "title": "SKPhysicsJointSliding",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/spritekit/skphysicsjointsliding",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/spritekit/skphysicsjointsliding",
      "abstract": [
        {
          "type": "text",
          "text": "A joint that allows two physics bodies to slide along an axis. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/spritekit/skphysicsjointspring": {
      "title": "SKPhysicsJointSpring",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/spritekit/skphysicsjointspring",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/spritekit/skphysicsjointspring",
      "abstract": [
        {
          "type": "text",
          "text": "A joint that simulates a spring connecting two physics bodies. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/spritekit/skphysicsjoint",
        "doc://com.apple.documentation/documentation/spritekit/skphysicsjointfixed",
        "doc://com.apple.documentation/documentation/spritekit/skphysicsjointlimit",
        "doc://com.apple.documentation/documentation/spritekit/skphysicsjointpin",
        "doc://com.apple.documentation/documentation/spritekit/skphysicsjointsliding",
        "doc://com.apple.documentation/documentation/spritekit/skphysicsjointspring"
      ],
      "title": "Physics Joints",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Inverse kinematics (IK) is the use of equations to drive a system of connected components so that an "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "end effector"
                }
              ]
            },
            {
              "type": "text",
              "text": " can reach a desired position. Imagine a robot arm formed of a series of sections hinged together. With traditional animation techniques, if you wanted the hand of the arm to reach to a specified position, you would have to code the rotations for each of the joints, which is a complex and time-consuming task. With IK, you simply need to specify the required position of the hand (which would be the end effector), and each individual joint is rotated to achieve the final position. In SpriteKit, complex IK animations can be generated with very little code. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Set Up the Joints and Constraints",
          "anchor": "3020287"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "SpriteKit's IK relies on two classes:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/spritekit/skaction"
                    },
                    {
                      "type": "text",
                      "text": " object "
                    },
                    {
                      "type": "codeVoice",
                      "code": "reach"
                    },
                    {
                      "type": "text",
                      "text": " methods that solve an IK system (that run the system to make the end effector reach a specified position)."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/spritekit/skconstraint"
                    },
                    {
                      "type": "text",
                      "text": " objects that constrain the position or orientation of nodes."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/spritekit/working_with_inverse_kinematics#3020288"
            },
            {
              "type": "text",
              "text": " creates a simple robot arm consisting of a fixed "
            },
            {
              "type": "codeVoice",
              "code": "shoulder"
            },
            {
              "type": "text",
              "text": " node and "
            },
            {
              "type": "codeVoice",
              "code": "upperArm"
            },
            {
              "type": "text",
              "text": ", "
            },
            {
              "type": "codeVoice",
              "code": "midArm"
            },
            {
              "type": "text",
              "text": ", and "
            },
            {
              "type": "codeVoice",
              "code": "lowerArm"
            },
            {
              "type": "text",
              "text": " sections that are joined by "
            },
            {
              "type": "codeVoice",
              "code": "elbow"
            },
            {
              "type": "text",
              "text": " and "
            },
            {
              "type": "codeVoice",
              "code": "wrist"
            },
            {
              "type": "text",
              "text": " nodes. At the end of the "
            },
            {
              "type": "codeVoice",
              "code": "wrist"
            },
            {
              "type": "text",
              "text": " is an "
            },
            {
              "type": "codeVoice",
              "code": "endEffector"
            },
            {
              "type": "text",
              "text": " node. The nodes are progressively children of each other."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The "
            },
            {
              "type": "codeVoice",
              "code": "shoulder"
            },
            {
              "type": "text",
              "text": " node is fixed to the scene with a constraint, and the other joints are offset in the "
            },
            {
              "type": "codeVoice",
              "code": "y"
            },
            {
              "type": "text",
              "text": " direction by the length of each section."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "let sectionLength: CGFloat = 100",
            "let sectionRect = CGRect(x: -10, y: -sectionLength,",
            "                         width: 20, height: sectionLength)",
            "   ",
            "let upperArm = SKShapeNode(rect: sectionRect)",
            "let midArm = SKShapeNode(rect: sectionRect)",
            "let lowerArm = SKShapeNode(rect: sectionRect)",
            "let shoulder = SKShapeNode(circleOfRadius: 5)",
            "let elbow = SKShapeNode(circleOfRadius: 5)",
            "let wrist = SKShapeNode(circleOfRadius: 5)",
            "let endEffector = SKShapeNode(circleOfRadius: 5)",
            "   ",
            "scene.addChild(shoulder)",
            "shoulder.addChild(upperArm)",
            "upperArm.addChild(elbow)",
            "elbow.addChild(midArm)",
            "midArm.addChild(wrist)",
            "wrist.addChild(lowerArm)",
            "lowerArm.addChild(endEffector)",
            "    ",
            "shoulder.constraints = [SKConstraint.positionX(SKRange(constantValue: 320),",
            "                                               y: SKRange(constantValue: 320))]",
            "    ",
            "let positionConstraint = SKConstraint.positionY(SKRange(constantValue: -sectionLength))",
            "elbow.constraints =  [ positionConstraint ]",
            "wrist.constraints = [ positionConstraint ]",
            "endEffector.constraints = [ positionConstraint ]"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3020288",
            "title": "Listing 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In its default position, the code above creates a node tree that looks like this (the shoulder is at the top, in blue, and the end effector is at the bottom, in yellow)."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3020290",
              "metadata": {
                "anchor": "3020290",
                "title": "Figure 1"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Run the Solver",
          "anchor": "3020285"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To run the IK solver, you create an action passing it the desired location."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "let reachAction = SKAction.reach(to: location,",
            "                                 rootNode: shoulder,",
            "                                 duration: 1.0)",
            "     ",
            "endEffector.run(reachAction)"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3020293",
            "title": "Listing 2"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Given a location to the left of and slightly below the shoulder, the action finishes with the node tree looking like the following: "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3020292",
              "metadata": {
                "anchor": "3020292",
                "title": "Figure 2"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "type": "paragraph",
          "inlineContent": []
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}