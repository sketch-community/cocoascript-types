{
  "abstract": [
    {
      "type": "text",
      "text": "Transform the user’s location displayed on a map into an informative description."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/mapkit",
        "doc://com.apple.documentation/documentation/mapkit/mkmapview"
      ],
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/mapkit",
        "doc://com.apple.documentation/documentation/mapkit/mapkit_annotations"
      ],
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/corelocation",
        "doc://com.apple.documentation/documentation/corelocation/getting_the_user_s_location"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/mapkit/mkmapview/converting_a_user_s_location_to_a_descriptive_placemark",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 3139022,
  "kind": "article",
  "metadata": {
    "title": "Converting a User's Location to a Descriptive Placemark",
    "role": "article",
    "roleHeading": "Article",
    "modules": [
      {
        "name": "MapKit"
      }
    ]
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/mapkit/mkmapview/converting_a_user_s_location_to_a_descriptive_placemark",
        "documentation/mapkit/mapkit_annotations/converting_a_user_s_location_to_a_descriptive_placemark",
        "documentation/corelocation/getting_the_user_s_location/converting_a_user_s_location_to_a_descriptive_placemark"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/mapkit/mkmapview/converting_a_user_s_location_to_a_descriptive_placemark",
        "documentation/mapkit/mapkit_annotations/converting_a_user_s_location_to_a_descriptive_placemark",
        "documentation/corelocation/getting_the_user_s_location/converting_a_user_s_location_to_a_descriptive_placemark"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/mapkit": {
      "title": "MapKit",
      "identifier": "doc://com.apple.documentation/documentation/mapkit",
      "url": "/documentation/mapkit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/mapkit/mkmapview": {
      "title": "MKMapView",
      "identifier": "doc://com.apple.documentation/documentation/mapkit/mkmapview",
      "url": "/documentation/mapkit/mkmapview",
      "type": "topic",
      "kind": "symbol",
      "role": "symbol"
    },
    "doc://com.apple.documentation/documentation/mapkit/mapkit_annotations": {
      "title": "MapKit Annotations",
      "identifier": "doc://com.apple.documentation/documentation/mapkit/mapkit_annotations",
      "url": "/documentation/mapkit/mapkit_annotations",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/corelocation": {
      "title": "Core Location",
      "identifier": "doc://com.apple.documentation/documentation/corelocation",
      "url": "/documentation/corelocation",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/corelocation/getting_the_user_s_location": {
      "title": "Getting the User's Location",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/getting_the_user_s_location",
      "url": "/documentation/corelocation/getting_the_user_s_location",
      "type": "topic",
      "kind": "article",
      "role": "article"
    },
    "doc://com.apple.documentation/documentation/mapkit/mkmapview/1452682-showsuserlocation": {
      "title": "showsUserLocation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/mapkit/mkmapview/1452682-showsuserlocation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/mapkit/mkmapview/1452682-showsuserlocation",
      "abstract": [
        {
          "type": "text",
          "text": "A Boolean value indicating whether the map should try to display the user’s location. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/mapkit/mkuserlocation": {
      "title": "MKUserLocation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/mapkit/mkuserlocation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/mapkit/mkuserlocation"
    },
    "doc://com.apple.documentation/documentation/mapkit/mkmapviewdelegate/1452086-mapview": {
      "title": "mapView:didUpdateUserLocation:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/mapkit/mkmapviewdelegate/1452086-mapview",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/mapkit/mkmapviewdelegate/1452086-mapview",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "mapView:didUpdateUserLocation:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/clplacemark": {
      "title": "CLPlacemark",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clplacemark",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clplacemark"
    },
    "doc://com.apple.documentation/documentation/mapkit/mkuserlocation/1452415-location": {
      "title": "location",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/mapkit/mkuserlocation/1452415-location",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/mapkit/mkuserlocation/1452415-location"
    },
    "doc://com.apple.documentation/documentation/corelocation/clgeocoder": {
      "title": "CLGeocoder",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clgeocoder",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clgeocoder"
    },
    "doc://com.apple.documentation/documentation/corelocation/clplacemark/1423507-locality": {
      "title": "locality",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clplacemark/1423507-locality",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clplacemark/1423507-locality"
    },
    "doc://com.apple.documentation/documentation/mapkit/mkmapview/converting_a_user_s_location_to_a_descriptive_placemark#3172198": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/mapkit/mkmapview/converting_a_user_s_location_to_a_descriptive_placemark#3172198",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/mapkit/mkmapview/converting_a_user_s_location_to_a_descriptive_placemark#3172198"
    },
    "doc://com.apple.documentation/documentation/corelocation/converting_between_coordinates_and_user-friendly_place_names": {
      "title": "Converting Between Coordinates and User-Friendly Place Names",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/converting_between_coordinates_and_user-friendly_place_names",
      "kind": "article",
      "role": "article",
      "url": "/documentation/corelocation/converting_between_coordinates_and_user-friendly_place_names",
      "abstract": [
        {
          "type": "text",
          "text": "Convert between a latitude/longitude pair and a more user-friendly description of that location."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/mapkit/mkmapview/converting_a_user_s_location_to_a_descriptive_placemark": {
      "title": "Converting a User's Location to a Descriptive Placemark",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/mapkit/mkmapview/converting_a_user_s_location_to_a_descriptive_placemark",
      "kind": "article",
      "role": "article",
      "url": "/documentation/mapkit/mkmapview/converting_a_user_s_location_to_a_descriptive_placemark",
      "abstract": [
        {
          "type": "text",
          "text": "Transform the user’s location displayed on a map into an informative description."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/mapkit/mkmapview/1452040-userlocationvisible": {
      "title": "userLocationVisible",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/mapkit/mkmapview/1452040-userlocationvisible",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/mapkit/mkmapview/1452040-userlocationvisible",
      "abstract": [
        {
          "type": "text",
          "text": "A Boolean value that indicates whether the device’s current location is visible in the map view."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/mapkit/mkmapview/1452459-userlocation": {
      "title": "userLocation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/mapkit/mkmapview/1452459-userlocation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/mapkit/mkmapview/1452459-userlocation",
      "abstract": [
        {
          "type": "text",
          "text": "The annotation object representing the user’s current location. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/mapkit/mkmapview/1616208-usertrackingmode": {
      "title": "userTrackingMode",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/mapkit/mkmapview/1616208-usertrackingmode",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/mapkit/mkmapview/1616208-usertrackingmode",
      "abstract": [
        {
          "type": "text",
          "text": "The mode used to track the user location."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/mapkit/mkmapview/1616205-setusertrackingmode": {
      "title": "setUserTrackingMode:animated:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/mapkit/mkmapview/1616205-setusertrackingmode",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/mapkit/mkmapview/1616205-setusertrackingmode",
      "abstract": [
        {
          "type": "text",
          "text": "Sets the mode used to track the user location with optional animation."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "setUserTrackingMode:animated:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/mapkit/mkusertrackingmode": {
      "title": "MKUserTrackingMode",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/mapkit/mkusertrackingmode",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/mapkit/mkusertrackingmode",
      "abstract": [
        {
          "type": "text",
          "text": "The mode used to track the user location on the map."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/mapkit/mkmapview/1452682-showsuserlocation",
        "doc://com.apple.documentation/documentation/mapkit/mkmapview/1452040-userlocationvisible",
        "doc://com.apple.documentation/documentation/mapkit/mkmapview/1452459-userlocation",
        "doc://com.apple.documentation/documentation/mapkit/mkmapview/1616208-usertrackingmode",
        "doc://com.apple.documentation/documentation/mapkit/mkmapview/1616205-setusertrackingmode",
        "doc://com.apple.documentation/documentation/mapkit/mkusertrackingmode"
      ],
      "title": "Displaying the User’s Location",
      "generated": true
    },
    {
      "title": "Related Documentation",
      "generated": false,
      "identifiers": [
        "doc://com.apple.documentation/documentation/corelocation/converting_between_coordinates_and_user-friendly_place_names"
      ]
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You can show a user’s location on a map in order to orient them to elements of your app that use map content. For instance, a user’s current location can be a point of reference for retrieving search results or calculating directions. Additionally, you can display location information outside of the map, such as a search field pre-filled with the user’s current city or street address. To provide this information in your app, configure your map view to display the user’s location, and then translate the location to informative, user-friendly data."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Display the User Location Annotation",
          "anchor": "3172196"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To provide user-friendly place information, configure your map view to display the user’s current location by enabling "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/mapkit/mkmapview/1452682-showsuserlocation"
            },
            {
              "type": "text",
              "text": ". After enabling this property, the map delegate begins receiving updates to the user’s location, represented with a "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/mapkit/mkuserlocation"
            },
            {
              "type": "text",
              "text": " object, through "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/mapkit/mkmapviewdelegate/1452086-mapview"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Geocode the User Location Annotation",
          "anchor": "3172197"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/clplacemark"
            },
            {
              "type": "text",
              "text": " objects represent user place names, and include properties for street name, city name, country name, and many other location identifiers. When "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/mapkit/mkmapviewdelegate/1452086-mapview"
            },
            {
              "type": "text",
              "text": " receives updates on the user’s location, convert the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/mapkit/mkuserlocation"
            },
            {
              "type": "text",
              "text": " object to a "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/clplacemark"
            },
            {
              "type": "text",
              "text": " by reverse geocoding the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/mapkit/mkuserlocation/1452415-location"
            },
            {
              "type": "text",
              "text": " property with a "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/clgeocoder"
            },
            {
              "type": "text",
              "text": ". Readable descriptions of the user’s location are available as properties on the placemark, such as the city information stored in the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/clplacemark/1423507-locality"
            },
            {
              "type": "text",
              "text": " property."
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Geocoding requests are rate-limited for each app. Issue new geocoding requests only when the user has moved a significant distance and after a reasonable amount of time has passed."
                }
              ]
            }
          ],
          "style": "important"
        },
        {
          "type": "codeListing",
          "code": [
            "func mapView(_ mapView: MKMapView, didUpdate userLocation: MKUserLocation) {",
            "        guard let newLocation = userLocation.location else { return }",
            "        ",
            "        let currentTime = Date()",
            "        let lastLocation = self.currentLocation",
            "        self.currentLocation = newLocation",
            "        ",
            "        // Only get new placemark information if you don't have a previous location,",
            "        // if the user has moved a meaningful distance from the previous location, such as 1000 meters,",
            "        // and if it's been 60 seconds since the last geocode request.",
            "        if let lastLocation = lastLocation,",
            "            newLocation.distance(from: lastLocation) <= 1000,",
            "            let lastTime = lastGeocodeTime,",
            "            currentTime.timeIntervalSince(lastTime) < 60 {",
            "            return",
            "        }",
            "        ",
            "        // Convert the user's location to a user-friendly place name by reverse geocoding the location.",
            "        lastGeocodeTime = currentTime",
            "        geocoder.reverseGeocodeLocation(newLocation) { (placemarks, error) in",
            "            guard error == nil else {",
            "                self.handleError(error)",
            "                return",
            "            }",
            "            ",
            "            // Most geocoding requests contain only one result.",
            "            if let firstPlacemark = placemarks?.first {",
            "                self.mostRecentPlacemark = firstPlacemark",
            "                self.currentCity = firstPlacemark.locality",
            "            }",
            "        }",
            "    }"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3172198",
            "title": "Listing 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": []
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}