{
  "abstract": [
    {
      "type": "text",
      "text": "Indicates whether the item at the specified URL should be stored in iCloud."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/foundation",
        "doc://com.apple.documentation/documentation/foundation/file_system",
        "doc://com.apple.documentation/documentation/foundation/filemanager"
      ],
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/foundation",
        "doc://com.apple.documentation/documentation/foundation/icloud",
        "doc://com.apple.documentation/documentation/foundation/filemanager"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/foundation/filemanager/1413989-setubiquitous",
    "interfaceLanguage": "swift"
  },
  "legacy_identifier": 1413989,
  "kind": "symbol",
  "metadata": {
    "title": "setUbiquitous(_:itemAt:destinationURL:)",
    "role": "symbol",
    "roleHeading": "Instance Method",
    "modules": [
      {
        "name": "Foundation"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "5.0",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "5.0",
        "current": "15.2"
      },
      {
        "name": "macOS",
        "introducedAt": "10.7",
        "current": "12.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "15.2"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "current": "15.2"
      },
      {
        "name": "watchOS",
        "introducedAt": "2.0",
        "current": "8.3"
      }
    ],
    "externalID": "c:objc(cs)NSFileManager(im)setUbiquitous:itemAtURL:destinationURL:error:",
    "parent": {
      "title": "FileManager"
    },
    "symbolKind": "instm",
    "fragments": [
      {
        "kind": "text",
        "text": "func "
      },
      {
        "kind": "identifier",
        "text": "setUbiquitous"
      },
      {
        "kind": "text",
        "text": "(Bool, "
      },
      {
        "kind": "identifier",
        "text": "itemAt"
      },
      {
        "kind": "text",
        "text": ": URL, "
      },
      {
        "kind": "identifier",
        "text": "destinationURL"
      },
      {
        "kind": "text",
        "text": ": URL)"
      }
    ]
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/foundation/nsfilemanager/1413989-setubiquitous"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/foundation/filemanager/1413989-setubiquitous"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/foundation": {
      "title": "Foundation",
      "identifier": "doc://com.apple.documentation/documentation/foundation",
      "url": "/documentation/foundation",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/foundation/file_system": {
      "title": "File System",
      "identifier": "doc://com.apple.documentation/documentation/foundation/file_system",
      "url": "/documentation/foundation/file_system",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager": {
      "title": "FileManager",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/filemanager"
    },
    "doc://com.apple.documentation/documentation/foundation/icloud": {
      "title": "iCloud",
      "identifier": "doc://com.apple.documentation/documentation/foundation/icloud",
      "url": "/documentation/foundation/icloud",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/swift/true": {
      "title": "true",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/swift/true",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/swift/true"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1411577-url": {
      "title": "url(forPublishingUbiquitousItemAt:expiration:)",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1411577-url",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/filemanager/1411577-url",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a URL that can be emailed to users to allow them to download a copy of a flat file item from iCloud."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "url"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "forPublishingUbiquitousItemAt"
        },
        {
          "kind": "text",
          "text": ": URL, "
        },
        {
          "kind": "identifier",
          "text": "expiration"
        },
        {
          "kind": "text",
          "text": ": AutoreleasingUnsafeMutablePointer<NSDate?>?) -> URL"
        }
      ]
    },
    "link-3023437": {
      "title": "Error Handling",
      "type": "topic",
      "identifier": "link-3023437",
      "kind": "article",
      "role": "link",
      "url": "https://docs.swift.org/swift-book/LanguageGuide/ErrorHandling.html"
    },
    "link-3023438": {
      "title": "The Swift Programming Language",
      "type": "topic",
      "identifier": "link-3023438",
      "kind": "article",
      "role": "link",
      "url": "https://docs.swift.org/swift-book/"
    },
    "doc://com.apple.documentation/documentation/swift/cocoa_design_patterns/about_imported_cocoa_error_parameters": {
      "title": "About Imported Cocoa Error Parameters",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/swift/cocoa_design_patterns/about_imported_cocoa_error_parameters",
      "kind": "article",
      "role": "article",
      "url": "/documentation/swift/cocoa_design_patterns/about_imported_cocoa_error_parameters"
    },
    "doc://com.apple.documentation/documentation/swift/false": {
      "title": "false",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/swift/false",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/swift/false"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1411653-url": {
      "title": "url(forUbiquityContainerIdentifier:)",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1411653-url",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/filemanager/1411653-url",
      "abstract": [
        {
          "type": "text",
          "text": "Returns the URL for the iCloud container associated with the specified identifier and establishes access to that container."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "url"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "forUbiquityContainerIdentifier"
        },
        {
          "kind": "text",
          "text": ": String?) -> URL?"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1410218-isubiquitousitem": {
      "title": "isUbiquitousItem(at:)",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1410218-isubiquitousitem",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/filemanager/1410218-isubiquitousitem",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a Boolean indicating whether the item is targeted for storage in iCloud."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "isUbiquitousItem"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "at"
        },
        {
          "kind": "text",
          "text": ": URL) -> Bool"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1410377-startdownloadingubiquitousitem": {
      "title": "startDownloadingUbiquitousItem(at:)",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1410377-startdownloadingubiquitousitem",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/filemanager/1410377-startdownloadingubiquitousitem",
      "abstract": [
        {
          "type": "text",
          "text": "Starts downloading (if necessary) the specified item to the local system."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "startDownloadingUbiquitousItem"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "at"
        },
        {
          "kind": "text",
          "text": ": URL)"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/swift/bool": {
      "title": "Bool",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/swift/bool",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/swift/bool"
    },
    "doc://com.apple.documentation/documentation/foundation/url": {
      "title": "URL",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/url",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/url"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1408036-ubiquityidentitytoken": {
      "title": "ubiquityIdentityToken",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1408036-ubiquityidentitytoken",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/filemanager/1408036-ubiquityidentitytoken",
      "abstract": [
        {
          "type": "text",
          "text": "An opaque token that represents the current user’s iCloud Drive Documents identity."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "var "
        },
        {
          "kind": "identifier",
          "text": "ubiquityIdentityToken"
        },
        {
          "kind": "text",
          "text": ": (NSCoding & NSCopying & NSObjectProtocol)?"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1413989-setubiquitous": {
      "title": "setUbiquitous(_:itemAt:destinationURL:)",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1413989-setubiquitous",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/filemanager/1413989-setubiquitous",
      "abstract": [
        {
          "type": "text",
          "text": "Indicates whether the item at the specified URL should be stored in iCloud."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "setUbiquitous"
        },
        {
          "kind": "text",
          "text": "(Bool, "
        },
        {
          "kind": "identifier",
          "text": "itemAt"
        },
        {
          "kind": "text",
          "text": ": URL, "
        },
        {
          "kind": "identifier",
          "text": "destinationURL"
        },
        {
          "kind": "text",
          "text": ": URL)"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1409696-evictubiquitousitem": {
      "title": "evictUbiquitousItem(at:)",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1409696-evictubiquitousitem",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/filemanager/1409696-evictubiquitousitem",
      "abstract": [
        {
          "type": "text",
          "text": "Removes the local copy of the specified item that’s stored in iCloud."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "evictUbiquitousItem"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "at"
        },
        {
          "kind": "text",
          "text": ": URL)"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/foundation/filemanager/1408036-ubiquityidentitytoken",
        "doc://com.apple.documentation/documentation/foundation/filemanager/1411653-url",
        "doc://com.apple.documentation/documentation/foundation/filemanager/1410218-isubiquitousitem",
        "doc://com.apple.documentation/documentation/foundation/filemanager/1410377-startdownloadingubiquitousitem",
        "doc://com.apple.documentation/documentation/foundation/filemanager/1409696-evictubiquitousitem",
        "doc://com.apple.documentation/documentation/foundation/filemanager/1411577-url"
      ],
      "title": "Managing iCloud-Based Items",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "swift"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "func"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "setUbiquitous"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "externalParam",
              "text": "_"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "internalParam",
              "text": "flag"
            },
            {
              "kind": "text",
              "text": ": "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "s:Sb",
              "identifier": "doc://com.apple.documentation/documentation/swift/bool",
              "text": "Bool"
            },
            {
              "kind": "text",
              "text": ", "
            },
            {
              "kind": "externalParam",
              "text": "itemAt"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "internalParam",
              "text": "url"
            },
            {
              "kind": "text",
              "text": ": "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "s:10Foundation3URLV",
              "identifier": "doc://com.apple.documentation/documentation/foundation/url",
              "text": "URL"
            },
            {
              "kind": "text",
              "text": ", "
            },
            {
              "kind": "externalParam",
              "text": "destinationURL"
            },
            {
              "kind": "text",
              "text": ": "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "s:10Foundation3URLV",
              "identifier": "doc://com.apple.documentation/documentation/foundation/url",
              "text": "URL"
            },
            {
              "kind": "text",
              "text": ") "
            },
            {
              "kind": "keyword",
              "text": "throws"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "swift"
      ],
      "parameters": [
        {
          "name": "flag",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "reference",
                  "isActive": false,
                  "identifier": "doc://com.apple.documentation/documentation/swift/true"
                },
                {
                  "type": "text",
                  "text": " to move the item to iCloud or "
                },
                {
                  "type": "reference",
                  "isActive": false,
                  "identifier": "doc://com.apple.documentation/documentation/swift/false"
                },
                {
                  "type": "text",
                  "text": " to remove it from iCloud (if it is there currently)."
                }
              ]
            }
          ]
        },
        {
          "name": "url",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The URL of the item (file or directory) that you want to store in iCloud."
                }
              ]
            }
          ]
        },
        {
          "name": "destinationURL",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "inlineHead",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Moving a file into iCloud"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " The location in iCloud at which to store the file or directory. This URL must be constructed from a URL returned by the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1411653-url"
                },
                {
                  "type": "text",
                  "text": " method, which you use to retrieve the desired iCloud container directory. The URL you specify may contain additional subdirectories so that you can organize your files hierarchically in iCloud. However, you are responsible for creating those intermediate subdirectories (using the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager"
                },
                {
                  "type": "text",
                  "text": " class) in your iCloud container directory."
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "inlineHead",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Moving a file out of iCloud"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " The location on the local device."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/swift/true"
            },
            {
              "type": "text",
              "text": " if the item’s status was updated successfully or "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/swift/false"
            },
            {
              "type": "text",
              "text": " if an error occurred. If this method returns "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/swift/false"
            },
            {
              "type": "text",
              "text": " and you specified a value for the "
            },
            {
              "type": "codeVoice",
              "code": "errorOut"
            },
            {
              "type": "text",
              "text": " parameter, this method returns an error object in the provided pointer. "
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Use this method to move a file from its current location to iCloud. For files located in an app’s sandbox, this involves physically removing the file from the sandbox container. (The system extends your app’s sandbox privileges to give it access to files it moves to iCloud.) You can also use this method to move files out of iCloud and back into a local directory."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If your app is presenting the file’s contents to the user, it must have an active file presenter object configured to monitor the specified file or directory before calling this method. When you specify "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/swift/true"
            },
            {
              "type": "text",
              "text": " for the "
            },
            {
              "type": "codeVoice",
              "code": "flag"
            },
            {
              "type": "text",
              "text": " parameter, this method attempts to move the file or directory to the cloud and returns "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/swift/true"
            },
            {
              "type": "text",
              "text": " if it is successful. Calling this method also notifies your file presenter of the new location of the file so that your app can continue to operate on it."
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Avoid calling this method from your app’s main thread. This method performs a coordinated write operation on the specified file, which can block for a long time. Additionally, if the file presenter that is monitoring the file is incorrectly configured so that it receives messages on the main operation queue, calling this method on the main thread can cause a deadlock. Instead, use a dispatch queue to call this method from background thread. After the method returns, message your main thread to update the rest of your app’s data structures."
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "After calling this method, you must wait for a file to be fully uploaded to iCloud before attempting to share the file using the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1411577-url"
                },
                {
                  "type": "text",
                  "text": " method. "
                }
              ]
            }
          ],
          "style": "important"
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "In Swift, this method returns "
                },
                {
                  "type": "codeVoice",
                  "code": "Void"
                },
                {
                  "type": "text",
                  "text": " and is marked with the "
                },
                {
                  "type": "codeVoice",
                  "code": "throws"
                },
                {
                  "type": "text",
                  "text": " keyword to indicate that it throws an error in cases of failure."
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "You call this method in a "
                },
                {
                  "type": "codeVoice",
                  "code": "try"
                },
                {
                  "type": "text",
                  "text": " expression and handle any errors in the "
                },
                {
                  "type": "codeVoice",
                  "code": "catch"
                },
                {
                  "type": "text",
                  "text": " clauses of a "
                },
                {
                  "type": "codeVoice",
                  "code": "do"
                },
                {
                  "type": "text",
                  "text": " statement, as described in "
                },
                {
                  "type": "link",
                  "title": "Error Handling",
                  "destination": "https://docs.swift.org/swift-book/LanguageGuide/ErrorHandling.html"
                },
                {
                  "type": "text",
                  "text": " in "
                },
                {
                  "type": "link",
                  "title": "The Swift Programming Language",
                  "destination": "https://docs.swift.org/swift-book/"
                },
                {
                  "type": "text",
                  "text": " and "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/swift/cocoa_design_patterns/about_imported_cocoa_error_parameters"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            }
          ],
          "style": "note",
          "name": "Handling Errors in Swift:"
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}