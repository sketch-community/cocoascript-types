{
  "abstract": [
    {
      "type": "text",
      "text": "An option identifying the focal length in pixels used in capturing images to be processed by the detector."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coreimage",
        "doc://com.apple.documentation/documentation/coreimage/cidetector",
        "doc://com.apple.documentation/documentation/coreimage/cidetector/feature_detection_keys"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/coreimage/cidetectorfocallength",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1437928,
  "kind": "symbol",
  "metadata": {
    "title": "CIDetectorFocalLength",
    "role": "symbol",
    "roleHeading": "Global Variable",
    "modules": [
      {
        "name": "Core Image"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "8.0",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "8.0",
        "current": "15.2"
      },
      {
        "name": "macOS",
        "introducedAt": "10.10",
        "current": "12.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "15.2"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "current": "15.2"
      }
    ],
    "externalID": "c:@CIDetectorFocalLength",
    "symbolKind": "data"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/coreimage/cidetectorfocallength"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/coreimage/cidetectorfocallength"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coreimage": {
      "title": "Core Image",
      "identifier": "doc://com.apple.documentation/documentation/coreimage",
      "url": "/documentation/coreimage",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/coreimage/cidetector": {
      "title": "CIDetector",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cidetector",
      "url": "/documentation/coreimage/cidetector",
      "type": "topic",
      "kind": "symbol",
      "role": "symbol"
    },
    "doc://com.apple.documentation/documentation/coreimage/cidetector/feature_detection_keys": {
      "title": "Feature Detection Keys",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cidetector/feature_detection_keys",
      "url": "/documentation/coreimage/cidetector/feature_detection_keys",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/foundation/nsnumber": {
      "title": "NSNumber",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsnumber",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsnumber"
    },
    "doc://com.apple.documentation/documentation/coreimage/cidetectortyperectangle": {
      "title": "CIDetectorTypeRectangle",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cidetectortyperectangle",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreimage/cidetectortyperectangle"
    },
    "doc://com.apple.documentation/documentation/coreimage/cidetectoraspectratio": {
      "title": "CIDetectorAspectRatio",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cidetectoraspectratio",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreimage/cidetectoraspectratio"
    },
    "doc://com.apple.documentation/documentation/coreimage/ciimage": {
      "title": "CIImage",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/ciimage",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreimage/ciimage"
    },
    "doc://com.apple.documentation/documentation/foundation/nsstring": {
      "title": "NSString",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsstring",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsstring"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSString",
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsstring",
              "text": "NSString"
            },
            {
              "kind": "text",
              "text": " *"
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "CIDetectorFocalLength"
            },
            {
              "kind": "text",
              "text": ";"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "macOS",
            "Mac Catalyst",
            "tvOS"
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The value of this key is an "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsnumber"
            },
            {
              "type": "text",
              "text": " object whose value is a floating-point number. Use this option with the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreimage/cidetectortyperectangle"
            },
            {
              "type": "text",
              "text": " detector type to control the effect of the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreimage/cidetectoraspectratio"
            },
            {
              "type": "text",
              "text": " option on feature detection."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This optionâ€™s value can be "
            },
            {
              "type": "codeVoice",
              "code": "0.0"
            },
            {
              "type": "text",
              "text": ", "
            },
            {
              "type": "codeVoice",
              "code": "-1.0"
            },
            {
              "type": "text",
              "text": ", or any positive value:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "The special value of "
                    },
                    {
                      "type": "codeVoice",
                      "code": "-1.0"
                    },
                    {
                      "type": "text",
                      "text": " (the default) disables the aspect ratio test for the returned rectangle."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "The special value of "
                    },
                    {
                      "type": "codeVoice",
                      "code": "0.0"
                    },
                    {
                      "type": "text",
                      "text": " enables a less precise test of aspect ratio that approximates an orthographic (non-perspective) projection. Use this value if you want to specify the aspect ratio of the rectangle via the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/coreimage/cidetectoraspectratio"
                    },
                    {
                      "type": "text",
                      "text": " option, but have no means of determining the value for the focal length in pixels. See below for a method to compute an approximate value for the focal length in pixels."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Any other value specifies the camera focal length, in pixels, allowing the aspect ratio specification to account for perspective distortion of rectangles in the input image."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If you know the diagonal field of view of the camera (the scene angle subtended by the diagonal corners of an image), you can use the following formula to compute an approximate focal length in pixels:"
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "codeVoice",
              "code": "focal_length_pixels = (image_diagonal_pixels/2)/tan(FOV/2)"
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In this formula, "
            },
            {
              "type": "codeVoice",
              "code": "image_diagonal_pixels"
            },
            {
              "type": "text",
              "text": " is the length (in pixels) of the image diagonal of the maximum resolution of the camera sensor. (For example, this value is 4080 pixels for a 3264 x 2448 (8 megapixel) sensor, and 5000 pixels for a 4096x3024 (12 megapixel) sensor.)"
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To measure diagonal field of view, put the camera on a tripod so that it is perpendicular to a surface and the center of the image is oriented on a mark on the surface. Measure the distance from the mark to one of the corner points of the image ("
            },
            {
              "type": "codeVoice",
              "code": "Y"
            },
            {
              "type": "text",
              "text": "). Measure the distance from the camera to the surface ("
            },
            {
              "type": "codeVoice",
              "code": "Z"
            },
            {
              "type": "text",
              "text": ").  The field of view is then "
            },
            {
              "type": "codeVoice",
              "code": "2*arctan(Y/Z)"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You must specify this value in terms of the maximum sensor resolution. If the supplied "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coreimage/ciimage"
            },
            {
              "type": "text",
              "text": " has been scaled relative relative to the maximum sensor resolution, the supplied focal length must also be similarly scaled."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}