{
  "abstract": [
    {
      "type": "text",
      "text": "Creates a Core Image context from a CGL context, using the specified options, color space, and pixel format object."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coreimage",
        "doc://com.apple.documentation/documentation/coreimage/cicontext"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/coreimage/cicontext/1438137-contextwithcglcontext",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1438137,
  "kind": "symbol",
  "metadata": {
    "title": "contextWithCGLContext:pixelFormat:colorSpace:options:",
    "role": "symbol",
    "roleHeading": "Type Method",
    "modules": [
      {
        "name": "Core Image"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.6",
        "deprecatedAt": "10.14",
        "current": "11.1",
        "deprecated": true
      }
    ],
    "externalID": "c:objc(cs)CIContext(cm)contextWithCGLContext:pixelFormat:colorSpace:options:",
    "symbolKind": "clm"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/coreimage/cicontext/1438137-contextwithcglcontext"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/coreimage/cicontext/1438137-init"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coreimage": {
      "title": "Core Image",
      "identifier": "doc://com.apple.documentation/documentation/coreimage",
      "url": "/documentation/coreimage",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/coreimage/cicontext": {
      "title": "CIContext",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontext",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreimage/cicontext"
    },
    "devLink-1726655": {
      "identifier": "devLink-1726655",
      "type": "link",
      "title": "OpenGL Programming Guide for Mac",
      "url": "https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_intro/opengl_intro.html#//apple_ref/doc/uid/TP40001987"
    },
    "doc://com.apple.documentation/documentation/coreimage/cicontext/1438137-contextwithcglcontext#2555503": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontext/1438137-contextwithcglcontext#2555503",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/coreimage/cicontext/1438137-contextwithcglcontext#2555503"
    },
    "doc://com.apple.documentation/documentation/coreimage/cicontext/1437864-contextwithcgcontext": {
      "title": "contextWithCGContext:options:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontext/1437864-contextwithcgcontext",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreimage/cicontext/1437864-contextwithcgcontext",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a Core Image context from a Quartz context, using the specified options."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "contextWithCGContext:options:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgcolorspaceref": {
      "title": "CGColorSpaceRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgcolorspaceref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/cgcolorspaceref"
    },
    "doc://com.apple.documentation/documentation/foundation/nsdictionary": {
      "title": "NSDictionary",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsdictionary",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsdictionary"
    },
    "doc://com.apple.documentation/documentation/coreimage/cicontextoption": {
      "title": "CIContextOption",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontextoption",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreimage/cicontextoption"
    },
    "doc://com.apple.documentation/documentation/objectivec/id": {
      "title": "id",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/objectivec/id",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/objectivec/id"
    },
    "doc://com.apple.documentation/documentation/coreimage/cicontext/1438137-contextwithcglcontext": {
      "title": "contextWithCGLContext:pixelFormat:colorSpace:options:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontext/1438137-contextwithcglcontext",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreimage/cicontext/1438137-contextwithcglcontext",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a Core Image context from a CGL context, using the specified options, color space, and pixel format object."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "contextWithCGLContext:pixelFormat:colorSpace:options:"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreimage/cicontext/1473525-contextwithcglcontext": {
      "title": "contextWithCGLContext:pixelFormat:options:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontext/1473525-contextwithcglcontext",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreimage/cicontext/1473525-contextwithcglcontext",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a Core Image context from a CGL context, using the specified options and pixel format object."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "contextWithCGLContext:pixelFormat:options:"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreimage/cicontext/1620419-contextwitheaglcontext": {
      "title": "contextWithEAGLContext:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontext/1620419-contextwitheaglcontext",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreimage/cicontext/1620419-contextwitheaglcontext",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a Core Image context from an EAGL context."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "contextWithEAGLContext:"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreimage/cicontext/1620362-contextwitheaglcontext": {
      "title": "contextWithEAGLContext:options:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontext/1620362-contextwitheaglcontext",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreimage/cicontext/1620362-contextwitheaglcontext",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a Core Image context from an EAGL context using the specified options."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "contextWithEAGLContext:options:"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreimage/cicontext/1437772-contextforofflinegpuatindex": {
      "title": "contextForOfflineGPUAtIndex:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontext/1437772-contextforofflinegpuatindex",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreimage/cicontext/1437772-contextforofflinegpuatindex",
      "abstract": [
        {
          "type": "text",
          "text": "Creates an OpenGL-based Core Image context using a GPU that is not currently driving a display."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "contextForOfflineGPUAtIndex:"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/coreimage/cicontext/1437758-contextforofflinegpuatindex": {
      "title": "contextForOfflineGPUAtIndex:colorSpace:options:sharedContext:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontext/1437758-contextforofflinegpuatindex",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coreimage/cicontext/1437758-contextforofflinegpuatindex",
      "abstract": [
        {
          "type": "text",
          "text": "Creates an OpenGL-based Core Image context using a GPU that is not currently driving a display, with the specified options."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "contextForOfflineGPUAtIndex:colorSpace:options:sharedContext:"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/coreimage/cicontext/1473525-contextwithcglcontext",
        "doc://com.apple.documentation/documentation/coreimage/cicontext/1620419-contextwitheaglcontext",
        "doc://com.apple.documentation/documentation/coreimage/cicontext/1620362-contextwitheaglcontext",
        "doc://com.apple.documentation/documentation/coreimage/cicontext/1437772-contextforofflinegpuatindex",
        "doc://com.apple.documentation/documentation/coreimage/cicontext/1437758-contextforofflinegpuatindex"
      ],
      "title": "Creating a Context for GPU-Based Rendering with OpenGL",
      "generated": true
    },
    {
      "title": "Related Documentation",
      "generated": false,
      "identifiers": [
        "doc://com.apple.documentation/documentation/coreimage/cicontext/1437864-contextwithcgcontext"
      ]
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "text",
              "text": "+ ("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)CIContext",
              "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontext",
              "text": "CIContext"
            },
            {
              "kind": "text",
              "text": " *"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "identifier",
              "text": "contextWithCGLContext:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CGLContextObj",
              "identifier": "symbol-1524146",
              "text": "CGLContextObj"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "cglctx"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "pixelFormat:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CGLPixelFormatObj",
              "identifier": "symbol-1524082",
              "text": "CGLPixelFormatObj"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "pixelFormat"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "colorSpace:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CGColorSpaceRef",
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgcolorspaceref",
              "text": "CGColorSpaceRef"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "colorSpace"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "options:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSDictionary",
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsdictionary",
              "text": "NSDictionary"
            },
            {
              "kind": "text",
              "text": "<"
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CIContextOption",
              "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontextoption",
              "text": "CIContextOption"
            },
            {
              "kind": "text",
              "text": ", "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@id",
              "identifier": "doc://com.apple.documentation/documentation/objectivec/id",
              "text": "id"
            },
            {
              "kind": "text",
              "text": "> *"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "options"
            },
            {
              "kind": "text",
              "text": ";"
            }
          ],
          "platforms": [
            "macOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "ctx",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A CGL context obtained by calling the CGL function "
                },
                {
                  "type": "codeVoice",
                  "code": "CGLCreateContext"
                },
                {
                  "type": "text",
                  "text": ". "
                }
              ]
            }
          ]
        },
        {
          "name": "pf",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A CGL pixel format object either obtained from the system or created by calling a CGL function such as "
                },
                {
                  "type": "codeVoice",
                  "code": "CGLChoosePixelFormat"
                },
                {
                  "type": "text",
                  "text": ". This parameter must be the same pixel format object used to create the CGL context. The pixel format object must be valid for the lifetime of the Core Image context. Don’t release the pixel format object until after you release the Core Image context. "
                }
              ]
            }
          ]
        },
        {
          "name": "space",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A color space object encapsulating color space information that is used to specify how color values are interpreted."
                }
              ]
            }
          ]
        },
        {
          "name": "options",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A dictionary that contains options for creating a "
                },
                {
                  "type": "reference",
                  "isActive": false,
                  "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontext"
                },
                {
                  "type": "text",
                  "text": " object. You can pass any of the keys defined in "
                },
                {
                  "type": "codeVoice",
                  "code": "Context Options"
                },
                {
                  "type": "text",
                  "text": " along with the appropriate value."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "After calling this method, Core Image draws content into the surface (drawable object) attached to the CGL context. A CGL context is a macOS OpenGL context. For more information, see "
            },
            {
              "type": "link",
              "title": "OpenGL Programming Guide for Mac",
              "destination": "https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_intro/opengl_intro.html#//apple_ref/doc/uid/TP40001987"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When you create a "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/coreimage/cicontext"
            },
            {
              "type": "text",
              "text": " object using a CGL context, all OpenGL states set for the CGL context affect rendering to that context. That means that coordinate and viewport transformations set on the CGL context, as well as the vertex color, affect drawing to that context. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For best results, follow these guidelines when you use Core Image to render into an OpenGL context:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Ensure that a single unit in the coordinate space of the OpenGL context represents a single pixel in the output device."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "The Core Image coordinate space has the origin in the bottom-left corner of the screen. You should configure the OpenGL context in the same way."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "The OpenGL context blending state is respected by Core Image. If the image you want to render contains translucent pixels, it’s best to enable blending using a blend function with the parameters "
                    },
                    {
                      "type": "codeVoice",
                      "code": "GL_ONE, GL_ONE_MINUS_SRC_ALPHA"
                    },
                    {
                      "type": "text",
                      "text": ", as shown in the following code example."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Core Image manages its own internal OpenGL context that shares resources with the OpenGL context you specify. To enable resource sharing, use the following code:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "const NSOpenGLPixelFormatAttribute attr[] = {",
            "        NSOpenGLPFAAccelerated,",
            "        NSOpenGLPFANoRecovery,",
            "        NSOpenGLPFAColorSize, 32,",
            "        0",
            "    };",
            "NSOpenGLPixelFormat *pf = [[NSOpenGLPixelFormat alloc] initWithAttributes:(void *)&attr];",
            "CIContext *myCIContext = [CIContext contextWithCGLContext: CGLGetCurrentContext()",
            "                                pixelFormat: [pf CGLPixelFormatObj]",
            "                                colorSpace: CGColorSpaceCreateDeviceRGB()",
            "                                options: nil];"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "2555503",
            "title": "Listing 1"
          }
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}