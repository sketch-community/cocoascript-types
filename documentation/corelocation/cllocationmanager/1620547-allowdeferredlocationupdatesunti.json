{
  "abstract": [
    {
      "type": "text",
      "text": "Asks the location manager to defer the delivery of location updates until the specified criteria are met."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/corelocation",
        "doc://com.apple.documentation/documentation/corelocation/cllocationmanager"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1620547-allowdeferredlocationupdatesunti",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1620547,
  "kind": "symbol",
  "metadata": {
    "title": "allowDeferredLocationUpdatesUntilTraveled:timeout:",
    "role": "symbol",
    "roleHeading": "Instance Method",
    "modules": [
      {
        "name": "Core Location"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "6.0",
        "deprecatedAt": "13.0",
        "current": "14.3",
        "deprecated": true
      },
      {
        "name": "macOS",
        "introducedAt": "10.15",
        "deprecatedAt": "10.15",
        "current": "11.1",
        "deprecated": true
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "deprecatedAt": "13.0",
        "current": "14.3",
        "deprecated": true
      }
    ],
    "externalID": "c:objc(cs)CLLocationManager(im)allowDeferredLocationUpdatesUntilTraveled:timeout:",
    "symbolKind": "instm"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/corelocation/cllocationmanager/1620547-allowdeferredlocationupdatesunti"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/corelocation/cllocationmanager/1620547-allowdeferredlocationupdates"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/corelocation": {
      "title": "Core Location",
      "identifier": "doc://com.apple.documentation/documentation/corelocation",
      "url": "/documentation/corelocation",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocationmanager": {
      "title": "CLLocationManager",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanager",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocationmanager",
      "abstract": [
        {
          "type": "text",
          "text": "The object that you use to start and stop the delivery of location-related events to your app."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocationdistancemax": {
      "title": "CLLocationDistanceMax",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationdistancemax",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocationdistancemax"
    },
    "doc://com.apple.documentation/documentation/corelocation/cltimeintervalmax": {
      "title": "CLTimeIntervalMax",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cltimeintervalmax",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cltimeintervalmax",
      "abstract": [
        {
          "type": "text",
          "text": "A value representing an unlimited amount of time. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423537-locationmanager": {
      "title": "locationManager:didFinishDeferredUpdatesWithError:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423537-locationmanager",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocationmanagerdelegate/1423537-locationmanager",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "locationManager:didFinishDeferredUpdatesWithError:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423615-locationmanager": {
      "title": "locationManager:didUpdateLocations:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423615-locationmanager",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocationmanagerdelegate/1423615-locationmanager",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "locationManager:didUpdateLocations:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/kcllocationaccuracybest": {
      "title": "kCLLocationAccuracyBest",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/kcllocationaccuracybest",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/kcllocationaccuracybest"
    },
    "doc://com.apple.documentation/documentation/corelocation/kcllocationaccuracybestfornavigation": {
      "title": "kCLLocationAccuracyBestForNavigation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/kcllocationaccuracybestfornavigation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/kcllocationaccuracybestfornavigation"
    },
    "doc://com.apple.documentation/documentation/corelocation/clerror/kclerrordeferredfailed": {
      "title": "kCLErrorDeferredFailed",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clerror/kclerrordeferredfailed",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clerror/kclerrordeferredfailed"
    },
    "doc://com.apple.documentation/documentation/corelocation/clerror/kclerrordeferredaccuracytoolow": {
      "title": "kCLErrorDeferredAccuracyTooLow",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clerror/kclerrordeferredaccuracytoolow",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clerror/kclerrordeferredaccuracytoolow"
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1423500-distancefilter": {
      "title": "distanceFilter",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1423500-distancefilter",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocationmanager/1423500-distancefilter"
    },
    "doc://com.apple.documentation/documentation/corelocation/kcldistancefilternone": {
      "title": "kCLDistanceFilterNone",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/kcldistancefilternone",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/kcldistancefilternone"
    },
    "doc://com.apple.documentation/documentation/corelocation/clerror/kclerrordeferreddistancefiltered": {
      "title": "kCLErrorDeferredDistanceFiltered",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clerror/kclerrordeferreddistancefiltered",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clerror/kclerrordeferreddistancefiltered"
    },
    "doc://com.apple.documentation/documentation/corelocation/clerror/kclerrordeferredcanceled": {
      "title": "kCLErrorDeferredCanceled",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clerror/kclerrordeferredcanceled",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clerror/kclerrordeferredcanceled"
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocationdistance": {
      "title": "CLLocationDistance",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationdistance",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocationdistance"
    },
    "doc://com.apple.documentation/documentation/foundation/nstimeinterval": {
      "title": "NSTimeInterval",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nstimeinterval",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nstimeinterval"
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1423830-deferredlocationupdatesavailable": {
      "title": "deferredLocationUpdatesAvailable",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1423830-deferredlocationupdatesavailable",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocationmanager/1423830-deferredlocationupdatesavailable",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a Boolean value indicating whether the device supports deferred location updates. "
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "deferredLocationUpdatesAvailable"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1620547-allowdeferredlocationupdatesunti": {
      "title": "allowDeferredLocationUpdatesUntilTraveled:timeout:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1620547-allowdeferredlocationupdatesunti",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocationmanager/1620547-allowdeferredlocationupdatesunti",
      "abstract": [
        {
          "type": "text",
          "text": "Asks the location manager to defer the delivery of location updates until the specified criteria are met."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "allowDeferredLocationUpdatesUntilTraveled:timeout:"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1620565-disallowdeferredlocationupdates": {
      "title": "disallowDeferredLocationUpdates",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1620565-disallowdeferredlocationupdates",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocationmanager/1620565-disallowdeferredlocationupdates",
      "abstract": [
        {
          "type": "text",
          "text": "Cancels the deferral of location updates for this app. "
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "disallowDeferredLocationUpdates"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1423830-deferredlocationupdatesavailable",
        "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1620565-disallowdeferredlocationupdates",
        "doc://com.apple.documentation/documentation/corelocation/cltimeintervalmax"
      ],
      "title": "Deferring Location Updates",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "text",
              "text": "- ("
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "identifier",
              "text": "allowDeferredLocationUpdatesUntilTraveled:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CLLocationDistance",
              "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationdistance",
              "text": "CLLocationDistance"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "distance"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "timeout:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@NSTimeInterval",
              "identifier": "doc://com.apple.documentation/documentation/foundation/nstimeinterval",
              "text": "NSTimeInterval"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "timeout"
            },
            {
              "kind": "text",
              "text": ";"
            }
          ],
          "platforms": [
            "iOS",
            "macOS",
            "Mac Catalyst"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "distance",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The distance (in meters) from the current location that must be travelled before event delivery resumes. To specify an unlimited distance, pass the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationdistancemax"
                },
                {
                  "type": "text",
                  "text": " constant. "
                }
              ]
            }
          ]
        },
        {
          "name": "timeout",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The amount of time (in seconds) from the current time that must pass before event delivery resumes. To specify an unlimited amount of time, pass the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/corelocation/cltimeintervalmax"
                },
                {
                  "type": "text",
                  "text": " constant. "
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Call this method in situations where you want location data with GPS accuracy but do not need to process that data right away. If your app is in the background and the system is able to optimize its power usage, the location manager tells the GPS hardware to store new locations internally until the specified distance or timeout conditions are met. When one or both criteria are met, the location manager ends deferred locations by calling the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423537-locationmanager"
            },
            {
              "type": "text",
              "text": " method of its delegate and delivers the cached locations to the  "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423615-locationmanager"
            },
            {
              "type": "text",
              "text": " method. If your app is in the foreground, the location manager does not defer the deliver of events but does monitor for the specified criteria. If your app moves to the background before the criteria are met, the location manager may begin deferring the delivery of events.  "
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Because deferred updates use the GPS to track location changes, the location manager allows deferred updates only when GPS hardware is available on the device and when the desired accuracy is set to "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/corelocation/kcllocationaccuracybest"
                },
                {
                  "type": "text",
                  "text": " or "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/corelocation/kcllocationaccuracybestfornavigation"
                },
                {
                  "type": "text",
                  "text": ". If the GPS hardware is not available, the location manager reports a "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/corelocation/clerror/kclerrordeferredfailed"
                },
                {
                  "type": "text",
                  "text": " error. If the accuracy is not set to one of the supported values, the location manager reports a "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/corelocation/clerror/kclerrordeferredaccuracytoolow"
                },
                {
                  "type": "text",
                  "text": " error. "
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "In addition, the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1423500-distancefilter"
                },
                {
                  "type": "text",
                  "text": " property of the location manager must be set to "
                },
                {
                  "type": "reference",
                  "isActive": false,
                  "identifier": "doc://com.apple.documentation/documentation/corelocation/kcldistancefilternone"
                },
                {
                  "type": "text",
                  "text": ". If it is set to any other value, the location manager reports a "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/corelocation/clerror/kclerrordeferreddistancefiltered"
                },
                {
                  "type": "text",
                  "text": " error. "
                }
              ]
            }
          ],
          "style": "important"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Start the delivery of location updates before calling this method. The most common place to call this method is in your delegate’s "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423615-locationmanager"
            },
            {
              "type": "text",
              "text": " method. After processing any new locations, call this method if you want to defer future updates until the distance or time criteria are met. If new events arrive and your app is in the background, the events are cached and their delivery is deferred appropriately."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Your delegate’s "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423537-locationmanager"
            },
            {
              "type": "text",
              "text": " method is called exactly once for each time you call this method. If you call this method twice in succession, the location manager cancels the previous deferral before starting the new one. Therefore, you should keep track of whether updates are currently deferred and avoid calling this method multiple times in succession. If you want to change the deferral criteria for any reason, and therefore call this method again, be prepared to receive a "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/clerror/kclerrordeferredcanceled"
            },
            {
              "type": "text",
              "text": " error in your delegate’s "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423537-locationmanager"
            },
            {
              "type": "text",
              "text": " method."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "After calling this method, the location manager may deliver location updates even if the specified distance and timeout criteria are not met. For example, if the caches used to store deferred samples become full, the location manager may deliver the cached samples so it can collect new ones. The delivery of samples does not automatically end deferred mode for your app. The location manager resumes deferred mode when it is able to do so."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Deferred updates are delivered only when the system enters a low power state. Deferred updates do not occur during debugging because Xcode prevents your app from sleeping and thus prevents the system from entering that low power state. "
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}