{
  "abstract": [
    {
      "type": "text",
      "text": "Use region monitoring to determine when the user enters or leaves a geographic region. "
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/corelocation"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 2852172,
  "kind": "article",
  "metadata": {
    "title": "Monitoring the User's Proximity to Geographic Regions",
    "role": "article",
    "roleHeading": "Article",
    "modules": [
      {
        "name": "Core Location"
      }
    ]
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/corelocation": {
      "title": "Core Location",
      "identifier": "doc://com.apple.documentation/documentation/corelocation",
      "url": "/documentation/corelocation",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/corelocation/clcircularregion": {
      "title": "CLCircularRegion",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clcircularregion",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clcircularregion",
      "abstract": [
        {
          "type": "text",
          "text": "A circular geographic region, specified as a center point and radius."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1423656-startmonitoringforregion": {
      "title": "startMonitoringForRegion:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1423656-startmonitoringforregion",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocationmanager/1423656-startmonitoringforregion",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "startMonitoringForRegion:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocationmanager": {
      "title": "CLLocationManager",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanager",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocationmanager"
    },
    "doc://com.apple.documentation/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions#2854905": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions#2854905",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions#2854905",
      "abstract": [
        {
          "type": "text",
          "text": "Monitoring a region around the specified coordinate"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423560-locationmanager": {
      "title": "locationManager:didEnterRegion:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423560-locationmanager",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocationmanagerdelegate/1423560-locationmanager",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "locationManager:didEnterRegion:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423630-locationmanager": {
      "title": "locationManager:didExitRegion:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423630-locationmanager",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocationmanagerdelegate/1423630-locationmanager",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "locationManager:didExitRegion:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/uikit/uiapplicationlaunchoptionskey": {
      "title": "UIApplicationLaunchOptionsKey",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplicationlaunchoptionskey",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiapplicationlaunchoptionskey"
    },
    "doc://com.apple.documentation/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions#2854906": {
      "title": "Listing 2",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions#2854906",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions#2854906",
      "abstract": [
        {
          "type": "text",
          "text": "Handling a region-entered notification"
        }
      ]
    },
    "link-media-2904074": {
      "identifier": "link-media-2904074",
      "type": "link",
      "title": "Figure 1",
      "url": "/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions#2904074"
    },
    "media-2904074": {
      "identifier": "media-2904074",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 243,
            "height": 322
          },
          "url": "https://docs-assets.developer.apple.com/published/9cba7a007f/05f71ff7-f59e-4092-8c08-2f06a66d2195.png"
        }
      ],
      "alt": "A notification that can appear when the user leaves a geographic region",
      "title": "Figure 1",
      "abstract": [
        {
          "type": "text",
          "text": "Notifying the user upon leaving a geographic region"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions": {
      "title": "Monitoring the User's Proximity to Geographic Regions",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions",
      "kind": "article",
      "role": "article",
      "url": "/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions",
      "abstract": [
        {
          "type": "text",
          "text": "Use region monitoring to determine when the user enters or leaves a geographic region. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/clregion": {
      "title": "CLRegion",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clregion",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clregion",
      "abstract": [
        {
          "type": "text",
          "text": "A base class representing an area that can be monitored."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/corelocation/clcircularregion",
        "doc://com.apple.documentation/documentation/corelocation/clregion"
      ],
      "title": "Region Monitoring",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Region monitoring (also known as geofencing) is a way for your app to be alerted when the user enters or exits a geographical region. You might use region monitoring to perform location-related tasks. For example, the Reminders app uses them to trigger reminders when the user arrives at or leaves a specified location, as shown in "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "link-media-2904074"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-2904074",
              "metadata": {
                "anchor": "2904074",
                "title": "Figure 1",
                "abstract": [
                  {
                    "type": "text",
                    "text": "Notifying the user upon leaving a geographic region"
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In iOS, regions are monitored by the system, which wakes up your app as needed when the user crosses a defined region boundary. In macOS, region monitoring works only while the app is running (either in the foreground or background) and the user’s system is awake. The system does not launch Mac apps to deliver region-related notifications."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Define and Monitor a Geographic Region",
          "anchor": "2854901"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A region is a circular area centered on a geographic coordinate, and you define one using a "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/clcircularregion"
            },
            {
              "type": "text",
              "text": " object. The radius of the region object defines its boundary. You define the regions you want to monitor and register them with the system by calling the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanager/1423656-startmonitoringforregion"
            },
            {
              "type": "text",
              "text": " method of your "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanager"
            },
            {
              "type": "text",
              "text": " object. The system monitors your regions until you explicitly ask it to stop or until the device reboots. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions#2854905"
            },
            {
              "type": "text",
              "text": " shows how to configure and register a region centered around a point provided by the caller of the method. The method uses the largest allowed radius to define the boundaries of the region and asks that the system deliver notifications only when the user enters the region.  "
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "func monitorRegionAtLocation(center: CLLocationCoordinate2D, identifier: String ) {    ",
            "    // Make sure the devices supports region monitoring.",
            "    if CLLocationManager.isMonitoringAvailable(for: CLCircularRegion.self) {",
            "        // Register the region.",
            "        let maxDistance = locationManager.maximumRegionMonitoringDistance",
            "        let region = CLCircularRegion(center: center, ",
            "             radius: maxDistance, identifier: identifier)",
            "        region.notifyOnEntry = true",
            "        region.notifyOnExit = false",
            "   ",
            "        locationManager.startMonitoring(for: region)",
            "        ",
            "    }",
            "}"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "2854905",
            "title": "Listing 1",
            "abstract": [
              {
                "type": "text",
                "text": "Monitoring a region around the specified coordinate"
              }
            ]
          }
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Regions are shared resources that rely on specific hardware capabilities. To ensure that all apps can participate in region monitoring, Core Location prevents any single app from monitoring more than 20 regions simultaneously. To work around this limitation, monitor only regions that are close to the user’s current location. As the user moves, update the list based on the user’s new location."
                }
              ]
            }
          ],
          "style": "tip"
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Handle a Region-Related Notification",
          "anchor": "2854900"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Whenever the user crosses the boundary of one of your app's registered regions, the system notifies your app. If an iOS app is not running when the boundary crossing occurs, the system tries to launch it. An iOS app that supports region monitoring must enable the Location updates background mode so that it can be launched in the background. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Boundary crossing notifications are delivered to your location manager's delegate object. Specifically, the location manager calls the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423560-locationmanager"
            },
            {
              "type": "text",
              "text": " or "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanagerdelegate/1423630-locationmanager"
            },
            {
              "type": "text",
              "text": " methods of its delegate. If your app was launched, you must configure a "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocationmanager"
            },
            {
              "type": "text",
              "text": " object and delegate object right away so that you can receive these notifications. To determine whether your app was launched for a location event, look for the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiapplicationlaunchoptionskey"
            },
            {
              "type": "text",
              "text": " in the launch options dictionary."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When determining whether a boundary crossing happened, the system waits to be sure before sending the notification. Specifically, the user must travel a minimum distance over the boundary and remain on the same side of the boundary for at least 20 seconds. These conditions help eliminate spurious calls to your delegate object’s methods."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions#2854906"
            },
            {
              "type": "text",
              "text": " shows a delegate method that is called when the user enters a registered region. Regions have an associated identifier, which this method uses to look up information related to the region and perform the associated action. "
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "func locationManager(_ manager: CLLocationManager, didEnterRegion region: CLRegion) {",
            "    if let region = region as? CLCircularRegion {",
            "        let identifier = region.identifier   ",
            "        triggerTaskAssociatedWithRegionIdentifier(regionID: identifier)",
            "    }",
            "}"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "2854906",
            "title": "Listing 2",
            "abstract": [
              {
                "type": "text",
                "text": "Handling a region-entered notification"
              }
            ]
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Termination of your app (by the user or the system) does not prevent it from being relaunched to handle region boundary crossings. However, when Background App Refresh is disabled, either for your app or for all apps, the user must explicitly launch your app to resume the delivery of all location-related events. "
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}