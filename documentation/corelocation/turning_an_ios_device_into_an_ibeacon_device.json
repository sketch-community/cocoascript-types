{
  "abstract": [
    {
      "type": "text",
      "text": "Broadcast iBeacon signals from an iOS device."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/corelocation"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 2852177,
  "kind": "article",
  "metadata": {
    "title": "Turning an iOS Device into an iBeacon Device",
    "role": "article",
    "roleHeading": "Article",
    "modules": [
      {
        "name": "Core Location"
      }
    ]
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/corelocation": {
      "title": "Core Location",
      "identifier": "doc://com.apple.documentation/documentation/corelocation",
      "url": "/documentation/corelocation",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device#2853106": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device#2853106",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device#2853106",
      "abstract": [
        {
          "type": "text",
          "text": "Generating a UUID from the command line"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/clbeaconregion": {
      "title": "CLBeaconRegion",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clbeaconregion",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clbeaconregion",
      "abstract": [
        {
          "type": "text",
          "text": "A region used to detect the presence of iBeacon devices."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device#2853568": {
      "title": "Listing 2",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device#2853568",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device#2853568",
      "abstract": [
        {
          "type": "text",
          "text": "Configuring your beacon's identity"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corebluetooth/cbperipheralmanager": {
      "title": "CBPeripheralManager",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corebluetooth/cbperipheralmanager",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corebluetooth/cbperipheralmanager"
    },
    "doc://com.apple.documentation/documentation/corebluetooth/cbperipheralmanager/1393252-startadvertising": {
      "title": "startAdvertising:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corebluetooth/cbperipheralmanager/1393252-startadvertising",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corebluetooth/cbperipheralmanager/1393252-startadvertising",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "startAdvertising:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/clbeaconregion/1621494-peripheraldatawithmeasuredpower": {
      "title": "peripheralDataWithMeasuredPower:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clbeaconregion/1621494-peripheraldatawithmeasuredpower",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clbeaconregion/1621494-peripheraldatawithmeasuredpower",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "peripheralDataWithMeasuredPower:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device#2853729": {
      "title": "Listing 3",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device#2853729",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device#2853729",
      "abstract": [
        {
          "type": "text",
          "text": "Advertising your device over Bluetooth"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corebluetooth/cbperipheralmanagerdelegate/1393271-peripheralmanagerdidupdatestate": {
      "title": "peripheralManagerDidUpdateState:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corebluetooth/cbperipheralmanagerdelegate/1393271-peripheralmanagerdidupdatestate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corebluetooth/cbperipheralmanagerdelegate/1393271-peripheralmanagerdidupdatestate",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "peripheralManagerDidUpdateState:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/clbeacon": {
      "title": "CLBeacon",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clbeacon",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clbeacon",
      "abstract": [
        {
          "type": "text",
          "text": "Information about an observed iBeacon device and its relative distance to the userâ€™s device."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/clproximity/clproximityunknown": {
      "title": "CLProximityUnknown",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clproximity/clproximityunknown",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clproximity/clproximityunknown"
    },
    "doc://com.apple.documentation/documentation/corelocation/determining_the_proximity_to_an_ibeacon_device": {
      "title": "Determining the Proximity to an iBeacon Device",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/determining_the_proximity_to_an_ibeacon_device",
      "kind": "article",
      "role": "article",
      "url": "/documentation/corelocation/determining_the_proximity_to_an_ibeacon_device",
      "abstract": [
        {
          "type": "text",
          "text": "Detect beacons and determine the relative distance to them."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device": {
      "title": "Turning an iOS Device into an iBeacon Device",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device",
      "kind": "article",
      "role": "article",
      "url": "/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device",
      "abstract": [
        {
          "type": "text",
          "text": "Broadcast iBeacon signals from an iOS device."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corelocation/clbeaconidentityconstraint": {
      "title": "CLBeaconIdentityConstraint",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/clbeaconidentityconstraint",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/clbeaconidentityconstraint",
      "abstract": [
        {
          "type": "text",
          "text": "Identity characteristics that can match one or more beacons."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/corelocation/determining_the_proximity_to_an_ibeacon_device",
        "doc://com.apple.documentation/documentation/corelocation/clbeacon",
        "doc://com.apple.documentation/documentation/corelocation/clbeaconregion",
        "doc://com.apple.documentation/documentation/corelocation/clbeaconidentityconstraint"
      ],
      "title": "iBeacon",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Any iOS device that supports sharing data using Bluetooth low energy can be turned into an iBeacon. Apps that use their underlying iOS device as an iBeacon must run in the foreground. As a result, use this feature for point-of-sale apps or for apps that are meant to run in the foreground anyway. For other types of iBeacon implementations, use dedicated beacon hardware from third-party manufacturers. To use an iOS device as an iBeacon, you do the following:"
            }
          ]
        },
        {
          "type": "orderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Obtain or generate a 128-bit UUID for your device."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Create a "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/corelocation/clbeaconregion"
                    },
                    {
                      "type": "text",
                      "text": " object containing the UUID value along with appropriate major and minor values for your beacon."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Advertise the beacon information using the Core Bluetooth framework."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Get a UUID for Your Device",
          "anchor": "2853848"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The primary way to identify an iBeacon is from its UUID. When deploying one or more beacons, you assign a UUID to each one that conveys the beaconâ€™s purpose to clients. The exact purpose of a beacon is something you define. For example, a department store chain might use the same UUID for all of its deployed beacons, or each store might be assigned a different UUID. Because detection involves using region monitoring to look for beacons with specific UUIDs, using fewer UUIDs is easier to manage. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To create a new UUID for your iBeacon deployment, use the "
            },
            {
              "type": "codeVoice",
              "code": "uuidgen"
            },
            {
              "type": "text",
              "text": " command-line tool. Open Terminal and type "
            },
            {
              "type": "codeVoice",
              "code": "uuidgen"
            },
            {
              "type": "text",
              "text": " on the command line and press Return. This tool generates a unique 128-bit value and formats it as an ASCII string that is punctuated by hyphens, as shown in "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device#2853106"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "$ uuidgen",
            "39ED98FF-2900-441A-802F-9C398FC199D2 "
          ],
          "syntax": "other",
          "metadata": {
            "anchor": "2853106",
            "title": "Listing 1",
            "abstract": [
              {
                "type": "text",
                "text": "Generating a UUID from the command line"
              }
            ]
          }
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Configure the Beacon Region",
          "anchor": "2853846"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Use a "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/clbeaconregion"
            },
            {
              "type": "text",
              "text": " object to configure your beaconâ€™s identity. You use the beacon region to generate a dictionary of information that you can advertise later over Bluetooth. "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/turning_an_ios_device_into_an_ibeacon_device#2853568"
            },
            {
              "type": "text",
              "text": " shows how to create a beacon region object and fill it with information."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "func createBeaconRegion() -> CLBeaconRegion? {",
            "    let proximityUUID = UUID(uuidString:",
            "                \"39ED98FF-2900-441A-802F-9C398FC199D2\")",
            "    let major : CLBeaconMajorValue = 100",
            "    let minor : CLBeaconMinorValue = 1",
            "    let beaconID = \"com.example.myDeviceRegion\"",
            "        ",
            "    return CLBeaconRegion(proximityUUID: proximityUUID!, ",
            "                major: major, minor: minor, identifier: beaconID)",
            "}"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "2853568",
            "title": "Listing 2",
            "abstract": [
              {
                "type": "text",
                "text": "Configuring your beacon's identity"
              }
            ]
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The UUID, major, and minor values are specific to your iBeacon implementation. You decide the meaning of these values and decide how apps that detect your beacons interpret those values."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Advertise Your Beacon Over Bluetooth",
          "anchor": "2853847"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To broadcast your beaconâ€™s identity from an iOS device, use the Core Bluetooth framework to configure the iOS device as a Bluetooth peripheral. When configured as a peripheral, your iOS device broadcasts its beacon information out to other devices using the Bluetooth hardware. Other devices use that information to perform ranging and detect their proximity to your iOS device."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Add the Core Bluetooth framework to your Xcode project. In your code, create a "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corebluetooth/cbperipheralmanager"
            },
            {
              "type": "text",
              "text": " object and call its "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corebluetooth/cbperipheralmanager/1393252-startadvertising"
            },
            {
              "type": "text",
              "text": " method to begin broadcasting your beacon data. The "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corebluetooth/cbperipheralmanager/1393252-startadvertising"
            },
            {
              "type": "text",
              "text": " method takes a dictionary parameter that contains your beacon information. Call the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/clbeaconregion/1621494-peripheraldatawithmeasuredpower"
            },
            {
              "type": "text",
              "text": " method of the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/clbeaconregion"
            },
            {
              "type": "text",
              "text": " that you created previously to get a dictionary containing the data associated with your beacon."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "func advertiseDevice(region : CLBeaconRegion) {",
            "    let peripheral = CBPeripheralManager(delegate: self, queue: nil)",
            "    let peripheralData = region.peripheralData(withMeasuredPower: nil)",
            "        ",
            "    peripheral.startAdvertising(((peripheralData as NSDictionary) as! [String : Any]))",
            "}"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "2853729",
            "title": "Listing 3",
            "abstract": [
              {
                "type": "text",
                "text": "Advertising your device over Bluetooth"
              }
            ]
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When calling the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/clbeaconregion/1621494-peripheraldatawithmeasuredpower"
            },
            {
              "type": "text",
              "text": " method to obtain your data dictionary, you typically pass "
            },
            {
              "type": "codeVoice",
              "code": "nil"
            },
            {
              "type": "text",
              "text": " to specify the default received signal strength indicator (RSSI) value associated with the iOS device. This parameter represents the signal strength (in decibels) measured from one meter away from the device. You can specify custom values if you need to calibrate the device for better ranging performance in certain environments. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When you create a peripheral manager object, it calls the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corebluetooth/cbperipheralmanagerdelegate/1393271-peripheralmanagerdidupdatestate"
            },
            {
              "type": "text",
              "text": " method of its delegate object. You must implement this delegate method to ensure that Bluetooth low energy is supported and available to use on the iOS device. "
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "After advertising your app as a beacon, your app must continue running in the foreground to broadcast the needed Bluetooth signals. If the user quits the app, the system stops advertising the device as a peripheral over Bluetooth."
                }
              ]
            }
          ],
          "style": "important"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "During ranging, there may be a brief period in which Core Location creates two "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/clbeacon"
            },
            {
              "type": "text",
              "text": " objects for the same iOS device. This behavior occurs because iOS changes the deviceâ€™s Bluetooth identifier periodically to protect the userâ€™s privacy, and one beacon represents the old identifier and one beacon represents the new identifier. Within 2 seconds of the identifier change, the beacon with the old identifier has its proximity property set to "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/clproximity/clproximityunknown"
            },
            {
              "type": "text",
              "text": ". Within 10 seconds, the beacon with the old identifier is no longer reported."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}