{
  "abstract": [
    {
      "type": "text",
      "text": "Returns a composite image based on a dynamically generated list of windows."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coregraphics",
        "doc://com.apple.documentation/documentation/coregraphics/quartz_window_services"
      ],
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coregraphics",
        "doc://com.apple.documentation/documentation/coregraphics/core_graphics_functions"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/coregraphics/1454852-cgwindowlistcreateimage",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1454852,
  "kind": "symbol",
  "metadata": {
    "title": "CGWindowListCreateImage",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Core Graphics"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.5",
        "current": "11.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.1",
        "current": "14.3"
      }
    ],
    "externalID": "c:@F@CGWindowListCreateImage",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/coregraphics/1454852-cgwindowlistcreateimage"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/coregraphics/1454852-cgwindowlistcreateimage"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coregraphics": {
      "title": "Core Graphics",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics",
      "url": "/documentation/coregraphics",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/coregraphics/quartz_window_services": {
      "title": "Quartz Window Services",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/quartz_window_services",
      "url": "/documentation/coregraphics/quartz_window_services",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/coregraphics/core_graphics_functions": {
      "title": "Core Graphics Functions",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/core_graphics_functions",
      "url": "/documentation/coregraphics/core_graphics_functions",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgrectnull": {
      "title": "CGRectNull",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgrectnull",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/cgrectnull"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgrectinfinite": {
      "title": "CGRectInfinite",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgrectinfinite",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/cgrectinfinite"
    },
    "doc://com.apple.documentation/documentation/coregraphics/quartz_window_services/window_list_option_constants": {
      "title": "Window List Option Constants",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/quartz_window_services/window_list_option_constants",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "url": "/documentation/coregraphics/quartz_window_services/window_list_option_constants"
    },
    "doc://com.apple.documentation/documentation/coregraphics/kcgnullwindowid": {
      "title": "kCGNullWindowID",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/kcgnullwindowid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/kcgnullwindowid"
    },
    "doc://com.apple.documentation/documentation/coregraphics/quartz_window_services/window_image_types": {
      "title": "Window Image Types",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/quartz_window_services/window_image_types",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "url": "/documentation/coregraphics/quartz_window_services/window_image_types"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgwindowsharingtype/kcgwindowsharingnone": {
      "title": "kCGWindowSharingNone",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgwindowsharingtype/kcgwindowsharingnone",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/cgwindowsharingtype/kcgwindowsharingnone"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgimageref": {
      "title": "CGImageRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgimageref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/cgimageref"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgrect": {
      "title": "CGRect",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgrect",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/cgrect"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgwindowlistoption": {
      "title": "CGWindowListOption",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgwindowlistoption",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/cgwindowlistoption"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgwindowid": {
      "title": "CGWindowID",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgwindowid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/cgwindowid"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgwindowimageoption": {
      "title": "CGWindowImageOption",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgwindowimageoption",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/cgwindowimageoption"
    },
    "doc://com.apple.documentation/documentation/coregraphics/1455137-cgwindowlistcopywindowinfo": {
      "title": "CGWindowListCopyWindowInfo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1455137-cgwindowlistcopywindowinfo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1455137-cgwindowlistcopywindowinfo",
      "abstract": [
        {
          "type": "text",
          "text": "Generates and returns information about the selected windows in the current user session."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coregraphics/1552209-cgwindowlistcreate": {
      "title": "CGWindowListCreate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1552209-cgwindowlistcreate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1552209-cgwindowlistcreate",
      "abstract": [
        {
          "type": "text",
          "text": "Returns the list of window IDs associated with the specified windows in the current user session. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coregraphics/1455215-cgwindowlistcreatedescriptionfro": {
      "title": "CGWindowListCreateDescriptionFromArray",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1455215-cgwindowlistcreatedescriptionfro",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1455215-cgwindowlistcreatedescriptionfro",
      "abstract": [
        {
          "type": "text",
          "text": "Generates and returns information about windows with the specified window IDs."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coregraphics/1454852-cgwindowlistcreateimage": {
      "title": "CGWindowListCreateImage",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1454852-cgwindowlistcreateimage",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1454852-cgwindowlistcreateimage",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a composite image based on a dynamically generated list of windows."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coregraphics/1455730-cgwindowlistcreateimagefromarray": {
      "title": "CGWindowListCreateImageFromArray",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1455730-cgwindowlistcreateimagefromarray",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1455730-cgwindowlistcreateimagefromarray",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a composite image of the specified windows."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/coregraphics/1455137-cgwindowlistcopywindowinfo",
        "doc://com.apple.documentation/documentation/coregraphics/1552209-cgwindowlistcreate",
        "doc://com.apple.documentation/documentation/coregraphics/1455215-cgwindowlistcreatedescriptionfro",
        "doc://com.apple.documentation/documentation/coregraphics/1455730-cgwindowlistcreateimagefromarray"
      ],
      "title": "Getting Window Information",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CGImageRef",
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgimageref",
              "text": "CGImageRef"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "CGWindowListCreateImage"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CGRect",
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgrect",
              "text": "CGRect"
            },
            {
              "kind": "text",
              "text": " screenBounds, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CGWindowListOption",
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgwindowlistoption",
              "text": "CGWindowListOption"
            },
            {
              "kind": "text",
              "text": " listOption, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CGWindowID",
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgwindowid",
              "text": "CGWindowID"
            },
            {
              "kind": "text",
              "text": " windowID, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CGWindowImageOption",
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgwindowimageoption",
              "text": "CGWindowImageOption"
            },
            {
              "kind": "text",
              "text": " imageOption);"
            }
          ],
          "platforms": [
            "macOS",
            "Mac Catalyst"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "screenBounds",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The rectangle that you want to capture. The coordinates of the rectangle must be specified in screen coordinates, where the screen origin is in the upper-left corner of the main display and y-axis values increase downward. Specify "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgrectnull"
                },
                {
                  "type": "text",
                  "text": " to indicate the minimum rectangle that encloses the specified windows. Specify "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgrectinfinite"
                },
                {
                  "type": "text",
                  "text": " to capture the entire desktop area."
                }
              ]
            }
          ]
        },
        {
          "name": "windowOption",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The options describing which windows to include in the image. Typical options let you choose all windows or windows above or below the window specified in the "
                },
                {
                  "type": "codeVoice",
                  "code": "windowID"
                },
                {
                  "type": "text",
                  "text": " parameter. For more information, see "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coregraphics/quartz_window_services/window_list_option_constants"
                },
                {
                  "type": "text",
                  "text": ". "
                }
              ]
            }
          ]
        },
        {
          "name": "windowID",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The ID of the window to use as a reference point when determining which other windows to include in the image. For options that do not require a reference window, this parameter can be "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coregraphics/kcgnullwindowid"
                },
                {
                  "type": "text",
                  "text": ". "
                }
              ]
            }
          ]
        },
        {
          "name": "imageOption",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The options that determine which parts of the window to capture. If you specified "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgrectnull"
                },
                {
                  "type": "text",
                  "text": " for the "
                },
                {
                  "type": "codeVoice",
                  "code": "screenBounds"
                },
                {
                  "type": "text",
                  "text": " parameter, these options affect the resulting bounding box used for the image. For example, if you include a window’s screen effects in the image, the bounding box may need to be slightly larger to accommodate those effects. For a list of possible options, see "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coregraphics/quartz_window_services/window_image_types"
                },
                {
                  "type": "text",
                  "text": ". "
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A composite image formed from the contents of the specified set of windows. If the windows are unreadable or no windows meet the specified criteria, this function returns an image that is either 0 by 0 pixels in size or is of the specified size but is filled with the transparent black color. If you call this function from outside of a GUI security session or when no window server is running, this function returns "
            },
            {
              "type": "codeVoice",
              "code": "NULL"
            },
            {
              "type": "text",
              "text": ". "
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Any windows that are onscreen but whose sharing setting is set to "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgwindowsharingtype/kcgwindowsharingnone"
            },
            {
              "type": "text",
              "text": " are skipped and not included in the resulting image. If this results in no windows being available in the selected range, this function returns "
            },
            {
              "type": "codeVoice",
              "code": "NULL"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}