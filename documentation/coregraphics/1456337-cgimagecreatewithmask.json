{
  "abstract": [
    {
      "type": "text",
      "text": "Creates a bitmap image from an existing image and an image mask."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coregraphics",
        "doc://com.apple.documentation/documentation/coregraphics/cgimage"
      ],
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coregraphics",
        "doc://com.apple.documentation/documentation/coregraphics/cgimage",
        "doc://com.apple.documentation/documentation/coregraphics/cgimageref"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/coregraphics/1456337-cgimagecreatewithmask",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1456337,
  "kind": "symbol",
  "metadata": {
    "title": "CGImageCreateWithMask",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Core Graphics"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "2.0",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "2.0",
        "current": "15.2"
      },
      {
        "name": "macOS",
        "introducedAt": "10.4",
        "current": "12.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "15.2"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "current": "15.2"
      },
      {
        "name": "watchOS",
        "introducedAt": "2.0",
        "current": "8.3"
      }
    ],
    "externalID": "c:@F@CGImageCreateWithMask",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/coregraphics/1456337-cgimagecreatewithmask"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/coregraphics/cgimage/1456337-masking"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coregraphics": {
      "title": "Core Graphics",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics",
      "url": "/documentation/coregraphics",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgimage": {
      "title": "CGImage",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgimage",
      "url": "/documentation/coregraphics/cgimage",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgimageref": {
      "title": "CGImageRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgimageref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/cgimageref"
    },
    "doc://com.apple.documentation/documentation/coregraphics/1556742-cgimagerelease": {
      "title": "CGImageRelease",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1556742-cgimagerelease",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1556742-cgimagerelease"
    },
    "doc://com.apple.documentation/documentation/coregraphics/1455149-cgimagecreate": {
      "title": "CGImageCreate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1455149-cgimagecreate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1455149-cgimagecreate",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a bitmap image from data supplied by a data provider."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coregraphics/1455615-cgimagecreatecopy": {
      "title": "CGImageCreateCopy",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1455615-cgimagecreatecopy",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1455615-cgimagecreatecopy",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a copy of a bitmap image."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coregraphics/1455355-cgimagecreatecopywithcolorspace": {
      "title": "CGImageCreateCopyWithColorSpace",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1455355-cgimagecreatecopywithcolorspace",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1455355-cgimagecreatecopywithcolorspace",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a copy of a bitmap image, replacing its colorspace."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coregraphics/1454920-cgimagecreatewithjpegdataprovide": {
      "title": "CGImageCreateWithJPEGDataProvider",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1454920-cgimagecreatewithjpegdataprovide",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1454920-cgimagecreatewithjpegdataprovide",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a bitmap image using JPEG-encoded data supplied by a data provider."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coregraphics/1454993-cgimagecreatewithpngdataprovider": {
      "title": "CGImageCreateWithPNGDataProvider",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1454993-cgimagecreatewithpngdataprovider",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1454993-cgimagecreatewithpngdataprovider",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a bitmap image using PNG-encoded data supplied by a data provider."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coregraphics/1454683-cgimagecreatewithimageinrect": {
      "title": "CGImageCreateWithImageInRect",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1454683-cgimagecreatewithimageinrect",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1454683-cgimagecreatewithimageinrect",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a bitmap image using the data contained within a subregion of an existing bitmap image."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coregraphics/1456337-cgimagecreatewithmask": {
      "title": "CGImageCreateWithMask",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1456337-cgimagecreatewithmask",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1456337-cgimagecreatewithmask",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a bitmap image from an existing image and an image mask."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/coregraphics/1454358-cgimagecreatewithmaskingcolors": {
      "title": "CGImageCreateWithMaskingColors",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1454358-cgimagecreatewithmaskingcolors",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coregraphics/1454358-cgimagecreatewithmaskingcolors",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a bitmap image by masking an existing bitmap image with the provided color values."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/coregraphics/1455149-cgimagecreate",
        "doc://com.apple.documentation/documentation/coregraphics/1455615-cgimagecreatecopy",
        "doc://com.apple.documentation/documentation/coregraphics/1455355-cgimagecreatecopywithcolorspace",
        "doc://com.apple.documentation/documentation/coregraphics/1454920-cgimagecreatewithjpegdataprovide",
        "doc://com.apple.documentation/documentation/coregraphics/1454993-cgimagecreatewithpngdataprovider",
        "doc://com.apple.documentation/documentation/coregraphics/1454683-cgimagecreatewithimageinrect",
        "doc://com.apple.documentation/documentation/coregraphics/1454358-cgimagecreatewithmaskingcolors"
      ],
      "title": "Creating Bitmap Images",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CGImageRef",
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgimageref",
              "text": "CGImageRef"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "CGImageCreateWithMask"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CGImageRef",
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgimageref",
              "text": "CGImageRef"
            },
            {
              "kind": "text",
              "text": " image, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CGImageRef",
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgimageref",
              "text": "CGImageRef"
            },
            {
              "kind": "text",
              "text": " mask);"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "image",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The image to apply the "
                },
                {
                  "type": "codeVoice",
                  "code": "mask"
                },
                {
                  "type": "text",
                  "text": " parameter to. This image must not be an image mask and may not have an image mask or masking color associated with it."
                }
              ]
            }
          ]
        },
        {
          "name": "mask",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A mask. If the mask is an image, it must be in the DeviceGray color space, must not have an alpha component, and may not itself be masked by an image mask or a masking color. If the mask is not the same size as the image specified by the "
                },
                {
                  "type": "codeVoice",
                  "code": "image"
                },
                {
                  "type": "text",
                  "text": " parameter, the mask is scaled to fit the image."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "An image created by masking "
            },
            {
              "type": "codeVoice",
              "code": "image"
            },
            {
              "type": "text",
              "text": " with "
            },
            {
              "type": "codeVoice",
              "code": "mask"
            },
            {
              "type": "text",
              "text": ". You are responsible for releasing this object by calling "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/1556742-cgimagerelease"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The resulting image depends on whether the "
            },
            {
              "type": "codeVoice",
              "code": "mask"
            },
            {
              "type": "text",
              "text": " parameter is an image mask or an image. If the "
            },
            {
              "type": "codeVoice",
              "code": "mask"
            },
            {
              "type": "text",
              "text": " parameter is an image mask, then the source samples of the image mask act as an inverse alpha value. That is, if the value of a source sample in the image mask is S, then the corresponding region in "
            },
            {
              "type": "codeVoice",
              "code": "image"
            },
            {
              "type": "text",
              "text": " is blended with the destination using an alpha value of (1-S). For example, if S is 1, then the region is not painted, while if S is 0, the region is fully painted."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If the "
            },
            {
              "type": "codeVoice",
              "code": "mask"
            },
            {
              "type": "text",
              "text": " parameter is an image, then it serves as an alpha mask for blending the image onto the destination. The source samples of "
            },
            {
              "type": "codeVoice",
              "code": "mask"
            },
            {
              "type": "text",
              "text": "' act as an alpha value. If the value of the source sample in mask is S, then the corresponding region in image is blended with the destination with an alpha of S. For example, if S is 0, then the region is not painted, while if S is 1, the region is fully painted."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}