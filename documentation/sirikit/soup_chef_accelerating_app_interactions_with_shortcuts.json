{
  "abstract": [
    {
      "type": "text",
      "text": "Make it easy for people to use Siri with your app by providing shortcuts to your app’s actions."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/sirikit"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 2962419,
  "kind": "article",
  "metadata": {
    "title": "Soup Chef: Accelerating App Interactions with Shortcuts",
    "role": "sampleCode",
    "roleHeading": "Sample Code",
    "modules": [
      {
        "name": "Intents"
      },
      {
        "name": "IntentsUI"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "14.3",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "14.3",
        "current": "15.2"
      },
      {
        "name": "Xcode",
        "introducedAt": "13.0",
        "current": "13.2"
      },
      {
        "name": "watchOS",
        "introducedAt": "7.0",
        "current": "8.3"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "14.3",
        "current": "15.2"
      }
    ]
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/sirikit": {
      "title": "SiriKit",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit",
      "kind": "article",
      "role": "collection",
      "url": "/documentation/sirikit"
    },
    "link-3377544": {
      "title": "Configure app groups",
      "type": "section",
      "identifier": "link-3377544",
      "kind": "article",
      "role": "link",
      "url": "https://help.apple.com/xcode/mac/current/#/dev8dd3880fe"
    },
    "doc://com.apple.documentation/documentation/sirikit/intent_handling_infrastructure/structuring_your_code_to_support_app_extensions": {
      "title": "Structuring Your Code to Support App Extensions",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/intent_handling_infrastructure/structuring_your_code_to_support_app_extensions",
      "kind": "article",
      "role": "article",
      "url": "/documentation/sirikit/intent_handling_infrastructure/structuring_your_code_to_support_app_extensions"
    },
    "doc://com.apple.documentation/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842561": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842561",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842561"
    },
    "doc://com.apple.documentation/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842564": {
      "title": "Listing 2",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842564",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842564"
    },
    "doc://com.apple.documentation/documentation/uikit/uiscenedelegate/3238056-scene": {
      "title": "scene:continueUserActivity:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/uikit/uiscenedelegate/3238056-scene",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/uikit/uiscenedelegate/3238056-scene",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "scene:continueUserActivity:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842566": {
      "title": "Listing 3",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842566",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842566"
    },
    "doc://com.apple.documentation/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842568": {
      "title": "Listing 4",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842568",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842568"
    },
    "doc://com.apple.documentation/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842569": {
      "title": "Listing 5",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842569",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts#3842569"
    },
    "doc://com.apple.documentation/documentation/sirikit/offering_actions_in_the_shortcuts_app": {
      "title": "Offering Actions in the Shortcuts App",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/offering_actions_in_the_shortcuts_app",
      "kind": "article",
      "role": "article",
      "url": "/documentation/sirikit/offering_actions_in_the_shortcuts_app",
      "abstract": [
        {
          "type": "text",
          "text": "Suggest shortcuts users may want to add to Siri or combine with other actions in their own shortcuts."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/adding_user_interactivity_with_siri_shortcuts_and_the_shortcuts_app": {
      "title": "Adding User Interactivity with Siri Shortcuts and the Shortcuts App",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/adding_user_interactivity_with_siri_shortcuts_and_the_shortcuts_app",
      "kind": "article",
      "role": "article",
      "url": "/documentation/sirikit/adding_user_interactivity_with_siri_shortcuts_and_the_shortcuts_app",
      "abstract": [
        {
          "type": "text",
          "text": "Add custom intents and parameters to help users interact more quickly and effectively with Siri and the Shortcuts app."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/donating_shortcuts": {
      "title": "Donating Shortcuts",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/donating_shortcuts",
      "kind": "article",
      "role": "article",
      "url": "/documentation/sirikit/donating_shortcuts",
      "abstract": [
        {
          "type": "text",
          "text": "Tell Siri about shortcuts to actions that the user performed in your app."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/deleting_donated_shortcuts": {
      "title": "Deleting Donated Shortcuts",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/deleting_donated_shortcuts",
      "kind": "article",
      "role": "article",
      "url": "/documentation/sirikit/deleting_donated_shortcuts",
      "abstract": [
        {
          "type": "text",
          "text": "Remove your donations from Siri."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts": {
      "title": "Soup Chef: Accelerating App Interactions with Shortcuts",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts",
      "kind": "article",
      "role": "sampleCode",
      "url": "/documentation/sirikit/soup_chef_accelerating_app_interactions_with_shortcuts",
      "abstract": [
        {
          "type": "text",
          "text": "Make it easy for people to use Siri with your app by providing shortcuts to your app’s actions."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/adding_shortcuts_for_wind_down": {
      "title": "Adding Shortcuts for Wind Down",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/adding_shortcuts_for_wind_down",
      "kind": "article",
      "role": "sampleCode",
      "url": "/documentation/sirikit/adding_shortcuts_for_wind_down",
      "abstract": [
        {
          "type": "text",
          "text": "Reveal your app’s shortcuts inside the Health app."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/ininteraction": {
      "title": "INInteraction",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/ininteraction",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/ininteraction",
      "abstract": [
        {
          "type": "text",
          "text": "An interaction between the user and your app involving an intent object."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/invoiceshortcutcenter": {
      "title": "INVoiceShortcutCenter",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/invoiceshortcutcenter",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/invoiceshortcutcenter",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieve the user's shortcuts and make shortcut suggestions."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/invoiceshortcut": {
      "title": "INVoiceShortcut",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/invoiceshortcut",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/invoiceshortcut",
      "abstract": [
        {
          "type": "text",
          "text": "A shortcut the user added to Siri."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/inshortcutavailabilityoptions": {
      "title": "INShortcutAvailabilityOptions",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inshortcutavailabilityoptions",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inshortcutavailabilityoptions",
      "abstract": [
        {
          "type": "text",
          "text": "Defined contexts in which an intent or activity might be relevant to a user."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/inshortcut": {
      "title": "INShortcut",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inshortcut",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inshortcut",
      "abstract": [
        {
          "type": "text",
          "text": "An object representing an action available in your app that the system may suggest to a user or a user may add to Siri."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/shortcut-related_ui": {
      "title": "Shortcut-Related UI",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/shortcut-related_ui",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/sirikit/shortcut-related_ui",
      "abstract": [
        {
          "type": "text",
          "text": "Incorporate standard buttons and interfaces into your user interface to offer easy shortcut creation."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/watch_and_widget_support": {
      "title": "Watch and Widget Support",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/watch_and_widget_support",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/sirikit/watch_and_widget_support",
      "abstract": [
        {
          "type": "text",
          "text": "Display relevant shortcuts on the Siri watch face and suggest widgets in Smart Stacks."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/siri_event_suggestions": {
      "title": "Siri Event Suggestions",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/siri_event_suggestions",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/sirikit/siri_event_suggestions",
      "abstract": [
        {
          "type": "text",
          "text": "Provide users with current, actionable information connected to a reservation."
        }
      ]
    },
    "https://docs-assets.developer.apple.com/published/399f10f5d2/SoupChefAcceleratingAppInteractionsWithShortcuts.zip": {
      "type": "download",
      "identifier": "https://docs-assets.developer.apple.com/published/399f10f5d2/SoupChefAcceleratingAppInteractionsWithShortcuts.zip",
      "checksum": "a02298b6c048ba4857d8e52d22152da55d9c5e9807a3c3fc7d663be31c10c1a5db6248faaf96bb434551aa0be4a8a94ac033692b5084fb3127c701e788cf07b2",
      "url": "https://docs-assets.developer.apple.com/published/399f10f5d2/SoupChefAcceleratingAppInteractionsWithShortcuts.zip"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "sampleCodeDownload": {
    "action": {
      "overridingTitle": "Download",
      "type": "reference",
      "isActive": true,
      "identifier": "https://docs-assets.developer.apple.com/published/399f10f5d2/SoupChefAcceleratingAppInteractionsWithShortcuts.zip"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/sirikit/offering_actions_in_the_shortcuts_app",
        "doc://com.apple.documentation/documentation/sirikit/adding_user_interactivity_with_siri_shortcuts_and_the_shortcuts_app",
        "doc://com.apple.documentation/documentation/sirikit/donating_shortcuts",
        "doc://com.apple.documentation/documentation/sirikit/deleting_donated_shortcuts",
        "doc://com.apple.documentation/documentation/sirikit/adding_shortcuts_for_wind_down",
        "doc://com.apple.documentation/documentation/sirikit/ininteraction",
        "doc://com.apple.documentation/documentation/sirikit/invoiceshortcutcenter",
        "doc://com.apple.documentation/documentation/sirikit/invoiceshortcut",
        "doc://com.apple.documentation/documentation/sirikit/inshortcutavailabilityoptions",
        "doc://com.apple.documentation/documentation/sirikit/inshortcut",
        "doc://com.apple.documentation/documentation/sirikit/shortcut-related_ui",
        "doc://com.apple.documentation/documentation/sirikit/watch_and_widget_support",
        "doc://com.apple.documentation/documentation/sirikit/siri_event_suggestions"
      ],
      "title": "Shortcuts and Donations",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Soup Chef is the fictitious app from this sample code project. The project shows you how to add shortcuts and personalized phrases to Siri. With shortcuts, users can access features of your app from places such as Spotlight search, Lock screen, and the Siri watch face. With phrases, users can speak to Siri to access your app’s features. For example, a user of Soup Chef may order a bowl of clam chowder by saying to Siri, “Order clam chowder.”"
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Configure the Sample Code Project",
          "anchor": "3842572"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Before you can run Soup Chef, you need to:"
            }
          ]
        },
        {
          "type": "orderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Set the app group name for the SoupChef, SoupChefIntents, SoupChefWatch Extension, and SoupChefIntentsWatch targets to a valid name. For more information on app groups, see "
                    },
                    {
                      "type": "link",
                      "title": "Configure app groups",
                      "destination": "https://help.apple.com/xcode/mac/current/#/dev8dd3880fe"
                    },
                    {
                      "type": "text",
                      "text": "."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Change the value of "
                    },
                    {
                      "type": "codeVoice",
                      "code": "AppGroup"
                    },
                    {
                      "type": "text",
                      "text": " in "
                    },
                    {
                      "type": "codeVoice",
                      "code": "UserDefaults+DataSource.swift"
                    },
                    {
                      "type": "text",
                      "text": " to match your app group name."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Share Code Between the App and App Extension",
          "anchor": "3842573"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The Soup Chef project contains targets for an app and an Intents app extension, which the system uses to handle shortcuts that run in the background. To avoid duplicating code that is common across the two targets, the project includes a shared framework called SoupKit. This framework provides a central location for shared code responsible for tasks such as data management and donating shortcuts. For more information about structuring code, see "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/sirikit/intent_handling_infrastructure/structuring_your_code_to_support_app_extensions"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Identify Common Actions",
          "anchor": "3842574"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Soup Chef has a key feature that people are likely to use frequently: ordering soup. To make it easy for users to place an order for soup, it makes sense for the app to add a shortcut for this feature for use with Siri. By adding the shortcut, Siri can make suggestions to the user based on their previous order history. For example, say the user likes to order tomato soup every Monday around noon. After placing this order a few times using Soup Chef, Siri learns the user’s pattern, and can use that information to predicate when the user might place a similar order. On the following Monday, Siri suggests to the user that they might want to order a bowl of tomato soup from Soup Chef."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Define Custom Intents",
          "anchor": "3842575"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To create a shortcut, the app needs an "
            },
            {
              "type": "codeVoice",
              "code": "OrderSoup"
            },
            {
              "type": "text",
              "text": " intent. However, the system doesn’t provide this type of intent, so Soup Chef provides a custom intent."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Define a custom intent by first adding an Intent Definition file to your Xcode project. Then add the custom intent to the definition file. Soup Chef defines its custom intent as "
            },
            {
              "type": "codeVoice",
              "code": "OrderSoup"
            },
            {
              "type": "text",
              "text": ". The intent has three parameters:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "soup"
                    },
                    {
                      "type": "text",
                      "text": ": The type of soup."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "quantity"
                    },
                    {
                      "type": "text",
                      "text": ": The number of bowls of soup."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "toppings"
                    },
                    {
                      "type": "text",
                      "text": ": Optionals toppings–such as cheese or croutons–to add to the soup."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Soup Chef uses the three parameters to define the different shortcut types. A shortcut type has a title, subtitle, and a set of parameter combinations such as:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "soup"
                    },
                    {
                      "type": "text",
                      "text": " and "
                    },
                    {
                      "type": "codeVoice",
                      "code": "quantity"
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "soup"
                    },
                    {
                      "type": "text",
                      "text": " and "
                    },
                    {
                      "type": "codeVoice",
                      "code": "toppings"
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "soup"
                    },
                    {
                      "type": "text",
                      "text": ", "
                    },
                    {
                      "type": "codeVoice",
                      "code": "toppings"
                    },
                    {
                      "type": "text",
                      "text": ", and "
                    },
                    {
                      "type": "codeVoice",
                      "code": "quantity"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "These types define the schema that Siri uses to identify requests the user makes; for example, “Order tomato soup with cheese.” The parameter combination for this example is: "
            },
            {
              "type": "codeVoice",
              "code": "soup"
            },
            {
              "type": "text",
              "text": " and "
            },
            {
              "type": "codeVoice",
              "code": "toppings"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Soup Chef marks each shortcut type with "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Supports background execution"
                }
              ]
            },
            {
              "type": "text",
              "text": "; this way, the system doesn’t need to open the app to handle the intent. When marked this way, the system uses Soup Chef’s Intents app extension to handle the order. This provides a better user experience because the user never leaves their current screen."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Define Custom Responses",
          "anchor": "3842576"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The "
            },
            {
              "type": "codeVoice",
              "code": "OrderSoup"
            },
            {
              "type": "text",
              "text": " intent includes a set of custom responses that Siri shows to the user. Siri selects the response based on a code returned by the Intents app extension when it confirms or handles the intent. For example, if the user orders a cup of chili and chili isn’t on the menu that day, the extension returns the "
            },
            {
              "type": "codeVoice",
              "code": "failureOutOfStock"
            },
            {
              "type": "text",
              "text": " code. Siri then responds to the user with “Sorry, we’re all out of chili.”"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "if menuItem.attributes.contains(.available) == false {",
            "    //  Here's an example of how to use a custom response for a failure case when a particular soup item is unavailable.",
            "    completion(OrderSoupIntentResponse.failureOutOfStock(soup: soup))",
            "    return",
            "}"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3842561",
            "title": "Listing 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Share Intents Between Targets",
          "anchor": "3842577"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To use a custom intent in an app, Xcode needs to generate source code for the items defined in the Intent Definition file. However, for apps that have a shared framework, like Soup Chef, code generation only needs to happen for the framework target. Generating the code for the shared framework and app causes conflicts due to duplicated code."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To specify which target has the generated source code, use the Intent Classes setting in the Target Membership panel. For Soup Chef, only the SoupKit target uses the Intent Classes setting; all other targets use the No Generated Classes setting. And because SoupKit shares its code with other targets, the other targets can use "
            },
            {
              "type": "codeVoice",
              "code": "OrderSoupIntent"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Donate Shortcuts",
          "anchor": "3842578"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Before Siri can suggest shortcuts to the user, the app must tell Siri about the shortcuts through intent donations. An app makes a donation each time the user performs an action in the app. Soup Chef, for example, donates an "
            },
            {
              "type": "codeVoice",
              "code": "OrderSoupIntent"
            },
            {
              "type": "text",
              "text": " each time the user places an order through the app. Donating the intent each time the user places the order helps Siri learn about the user’s behavior, which helps Siri better predicate when the user may want to order soup again."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "private func donateInteraction(for order: Order) {",
            "    let interaction = INInteraction(intent: order.intent, response: nil)",
            "    ",
            "    // Store the order identifier with the interaction so that it is easy",
            "    // to locate an interaction from an order. When a soup is removed from",
            "    // the menu, the app deletes the interaction so the soup isn't suggested",
            "    // to the user.",
            "    interaction.identifier = order.id.uuidString",
            "    ",
            "    interaction.donate { (error) in",
            "        if error != nil {",
            "            if let error = error as NSError? {",
            "                Logger().debug(\"Interaction donation failed: \\(error)\")",
            "            }",
            "        } else {",
            "            Logger().debug(\"Successfully donated interaction\")",
            "        }",
            "    }",
            "}"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3842564",
            "title": "Listing 2"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Handle Shortcuts",
          "anchor": "3842579"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "As mentioned earlier, to handle a order soup intent, Soup Chef provides an Intents app extension, which handles the intent in the background. This makes it possible for the user to remain on the current screen – such as the Lock screen – while Soup Chef places the order in the background."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "There are times, however, when the app must launch to handle the intent; for example, when the user taps the shortcut in Search. That’s why Soup Chef also handles the order soup intent in its "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/uikit/uiscenedelegate/3238056-scene"
            },
            {
              "type": "text",
              "text": " implementation found in the scene delegate."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "/// The system calls this method when continuing a user activity through the restoration handler",
            "/// in `UISceneDelegate scene(_:continue:)`.",
            "override func restoreUserActivityState(_ activity: NSUserActivity) {",
            "    super.restoreUserActivityState(activity)",
            "",
            "    if activity.activityType == NSUserActivity.viewMenuActivityType {",
            "        ",
            "        // This order came from the \"View Menu\" shortcut that is based on NSUserActivity.",
            "        prepareForUserActivityRestoration() {",
            "            self.performSegue(withIdentifier: SegueIdentifiers.soupMenu.rawValue, sender: nil)",
            "        }",
            "        ",
            "    } else if activity.activityType == NSStringFromClass(OrderSoupIntent.self) {",
            "        ",
            "        // This order started as a shortcut, but isn't complete because the user tapped on the SoupChef Intent UI",
            "        // during the order process. Let the user finish customizing their order.",
            "        prepareForUserActivityRestoration() {",
            "            self.performSegue(withIdentifier: SegueIdentifiers.soupMenu.rawValue, sender: activity)",
            "        }",
            "        ",
            "    } else if activity.activityType == NSUserActivity.orderCompleteActivityType,",
            "             let orderID = activity.userInfo?[NSUserActivity.ActivityKeys.orderID.rawValue] as? UUID,",
            "             let order = soupOrderManager.order(matching: orderID) {",
            "        ",
            "        // This order was just created outside of the main app through an intent.",
            "        // Display the order in the order history.",
            "        prepareForUserActivityRestoration() {",
            "            self.displayOrderDetail(order)",
            "        }",
            "    }",
            "}"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3842566",
            "title": "Listing 3"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Add Phrases to Siri",
          "anchor": "3842580"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Ordering soup based on suggestions from Siri is a great start to expediting soup orders, but Soup Chef goes one step further by letting the user set a voice phrase for a particular order, and adding that phrase to Siri. Afterward, the user can ask Siri to place the order by saying the phrase. For example, the user can add to Siri the phrase, “Clam chowder time,” for the shortcut that orders clam chowder with croutons. The next time the user craves clam chowder, they say to Siri, “Clam chowder time,” and Siri tells Soup Chef to place an order for clam chowder with croutons."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Users can set custom phrases in the Shortcuts app. To make the experience better, however, Soup Chef provides the option to add the phrase directly from the app. From the order history, the user can tap a previous order to view its details. At the bottom of the order details is an "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Add to Siri"
                }
              ]
            },
            {
              "type": "text",
              "text": " button that, when tapped, lets the user set a new phrase. Soup Chef also provides a suggested phrase to help inspire the user."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "addShortcutButton = INUIAddVoiceShortcutButton(style: .automaticOutline)",
            "addShortcutButton.shortcut = INShortcut(intent: orderSoupIntent)",
            "addShortcutButton.delegate = configuration.delegate"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3842568",
            "title": "Listing 4"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If a phrase already exists for the shortcut, the button displays the current phrase, and allows the user to change the phrase directly from Soup Chef by presenting a view controller to edit or delete the current phrase."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "func present(_ editVoiceShortcutViewController: INUIEditVoiceShortcutViewController, for addVoiceShortcutButton: INUIAddVoiceShortcutButton) {",
            "    editVoiceShortcutViewController.delegate = self",
            "    present(editVoiceShortcutViewController, animated: true, completion: nil)",
            "}"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3842569",
            "title": "Listing 5"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Adding shortcuts and phrases are two examples of how your app can accelerate user interactions with Siri. For more information on how your app can leverage Siri, see the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/sirikit"
            },
            {
              "type": "text",
              "text": " developer documentation."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}