{
  "abstract": [
    {
      "type": "text",
      "text": "The handler interface for booking a ride for the user."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/sirikit",
        "doc://com.apple.documentation/documentation/sirikit/ride_booking"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1649617,
  "kind": "symbol",
  "metadata": {
    "title": "INRequestRideIntentHandling",
    "role": "symbol",
    "roleHeading": "Protocol",
    "modules": [
      {
        "name": "Intents"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "10.0",
        "current": "14.3"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "14.3"
      },
      {
        "name": "watchOS",
        "introducedAt": "3.2",
        "current": "7.2"
      }
    ],
    "externalID": "c:objc(pl)INRequestRideIntentHandling",
    "symbolKind": "intf"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/sirikit/inrequestrideintenthandling"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/sirikit/inrequestrideintenthandling"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/sirikit": {
      "title": "SiriKit",
      "identifier": "doc://com.apple.documentation/documentation/sirikit",
      "url": "/documentation/sirikit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/sirikit/ride_booking": {
      "title": "Ride Booking",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/ride_booking",
      "url": "/documentation/sirikit/ride_booking",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/sirikit/inrequestrideintent": {
      "title": "INRequestRideIntent",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintent",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inrequestrideintent",
      "abstract": [
        {
          "type": "text",
          "text": "A request to book the specified ride from your service."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/inridestatus": {
      "title": "INRideStatus",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inridestatus",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inridestatus"
    },
    "doc://com.apple.documentation/documentation/sirikit/inrequestrideintentresponse": {
      "title": "INRequestRideIntentResponse",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintentresponse",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inrequestrideintentresponse",
      "abstract": [
        {
          "type": "text",
          "text": "Your app’s response to a request ride intent."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling#1942441": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling#1942441",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/sirikit/inrequestrideintenthandling#1942441",
      "abstract": [
        {
          "type": "text",
          "text": "Booking a ride request"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/nsuseractivity": {
      "title": "NSUserActivity",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsuseractivity",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsuseractivity"
    },
    "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling": {
      "title": "INRequestRideIntentHandling",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inrequestrideintenthandling",
      "abstract": [
        {
          "type": "text",
          "text": "The handler interface for booking a ride for the user."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/objectivec/1418956-nsobject": {
      "title": "NSObject",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/objectivec/1418956-nsobject",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/objectivec/1418956-nsobject"
    },
    "doc://com.apple.documentation/documentation/sirikit/inridesharingdomainhandling": {
      "title": "INRidesharingDomainHandling",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inridesharingdomainhandling",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inridesharingdomainhandling"
    },
    "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1902428-resolvepickuplocationforrequestr": {
      "title": "resolvePickupLocationForRequestRide:withCompletion:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1902428-resolvepickuplocationforrequestr",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inrequestrideintenthandling/1902428-resolvepickuplocationforrequestr",
      "required": false,
      "abstract": [
        {
          "type": "text",
          "text": "Resolves the pickup location for the ride."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "resolvePickupLocationForRequestRide:withCompletion:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/2838715-resolvescheduledpickuptimeforreq": {
      "title": "resolveScheduledPickupTimeForRequestRide:withCompletion:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/2838715-resolvescheduledpickuptimeforreq",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inrequestrideintenthandling/2838715-resolvescheduledpickuptimeforreq",
      "required": false,
      "abstract": [
        {
          "type": "text",
          "text": "Resolves the pickup time for the ride."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "resolveScheduledPickupTimeForRequestRide:withCompletion:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1902427-resolvedropofflocationforrequest": {
      "title": "resolveDropOffLocationForRequestRide:withCompletion:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1902427-resolvedropofflocationforrequest",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inrequestrideintenthandling/1902427-resolvedropofflocationforrequest",
      "required": false,
      "abstract": [
        {
          "type": "text",
          "text": "Resolves the drop-off location for the ride."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "resolveDropOffLocationForRequestRide:withCompletion:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1902429-resolverideoptionnameforrequestr": {
      "title": "resolveRideOptionNameForRequestRide:withCompletion:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1902429-resolverideoptionnameforrequestr",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inrequestrideintenthandling/1902429-resolverideoptionnameforrequestr",
      "required": false,
      "abstract": [
        {
          "type": "text",
          "text": "Resolves the user’s selected ride option."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "resolveRideOptionNameForRequestRide:withCompletion:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1902425-resolvepartysizeforrequestride": {
      "title": "resolvePartySizeForRequestRide:withCompletion:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1902425-resolvepartysizeforrequestride",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inrequestrideintenthandling/1902425-resolvepartysizeforrequestride",
      "required": false,
      "abstract": [
        {
          "type": "text",
          "text": "Resolves the number of passengers for the ride."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "resolvePartySizeForRequestRide:withCompletion:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1649612-confirmrequestride": {
      "title": "confirmRequestRide:completion:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1649612-confirmrequestride",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inrequestrideintenthandling/1649612-confirmrequestride",
      "required": false,
      "abstract": [
        {
          "type": "text",
          "text": "Confirms that you can book the ride."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "confirmRequestRide:completion:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1649625-handlerequestride": {
      "title": "handleRequestRide:completion:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1649625-handlerequestride",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/sirikit/inrequestrideintenthandling/1649625-handlerequestride",
      "required": true,
      "abstract": [
        {
          "type": "text",
          "text": "Handles the booking of the ride."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "handleRequestRide:completion:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "relationshipsSections": [
    {
      "kind": "relationships",
      "title": "Inherits From",
      "type": "inheritsFrom",
      "identifiers": [
        "doc://com.apple.documentation/documentation/objectivec/1418956-nsobject"
      ]
    },
    {
      "kind": "relationships",
      "title": "Inherited By",
      "type": "inheritedBy",
      "identifiers": [
        "doc://com.apple.documentation/documentation/sirikit/inridesharingdomainhandling"
      ]
    }
  ],
  "topicSections": [
    {
      "kind": "taskGroup",
      "title": "Resolving the Intent Parameters",
      "identifiers": [
        "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1902428-resolvepickuplocationforrequestr",
        "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/2838715-resolvescheduledpickuptimeforreq",
        "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1902427-resolvedropofflocationforrequest",
        "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1902429-resolverideoptionnameforrequestr",
        "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1902425-resolvepartysizeforrequestride"
      ]
    },
    {
      "kind": "taskGroup",
      "title": "Confirming the Response",
      "identifiers": [
        "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1649612-confirmrequestride"
      ]
    },
    {
      "kind": "taskGroup",
      "title": "Handling the Intent",
      "identifiers": [
        "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling/1649625-handlerequestride"
      ]
    }
  ],
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/sirikit/inrequestrideintent",
        "doc://com.apple.documentation/documentation/sirikit/inrequestrideintentresponse"
      ],
      "title": "Request a Ride",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "@protocol"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "INRequestRideIntentHandling"
            }
          ],
          "platforms": [
            "iOS",
            "Mac Catalyst",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Use the methods of the "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling"
            },
            {
              "type": "text",
              "text": " protocol to resolve, confirm, and handle requests to book a ride using your service. Adopt this protocol in an object of your Intents extension that is capable of initiating the booking process with your service. SiriKit calls the methods of your object to resolve the parameters to your ride-related information and to book the ride upon confirmation by the user."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Ride requests have many items to resolve. You should resolve all options in some manner, but you may omit options that are not relevant to your service. For example, if your service transports cargo instead of passengers, you might ignore the party size option. For ride requests, you must resolve the following items:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Pickup location"
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Drop-off location"
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Party size"
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Ride option"
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Payment method"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Maps does not require you to confirm the contents of a get ride status intent before handling it. User interactions drive the selection of data in Maps, ensuring that the data Maps places into an intent object is already valid."
                }
              ]
            }
          ],
          "style": "note",
          "name": "Note"
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Handling a Ride Request",
          "anchor": "1682359"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Handling a ride request involves booking the ride with your service and providing SiriKit with the status of the booking. The details of how you book rides through your service are up to you. You need to schedule the ride, find a vehicle and a driver, and arrange payment from the user. The "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintent"
            },
            {
              "type": "text",
              "text": " object contains information about what the user needs. Pass the information in that object to your service and use the results to configure the response object you return to SiriKit. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintenthandling#1942441"
            },
            {
              "type": "text",
              "text": " shows an example of how you might book a ride and provide a response. Because booking the actual ride is a custom process, the example calls several custom methods to implement key phases of that process. The first of these methods uses information from the intent object to register the request with a fictional service and retrieve an ID string identifying the request. Use that ID string to retrieve specific information from the service regarding the vehicle type, driver, and ride option. Use all of the retrieved information to build the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/sirikit/inridestatus"
            },
            {
              "type": "text",
              "text": " object that and add the status object to the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintentresponse"
            },
            {
              "type": "text",
              "text": " object passed back to SiriKit."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "- (void)handleRequestRide:(INRequestRideIntent *)requestRideIntent",
            "       completion:(void (^)(INRequestRideIntentResponse *requestRideIntentResponse))completion {",
            "   INRideStatus* status = [[INRideStatus alloc] init];",
            " ",
            "   // Create the request in my app's ride booking software.",
            "   // Get the resulting request ID to use for configuring the response.",
            "   status.rideIdentifier =",
            "      [self createNewRideRequestWithStartingLocation:requestRideIntent.pickupLocation",
            "                                      endingLocation:requestRideIntent.dropOffLocation",
            "                                           partySize:requestRideIntent.partySize",
            "                                       paymentMethod:requestRideIntent.paymentMethod];",
            " ",
            "   // Configure the pickup and dropoff information.",
            "   status.estimatedPickupDate = [self estimatedPickupDateForRideRequest:status.rideIdentifier];",
            "   status.pickupLocation = requestRideIntent.pickupLocation;",
            "   status.dropOffLocation = requestRideIntent.dropOffLocation;",
            " ",
            "   // Retrieve information about the assigned vehicle and driver (if any).",
            "   status.vehicle = [self vehicleForRideRequest:status.rideIdentifier];",
            "   status.driver = [self driverForRideRequest:status.rideIdentifier];",
            " ",
            "   // Configure the vehicle type and pricing.",
            "    status.rideOption = [self rideOptionForRideRequest:status.rideIdentifier];",
            " ",
            "   // Commit the request and get the current status.",
            "   status.phase = [self completeBookingForRideRequest:status.rideIdentifier];",
            " ",
            "   // Use the status to determine the success or failure of the request.",
            "   INRequestRideIntentResponseCode responseCode;",
            "   if (status.phase == INRidePhaseReceived)",
            "      responseCode = INRequestRideIntentResponseCodeInProgress;",
            "   else if (status.phase == INRidePhaseConfirmed)",
            "      responseCode = INRequestRideIntentResponseCodeSuccess;",
            "   else",
            "      responseCode = INRequestRideIntentResponseCodeFailure;",
            " ",
            "   // Create the response object and fill it with the status information.",
            "   INRequestRideIntentResponse* response = [[INRequestRideIntentResponse alloc]",
            "                          initWithCode:responseCode userActivity:nil];",
            "   response.rideStatus = status;",
            " ",
            "   // Return the response to SiriKit.",
            "   completion(response);",
            "}"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "1942441",
            "title": "Listing 1",
            "abstract": [
              {
                "type": "text",
                "text": "Booking a ride request"
              }
            ]
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When creating responses, providing an "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsuseractivity"
            },
            {
              "type": "text",
              "text": " object is optional and necessary only when you want to include custom information for your app. If you specify "
            },
            {
              "type": "codeVoice",
              "code": "nil"
            },
            {
              "type": "text",
              "text": ", SiriKit creates a user activity object for you as needed. For more information on configuring the response object, see "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/sirikit/inrequestrideintentresponse"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}