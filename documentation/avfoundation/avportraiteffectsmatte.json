{
  "abstract": [
    {
      "type": "text",
      "text": "An auxiliary image used to separate foreground from background with high resolution."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/avfoundation",
        "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 2976119,
  "kind": "symbol",
  "metadata": {
    "title": "AVPortraitEffectsMatte",
    "role": "symbol",
    "roleHeading": "Class",
    "modules": [
      {
        "name": "AVFoundation"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "12.0",
        "current": "14.3"
      },
      {
        "name": "macOS",
        "introducedAt": "10.14",
        "current": "11.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "14.3"
      },
      {
        "name": "tvOS",
        "introducedAt": "12.0",
        "current": "14.3"
      },
      {
        "name": "watchOS",
        "introducedAt": "5.0",
        "current": "7.2"
      }
    ],
    "externalID": "c:objc(cs)AVPortraitEffectsMatte",
    "symbolKind": "cl"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/avfoundation/avportraiteffectsmatte"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/avfoundation/avportraiteffectsmatte"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/avfoundation": {
      "title": "AVFoundation",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation",
      "url": "/documentation/avfoundation",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture": {
      "title": "Cameras and Media Capture",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture",
      "url": "/documentation/avfoundation/cameras_and_media_capture",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "link-media-3030223": {
      "identifier": "link-media-3030223",
      "type": "link",
      "title": "Figure 1",
      "url": "/documentation/avfoundation/avportraiteffectsmatte#3030223"
    },
    "media-3030223": {
      "identifier": "media-3030223",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 511,
            "height": 278
          },
          "url": "https://docs-assets.developer.apple.com/published/232dc3f5ad/efcb47fe-a577-4661-a16e-5e791ff4f61d.png"
        }
      ],
      "alt": "Zoomed in photo showing the fine detail in a portrait effects matte image",
      "title": "Figure 1"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte#3027380": {
      "title": "Table 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte#3027380",
      "kind": "article",
      "role": "table",
      "url": "/documentation/avfoundation/avportraiteffectsmatte#3027380"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/configuring_camera_capture_to_collect_a_portrait_effects_matte": {
      "title": "Configuring Camera Capture to Collect a Portrait Effects Matte",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/configuring_camera_capture_to_collect_a_portrait_effects_matte",
      "kind": "article",
      "role": "article",
      "url": "/documentation/avfoundation/avportraiteffectsmatte/configuring_camera_capture_to_collect_a_portrait_effects_matte",
      "abstract": [
        {
          "type": "text",
          "text": "Prepare your app to capture a portrait effects matte when taking photos."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/extracting_portrait_effects_matte_image_data_from_a_photo": {
      "title": "Extracting Portrait Effects Matte Image Data from a Photo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/extracting_portrait_effects_matte_image_data_from_a_photo",
      "kind": "article",
      "role": "article",
      "url": "/documentation/avfoundation/avportraiteffectsmatte/extracting_portrait_effects_matte_image_data_from_a_photo",
      "abstract": [
        {
          "type": "text",
          "text": "Check for portrait effects matte metadata in existing images."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/objectivec/nsobject": {
      "title": "NSObject",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/objectivec/nsobject",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/objectivec/nsobject"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976125-portraiteffectsmattefromdictiona": {
      "title": "portraitEffectsMatteFromDictionaryRepresentation:error:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976125-portraiteffectsmattefromdictiona",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avportraiteffectsmatte/2976125-portraiteffectsmattefromdictiona",
      "abstract": [
        {
          "type": "text",
          "text": "Initializes a portrait effects matte instance from auxiliary image information in an image file."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "portraitEffectsMatteFromDictionaryRepresentation:error:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976123-portraiteffectsmattebyapplyingex": {
      "title": "portraitEffectsMatteByApplyingExifOrientation:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976123-portraiteffectsmattebyapplyingex",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avportraiteffectsmatte/2976123-portraiteffectsmattebyapplyingex",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a derivative portrait effects matte after applying the specified EXIF orientation."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "portraitEffectsMatteByApplyingExifOrientation:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976124-portraiteffectsmattebyreplacingp": {
      "title": "portraitEffectsMatteByReplacingPortraitEffectsMatteWithPixelBuffer:error:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976124-portraiteffectsmattebyreplacingp",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avportraiteffectsmatte/2976124-portraiteffectsmattebyreplacingp",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a portrait effects matte by wrapping the replacement pixel buffer."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "portraitEffectsMatteByReplacingPortraitEffectsMatteWithPixelBuffer:error:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976121-mattingimage": {
      "title": "mattingImage",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976121-mattingimage",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avportraiteffectsmatte/2976121-mattingimage",
      "abstract": [
        {
          "type": "text",
          "text": "The portrait effects matte's internal image, formatted as a pixel buffer."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976122-pixelformattype": {
      "title": "pixelFormatType",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976122-pixelformattype",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avportraiteffectsmatte/2976122-pixelformattype",
      "abstract": [
        {
          "type": "text",
          "text": "The pixel format type of this portrait effects matte's internal image."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976120-dictionaryrepresentationforauxil": {
      "title": "dictionaryRepresentationForAuxiliaryDataType:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976120-dictionaryrepresentationforauxil",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avportraiteffectsmatte/2976120-dictionaryrepresentationforauxil",
      "abstract": [
        {
          "type": "text",
          "text": "A dictionary of primitive map information used for writing an image file with a portrait effects matte."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "dictionaryRepresentationForAuxiliaryDataType:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture/capturing_photos_with_depth": {
      "title": "Capturing Photos with Depth",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture/capturing_photos_with_depth",
      "kind": "article",
      "role": "article",
      "url": "/documentation/avfoundation/cameras_and_media_capture/capturing_photos_with_depth",
      "abstract": [
        {
          "type": "text",
          "text": "Get a depth map with a photo to create effects like the system camera’s Portrait mode (on compatible devices)."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture/avcamfilter_applying_filters_to_a_capture_stream": {
      "title": "AVCamFilter: Applying Filters to a Capture Stream",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture/avcamfilter_applying_filters_to_a_capture_stream",
      "kind": "article",
      "role": "sampleCode",
      "url": "/documentation/avfoundation/cameras_and_media_capture/avcamfilter_applying_filters_to_a_capture_stream",
      "abstract": [
        {
          "type": "text",
          "text": "Render a capture stream with rose-colored filtering and depth effects."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture/streaming_depth_data_from_the_truedepth_camera": {
      "title": "Streaming Depth Data from the TrueDepth Camera",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture/streaming_depth_data_from_the_truedepth_camera",
      "kind": "article",
      "role": "sampleCode",
      "url": "/documentation/avfoundation/cameras_and_media_capture/streaming_depth_data_from_the_truedepth_camera",
      "abstract": [
        {
          "type": "text",
          "text": "Visualize depth data in 2D and 3D from the TrueDepth camera."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcapturedepthdataoutput": {
      "title": "AVCaptureDepthDataOutput",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturedepthdataoutput",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcapturedepthdataoutput",
      "abstract": [
        {
          "type": "text",
          "text": "A capture output that records scene depth information on compatible camera devices."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avdepthdata": {
      "title": "AVDepthData",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avdepthdata",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avdepthdata",
      "abstract": [
        {
          "type": "text",
          "text": "A container for per-pixel distance or disparity information captured by compatible camera devices."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte": {
      "title": "AVPortraitEffectsMatte",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avportraiteffectsmatte",
      "abstract": [
        {
          "type": "text",
          "text": "An auxiliary image used to separate foreground from background with high resolution."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avsemanticsegmentationmatte": {
      "title": "AVSemanticSegmentationMatte",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avsemanticsegmentationmatte",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avsemanticsegmentationmatte",
      "abstract": [
        {
          "type": "text",
          "text": "An object that wraps a matting image for a particular semantic segmentation."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "relationshipsSections": [
    {
      "kind": "relationships",
      "title": "Inherits From",
      "type": "inheritsFrom",
      "identifiers": [
        "doc://com.apple.documentation/documentation/objectivec/nsobject"
      ]
    }
  ],
  "topicSections": [
    {
      "kind": "taskGroup",
      "title": "Creating a Portrait Effects Matte",
      "identifiers": [
        "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/configuring_camera_capture_to_collect_a_portrait_effects_matte",
        "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976125-portraiteffectsmattefromdictiona",
        "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976123-portraiteffectsmattebyapplyingex",
        "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976124-portraiteffectsmattebyreplacingp"
      ]
    },
    {
      "kind": "taskGroup",
      "title": "Examining a Portrait Effects Matte",
      "identifiers": [
        "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/extracting_portrait_effects_matte_image_data_from_a_photo",
        "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976121-mattingimage",
        "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976122-pixelformattype",
        "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/2976120-dictionaryrepresentationforauxil"
      ]
    }
  ],
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture/capturing_photos_with_depth",
        "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture/avcamfilter_applying_filters_to_a_capture_stream",
        "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture/streaming_depth_data_from_the_truedepth_camera",
        "doc://com.apple.documentation/documentation/avfoundation/avcapturedepthdataoutput",
        "doc://com.apple.documentation/documentation/avfoundation/avdepthdata",
        "doc://com.apple.documentation/documentation/avfoundation/avsemanticsegmentationmatte"
      ],
      "title": "Depth Data Capture",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "@interface"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "AVPortraitEffectsMatte"
            },
            {
              "kind": "text",
              "text": " : "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSObject",
              "identifier": "doc://com.apple.documentation/documentation/objectivec/nsobject",
              "text": "NSObject"
            }
          ],
          "platforms": [
            "iOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Before iOS 11, the iPhone camera software used depth maps to render a shallow depth of field (the "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "bokeh"
                }
              ]
            },
            {
              "type": "text",
              "text": " effect) into still images taken in Portrait Mode before discarding the maps. Because the effect was part of the photo, you couldn’t access the maps separately, as metadata, for photos taken by devices running iOS 10 or earlier."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Starting in iOS 11, apps accessing the photo library can use images containing embedded auxiliary depth maps to render creative depth effects, such as forced perspective, or image projection from 2D to 3D space. These depth maps are low-resolution compared to the full-resolution RGB image. As such, the depth effects you can render are limited by the resolution and accuracy of the maps. Fine detail, such as hair, is challenging to preserve faithfully at the resolution of these depth maps. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Starting in iOS 12, the portrait effects matte helps achieve this fine-grain level of detail."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3030223",
              "metadata": {
                "anchor": "3030223",
                "title": "Figure 1"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "type": "table",
          "header": "none",
          "rows": [
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "strong",
                      "inlineContent": [
                        {
                          "type": "text",
                          "text": "Camera type"
                        }
                      ]
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "strong",
                      "inlineContent": [
                        {
                          "type": "text",
                          "text": "RGB image resolution"
                        }
                      ]
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "strong",
                      "inlineContent": [
                        {
                          "type": "text",
                          "text": "Depth map resolution"
                        }
                      ]
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "strong",
                      "inlineContent": [
                        {
                          "type": "text",
                          "text": "Portrait effects matte resolution"
                        }
                      ]
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Rear dual camera"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "4032 x 3024"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "768 x 576"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "2016 x 1512"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "TrueDepth camera"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "3088 x 2320"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "640 x 480"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "1544 x 1160"
                    }
                  ]
                }
              ]
            ]
          ],
          "metadata": {
            "anchor": "3027380",
            "title": "Table 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Using the auxiliary matte image, you can improve the quality of rendered portrait effects, such as Natural Light, Studio Light, Contour Light, Stage Light, and Stage Light Mono."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Unlike the depth map, the portrait effects matte isn’t intended to faithfully preserve all gradations of depth in the scene. It’s a depth-guided, people-focused segmentation mask generated from a proprietary Apple neural network trained to detect people. It separates an individual in the foreground from whatever is in the background, with greater detail and clarity than with the depth map alone. It achieves this clarity in part because the matte image has higher resolution than the depth map."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For information about capturing the portrait effects matte, see "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/configuring_camera_capture_to_collect_a_portrait_effects_matte"
            },
            {
              "type": "text",
              "text": ". To learn how to extract a portrait effects matte from photos previously captured in portrait mode on a device running iOS 12, see "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avportraiteffectsmatte/extracting_portrait_effects_matte_image_data_from_a_photo"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}