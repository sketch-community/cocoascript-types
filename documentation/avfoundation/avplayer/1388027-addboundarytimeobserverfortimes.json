{
  "abstract": [
    {
      "type": "text",
      "text": "Requests the invocation of a block when specified times are traversed during normal playback."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/avfoundation",
        "doc://com.apple.documentation/documentation/avfoundation/media_playback_and_selection",
        "doc://com.apple.documentation/documentation/avfoundation/avplayer"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/avfoundation/avplayer/1388027-addboundarytimeobserverfortimes",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1388027,
  "kind": "symbol",
  "metadata": {
    "title": "addBoundaryTimeObserverForTimes:queue:usingBlock:",
    "role": "symbol",
    "roleHeading": "Instance Method",
    "modules": [
      {
        "name": "AVFoundation"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "4.0",
        "current": "14.3"
      },
      {
        "name": "macOS",
        "introducedAt": "10.7",
        "current": "11.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "14.3"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "current": "14.3"
      },
      {
        "name": "watchOS",
        "introducedAt": "7.0",
        "current": "7.2"
      }
    ],
    "externalID": "c:objc(cs)AVPlayer(im)addBoundaryTimeObserverForTimes:queue:usingBlock:",
    "symbolKind": "instm"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/avfoundation/avplayer/1388027-addboundarytimeobserverfortimes"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/avfoundation/avplayer/1388027-addboundarytimeobserver"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/avfoundation": {
      "title": "AVFoundation",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation",
      "url": "/documentation/avfoundation",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/avfoundation/media_playback_and_selection": {
      "title": "Media Playback and Selection",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/media_playback_and_selection",
      "url": "/documentation/avfoundation/media_playback_and_selection",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayer": {
      "title": "AVPlayer",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayer",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayer",
      "abstract": [
        {
          "type": "text",
          "text": "An object that provides the interface to control the playerâ€™s transport behavior."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayer/1387552-removetimeobserver": {
      "title": "removeTimeObserver:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayer/1387552-removetimeobserver",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayer/1387552-removetimeobserver",
      "abstract": [
        {
          "type": "text",
          "text": "Cancels a previously registered periodic or boundary time observer."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "removeTimeObserver:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayer/1390404-currenttime": {
      "title": "currentTime",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayer/1390404-currenttime",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayer/1390404-currenttime",
      "abstract": [
        {
          "type": "text",
          "text": "Returns the current time of the current player item."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "currentTime"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayer/1388027-addboundarytimeobserverfortimes#2556045": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayer/1388027-addboundarytimeobserverfortimes#2556045",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/avfoundation/avplayer/1388027-addboundarytimeobserverfortimes#2556045"
    },
    "doc://com.apple.documentation/documentation/coremedia/cmtime": {
      "title": "CMTime",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/coremedia/cmtime",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/coremedia/cmtime"
    },
    "doc://com.apple.documentation/documentation/objectivec/nil-2gl": {
      "title": "nil",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/objectivec/nil-2gl",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/objectivec/nil-2gl"
    },
    "doc://com.apple.documentation/documentation/foundation/nsarray": {
      "title": "NSArray",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsarray",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsarray"
    },
    "doc://com.apple.documentation/documentation/foundation/nsvalue": {
      "title": "NSValue",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsvalue",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsvalue"
    },
    "doc://com.apple.documentation/documentation/dispatch/dispatch_queue_t": {
      "title": "dispatch_queue_t",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_queue_t",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/dispatch/dispatch_queue_t"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayer/1385829-addperiodictimeobserverforinterv": {
      "title": "addPeriodicTimeObserverForInterval:queue:usingBlock:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayer/1385829-addperiodictimeobserverforinterv",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayer/1385829-addperiodictimeobserverforinterv",
      "abstract": [
        {
          "type": "text",
          "text": "Requests the periodic invocation of a given block during playback to report changing time."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "addPeriodicTimeObserverForInterval:queue:usingBlock:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayer/1388027-addboundarytimeobserverfortimes": {
      "title": "addBoundaryTimeObserverForTimes:queue:usingBlock:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayer/1388027-addboundarytimeobserverfortimes",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayer/1388027-addboundarytimeobserverfortimes",
      "abstract": [
        {
          "type": "text",
          "text": "Requests the invocation of a block when specified times are traversed during normal playback."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "addBoundaryTimeObserverForTimes:queue:usingBlock:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/avfoundation/avplayer/1390404-currenttime",
        "doc://com.apple.documentation/documentation/avfoundation/avplayer/1385829-addperiodictimeobserverforinterv",
        "doc://com.apple.documentation/documentation/avfoundation/avplayer/1387552-removetimeobserver"
      ],
      "title": "Observing Player Time",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "text",
              "text": "- ("
            },
            {
              "kind": "keyword",
              "text": "id"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "identifier",
              "text": "addBoundaryTimeObserverForTimes:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSArray",
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsarray",
              "text": "NSArray"
            },
            {
              "kind": "text",
              "text": "<"
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSValue",
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsvalue",
              "text": "NSValue"
            },
            {
              "kind": "text",
              "text": " *> *"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "times"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "queue:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@dispatch_queue_t",
              "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_queue_t",
              "text": "dispatch_queue_t"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "queue"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "usingBlock:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": " (^)("
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "block"
            },
            {
              "kind": "text",
              "text": ";"
            }
          ],
          "platforms": [
            "iOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "times",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "An array of "
                },
                {
                  "type": "codeVoice",
                  "code": "NSValue"
                },
                {
                  "type": "text",
                  "text": " objects containing "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/coremedia/cmtime"
                },
                {
                  "type": "text",
                  "text": " values representing the times at which to invoke "
                },
                {
                  "type": "codeVoice",
                  "code": "block"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            }
          ]
        },
        {
          "name": "queue",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A "
                },
                {
                  "type": "emphasis",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "serial"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " queue onto which "
                },
                {
                  "type": "codeVoice",
                  "code": "block"
                },
                {
                  "type": "text",
                  "text": " should be enqueued. Passing a concurrent queue is not supported and will result in undefined behavior."
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "If you pass "
                },
                {
                  "type": "reference",
                  "isActive": false,
                  "identifier": "doc://com.apple.documentation/documentation/objectivec/nil-2gl"
                },
                {
                  "type": "text",
                  "text": ", the main queue is used."
                }
              ]
            }
          ]
        },
        {
          "name": "block",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The block to be invoked when any of the times in "
                },
                {
                  "type": "codeVoice",
                  "code": "times"
                },
                {
                  "type": "text",
                  "text": " is crossed during normal playback."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "An opaque object that you pass as the argument to "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayer/1387552-removetimeobserver"
            },
            {
              "type": "text",
              "text": " to stop observation. "
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Boundary times are arbitrary points of interest you define within the media timeline. As these times are traversed during normal playback, the block you provide to this method will be invoked. You must maintain a strong reference to the returned value as long as you want the time observer to be invoked by the player. Each invocation of this method should be paired with a corresponding call to "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayer/1387552-removetimeobserver"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The player does not guarantee the callback block will always be invoked for each boundary time. If your times are very close together along the timeline (close enough that the execution of the block for one takes longer than the difference between them) or if a seek causes time to jump over one or more boundary times, time observation for any specific boundary time may not occur. The best practice is therefore to implement the callback block so it always performs its necessary calculations based solely on the player's "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayer/1390404-currenttime"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The following example shows how you could define boundary times for each quarter of playback."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "- (void)addBoundaryTimeObserver {",
            "    NSMutableArray *times = [NSMutableArray array];",
            " ",
            "    // Set initial time to zero",
            "    CMTime currentTime = kCMTimeZero;",
            "    // Get asset duration",
            "    CMTime assetDuration = self.asset.duration;",
            "    // Divide the asset duration into quarters",
            "    CMTime interval = CMTimeMultiplyByFloat64(assetDuration, 0.25);",
            " ",
            "    // Build boundary times at 25%, 50%, 75%, 100%",
            "    while (CMTIME_COMPARE_INLINE(currentTime, <, assetDuration)) {",
            "        currentTime = CMTimeAdd(currentTime, interval);",
            "        [times addObject:[NSValue valueWithCMTime:currentTime]];",
            "    }",
            "    // Add time observer",
            "    self.timeObserverToken =",
            "        [self.player addBoundaryTimeObserverForTimes:times",
            "                                               queue:dispatch_get_main_queue()",
            "                                          usingBlock:^{",
            "            // Use weak reference to self",
            "            // Update user interface state",
            "        }];",
            "}"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "2556045",
            "title": "Listing 1"
          }
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Use a "
                },
                {
                  "type": "codeVoice",
                  "code": "weak"
                },
                {
                  "type": "text",
                  "text": " reference to "
                },
                {
                  "type": "codeVoice",
                  "code": "self"
                },
                {
                  "type": "text",
                  "text": " in the callback block to prevent creating a retain cycle."
                }
              ]
            }
          ],
          "style": "important"
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}