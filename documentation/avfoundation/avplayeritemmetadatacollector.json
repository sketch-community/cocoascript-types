{
  "abstract": [
    {
      "type": "text",
      "text": "An object used to capture the date range metadata defined for an HTTP Live Streaming asset."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/avfoundation",
        "doc://com.apple.documentation/documentation/avfoundation/media_playback_and_selection"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1617193,
  "kind": "symbol",
  "metadata": {
    "title": "AVPlayerItemMetadataCollector",
    "role": "symbol",
    "roleHeading": "Class",
    "modules": [
      {
        "name": "AVFoundation"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "9.3",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "9.3",
        "current": "15.2"
      },
      {
        "name": "macOS",
        "introducedAt": "10.11.3",
        "current": "12.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "15.2"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.3",
        "current": "15.2"
      },
      {
        "name": "watchOS",
        "introducedAt": "2.3",
        "current": "8.3"
      }
    ],
    "externalID": "c:objc(cs)AVPlayerItemMetadataCollector",
    "symbolKind": "cl"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/avfoundation/avplayeritemmetadatacollector"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/avfoundation/avplayeritemmetadatacollector"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/avfoundation": {
      "title": "AVFoundation",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation",
      "url": "/documentation/avfoundation",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/avfoundation/media_playback_and_selection": {
      "title": "Media Playback and Selection",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/media_playback_and_selection",
      "url": "/documentation/avfoundation/media_playback_and_selection",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayer": {
      "title": "AVPlayer",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayer",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayer"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollectorpushdelegate": {
      "title": "AVPlayerItemMetadataCollectorPushDelegate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollectorpushdelegate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayeritemmetadatacollectorpushdelegate",
      "abstract": [
        {
          "type": "text",
          "text": "A protocol you implement to receive metadata callbacks from a player item metadata collector."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayeritem": {
      "title": "AVPlayerItem",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayeritem",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayeritem"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector#2556043": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector#2556043",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/avfoundation/avplayeritemmetadatacollector#2556043"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector/1617191-initwithidentifiers": {
      "title": "initWithIdentifiers:classifyingLabels:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector/1617191-initwithidentifiers",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayeritemmetadatacollector/1617191-initwithidentifiers",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a metadata collector to access a stream’s metadata groups matching the specified array of identifiers and classifying labels."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "initWithIdentifiers:classifyingLabels:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmediadatacollector": {
      "title": "AVPlayerItemMediaDataCollector",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmediadatacollector",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayeritemmediadatacollector",
      "abstract": [
        {
          "type": "text",
          "text": "The abstract base for media data collectors."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector/1617195-setdelegate": {
      "title": "setDelegate:queue:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector/1617195-setdelegate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayeritemmetadatacollector/1617195-setdelegate",
      "abstract": [
        {
          "type": "text",
          "text": "Sets the delegate and a dispatch queue on which the delegate will be called."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "setDelegate:queue:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector/1617196-delegate": {
      "title": "delegate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector/1617196-delegate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayeritemmetadatacollector/1617196-delegate",
      "abstract": [
        {
          "type": "text",
          "text": "Accesses the metadata collector’s delegate object."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector/1617192-delegatequeue": {
      "title": "delegateQueue",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector/1617192-delegatequeue",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayeritemmetadatacollector/1617192-delegatequeue",
      "abstract": [
        {
          "type": "text",
          "text": "The dispatch queue on which the delegate’s methods are called."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avmetadatagroup": {
      "title": "AVMetadataGroup",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avmetadatagroup",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avmetadatagroup",
      "abstract": [
        {
          "type": "text",
          "text": "A collection of metadata items associated with a timeline segment."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avtimedmetadatagroup": {
      "title": "AVTimedMetadataGroup",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avtimedmetadatagroup",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avtimedmetadatagroup",
      "abstract": [
        {
          "type": "text",
          "text": "A collection of metadata items that are valid for use during a specific time range."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avmutabletimedmetadatagroup": {
      "title": "AVMutableTimedMetadataGroup",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avmutabletimedmetadatagroup",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avmutabletimedmetadatagroup",
      "abstract": [
        {
          "type": "text",
          "text": "A mutable collection of metadata items that are valid for use during a specific time range."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avdaterangemetadatagroup": {
      "title": "AVDateRangeMetadataGroup",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avdaterangemetadatagroup",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avdaterangemetadatagroup",
      "abstract": [
        {
          "type": "text",
          "text": "A collection of metadata items that are valid for use within a specific date range."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avmutabledaterangemetadatagroup": {
      "title": "AVMutableDateRangeMetadataGroup",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avmutabledaterangemetadatagroup",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avmutabledaterangemetadatagroup",
      "abstract": [
        {
          "type": "text",
          "text": "A mutable collection of metadata items that are valid for use within a specific range of dates."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector": {
      "title": "AVPlayerItemMetadataCollector",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avplayeritemmetadatacollector",
      "abstract": [
        {
          "type": "text",
          "text": "An object used to capture the date range metadata defined for an HTTP Live Streaming asset."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "relationshipsSections": [
    {
      "kind": "relationships",
      "title": "Inherits From",
      "type": "inheritsFrom",
      "identifiers": [
        "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmediadatacollector"
      ]
    }
  ],
  "topicSections": [
    {
      "kind": "taskGroup",
      "title": "Creating a Metadata Collector",
      "identifiers": [
        "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector/1617191-initwithidentifiers"
      ],
      "anchor": "2530670"
    },
    {
      "kind": "taskGroup",
      "title": "Accessing the Delegate and Callback Queue",
      "identifiers": [
        "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector/1617195-setdelegate",
        "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector/1617196-delegate",
        "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollectorpushdelegate",
        "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector/1617192-delegatequeue"
      ],
      "anchor": "2530672"
    }
  ],
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/avfoundation/avmetadatagroup",
        "doc://com.apple.documentation/documentation/avfoundation/avtimedmetadatagroup",
        "doc://com.apple.documentation/documentation/avfoundation/avmutabletimedmetadatagroup",
        "doc://com.apple.documentation/documentation/avfoundation/avdaterangemetadatagroup",
        "doc://com.apple.documentation/documentation/avfoundation/avmutabledaterangemetadatagroup",
        "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmediadatacollector"
      ],
      "title": "Timed Metadata",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "@interface"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "AVPlayerItemMetadataCollector"
            },
            {
              "kind": "text",
              "text": " : "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)AVPlayerItemMediaDataCollector",
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmediadatacollector",
              "text": "AVPlayerItemMediaDataCollector"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You can use the HLS "
            },
            {
              "type": "codeVoice",
              "code": "#EXT-X-DATERANGE"
            },
            {
              "type": "text",
              "text": " tag to define date range metadata in a media playlist. This tag is useful for defining timed metadata for interstitial regions such as advertisements, but can be used to define any timed metadata needed by your stream. To access this metadata when the stream is played using an "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayer"
            },
            {
              "type": "text",
              "text": ", you create an instance of "
            },
            {
              "type": "codeVoice",
              "code": "AVPlayerItemMetadataCollector"
            },
            {
              "type": "text",
              "text": ", configure its delegate object (see "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollectorpushdelegate"
            },
            {
              "type": "text",
              "text": "), and add it as a media data collector to the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayeritem"
            },
            {
              "type": "text",
              "text": " (see example)."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "// Adopts AVPlayerItemMetadataCollectorPushDelegate",
            "@implementation PlaybackController",
            " ",
            "- (void)prepareToPlay:(NSURL *)url {",
            "    self.metadataCollector = [[AVPlayerItemMetadataCollector alloc] init];",
            "    [self.metadataCollector setDelegate:self queue:dispatch_get_main_queue()];",
            " ",
            "    self.playerItem = [AVPlayerItem playerItemWithURL:url];",
            "    [self.playerItem addMediaDataCollector:self.metadataCollector];",
            " ",
            "    self.player = [AVPlayer playerWithPlayerItem:self.playerItem];",
            "}",
            " ",
            "- (void)metadataCollector:(AVPlayerItemMetadataCollector *)metadataCollector",
            "didCollectDateRangeMetadataGroups:(NSArray<AVDateRangeMetadataGroup *> *)metadataGroups",
            "       indexesOfNewGroups:(NSIndexSet *)indexesOfNewGroups",
            "  indexesOfModifiedGroups:(NSIndexSet *)indexesOfModifiedGroups {",
            "    // Process metadata",
            "}",
            " ",
            "@end"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "2556043",
            "title": "Listing 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Creating an "
            },
            {
              "type": "codeVoice",
              "code": "AVPlayerItemMetadataCollector"
            },
            {
              "type": "text",
              "text": " as shown in the example, will capture all "
            },
            {
              "type": "codeVoice",
              "code": "#EXT-X-DATERANGE"
            },
            {
              "type": "text",
              "text": " metadata defined in your stream. If you would like to filter the output to only the metadata of interest, you can create an instance to filter by identifier and/or classifying labels using the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avplayeritemmetadatacollector/1617191-initwithidentifiers"
            },
            {
              "type": "text",
              "text": " initializer."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}