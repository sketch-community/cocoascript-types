{
  "abstract": [
    {
      "type": "text",
      "text": "Requests the user’s permission, if needed, for recording a specified media type."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/avfoundation",
        "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture",
        "doc://com.apple.documentation/documentation/avfoundation/avcapturedevice"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/avfoundation/avcapturedevice/1624584-requestaccessformediatype",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1624584,
  "kind": "symbol",
  "metadata": {
    "title": "requestAccessForMediaType:completionHandler:",
    "role": "symbol",
    "roleHeading": "Type Method",
    "modules": [
      {
        "name": "AVFoundation"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "7.0",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "7.0",
        "current": "15.2"
      },
      {
        "name": "macOS",
        "introducedAt": "10.14",
        "current": "12.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "14.0",
        "current": "15.2"
      }
    ],
    "externalID": "c:objc(cs)AVCaptureDevice(cm)requestAccessForMediaType:completionHandler:",
    "parent": {
      "title": "AVCaptureDevice"
    },
    "symbolKind": "clm"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/avfoundation/avcapturedevice/1624584-requestaccessformediatype"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/avfoundation/avcapturedevice/1624584-requestaccess"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/avfoundation": {
      "title": "AVFoundation",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation",
      "url": "/documentation/avfoundation",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture": {
      "title": "Cameras and Media Capture",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture",
      "url": "/documentation/avfoundation/cameras_and_media_capture",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcapturedevice": {
      "title": "AVCaptureDevice",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturedevice",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcapturedevice",
      "abstract": [
        {
          "type": "text",
          "text": "A device that provides input (such as audio or video) for capture sessions and offers controls for hardware-specific capture features."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcapturedeviceinput": {
      "title": "AVCaptureDeviceInput",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturedeviceinput",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcapturedeviceinput"
    },
    "devLink-1695134": {
      "identifier": "devLink-1695134",
      "type": "link",
      "title": "NSCameraUsageDescription",
      "url": "https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/plist/info/NSCameraUsageDescription"
    },
    "devLink-1695145": {
      "identifier": "devLink-1695145",
      "type": "link",
      "title": "NSMicrophoneUsageDescription",
      "url": "https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/plist/info/NSMicorphoneUsageDescription"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avmediatypeaudio": {
      "title": "AVMediaTypeAudio",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avmediatypeaudio",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avmediatypeaudio"
    },
    "doc://com.apple.documentation/documentation/avfaudio/avaudiosession": {
      "title": "AVAudioSession",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfaudio/avaudiosession",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfaudio/avaudiosession"
    },
    "doc://com.apple.documentation/documentation/avfaudio/avaudiosession/1616601-requestrecordpermission": {
      "title": "requestRecordPermission:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfaudio/avaudiosession/1616601-requestrecordpermission",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfaudio/avaudiosession/1616601-requestrecordpermission",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "requestRecordPermission:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avmediatypevideo": {
      "title": "AVMediaTypeVideo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avmediatypevideo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avmediatypevideo"
    },
    "doc://com.apple.documentation/documentation/foundation/nsinvalidargumentexception": {
      "title": "NSInvalidArgumentException",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsinvalidargumentexception",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsinvalidargumentexception"
    },
    "doc://com.apple.documentation/documentation/objectivec/yes": {
      "title": "YES",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/objectivec/yes",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/objectivec/yes"
    },
    "doc://com.apple.documentation/documentation/objectivec/no": {
      "title": "NO",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/objectivec/no",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/objectivec/no"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avmediatype": {
      "title": "AVMediaType",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avmediatype",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avmediatype"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcapturedevice/1624584-requestaccessformediatype": {
      "title": "requestAccessForMediaType:completionHandler:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturedevice/1624584-requestaccessformediatype",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcapturedevice/1624584-requestaccessformediatype",
      "abstract": [
        {
          "type": "text",
          "text": "Requests the user’s permission, if needed, for recording a specified media type."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "requestAccessForMediaType:completionHandler:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcapturedevice/1624613-authorizationstatusformediatype": {
      "title": "authorizationStatusForMediaType:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturedevice/1624613-authorizationstatusformediatype",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcapturedevice/1624613-authorizationstatusformediatype",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a constant indicating whether the app has permission for recording a specified media type."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "authorizationStatusForMediaType:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avauthorizationstatus": {
      "title": "AVAuthorizationStatus",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avauthorizationstatus",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avauthorizationstatus",
      "abstract": [
        {
          "type": "text",
          "text": "Constants that provide information regarding permission to use media capture devices."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/avfoundation/avcapturedevice/1624613-authorizationstatusformediatype",
        "doc://com.apple.documentation/documentation/avfoundation/avauthorizationstatus"
      ],
      "title": "Verifying Authorization",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "text",
              "text": "+ ("
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "identifier",
              "text": "requestAccessForMediaType:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@AVMediaType",
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avmediatype",
              "text": "AVMediaType"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "mediaType"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "completionHandler:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": " (^)("
            },
            {
              "kind": "keyword",
              "text": "BOOL"
            },
            {
              "kind": "text",
              "text": " granted)"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "handler"
            },
            {
              "kind": "text",
              "text": ";"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "macOS",
            "Mac Catalyst"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "mediaType",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A media type constant, either "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/avfoundation/avmediatypevideo"
                },
                {
                  "type": "text",
                  "text": " or "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/avfoundation/avmediatypeaudio"
                },
                {
                  "type": "text",
                  "text": ". If no media type is supplied, an "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/foundation/nsinvalidargumentexception"
                },
                {
                  "type": "text",
                  "text": " will be thrown."
                }
              ]
            }
          ]
        },
        {
          "name": "handler",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A block to be called once permission is granted or denied."
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The completion handler is called on an arbitrary dispatch queue. It is the client's responsibility to ensure that any UIKit-related updates are called on the main queue or main thread as a result."
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The block receives the following parameter:"
                }
              ]
            },
            {
              "type": "termList",
              "items": [
                {
                  "term": {
                    "inlineContent": [
                      {
                        "type": "emphasis",
                        "inlineContent": [
                          {
                            "type": "text",
                            "text": "granted"
                          }
                        ]
                      }
                    ]
                  },
                  "definition": {
                    "content": [
                      {
                        "type": "paragraph",
                        "inlineContent": [
                          {
                            "type": "text",
                            "text": "If the user grants permission to use the hardware "
                          },
                          {
                            "type": "reference",
                            "isActive": false,
                            "identifier": "doc://com.apple.documentation/documentation/objectivec/yes"
                          },
                          {
                            "type": "text",
                            "text": " is returned; otherwise "
                          },
                          {
                            "type": "reference",
                            "isActive": false,
                            "identifier": "doc://com.apple.documentation/documentation/objectivec/no"
                          },
                          {
                            "type": "text",
                            "text": ". The block will return immediately."
                          }
                        ]
                      }
                    ]
                  }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Recording audio or video always requires explicit permission from the user. The first time you create any "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturedeviceinput"
            },
            {
              "type": "text",
              "text": " objects for a media type that requires permission, the system automatically displays an alert to request recording permission. Alternatively, you can can call this method to prompt the user at a time of your choosing. "
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Your app must provide an explanation for its use of capture devices using the "
                },
                {
                  "type": "link",
                  "title": "NSCameraUsageDescription",
                  "destination": "https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/plist/info/NSCameraUsageDescription"
                },
                {
                  "type": "text",
                  "text": " or "
                },
                {
                  "type": "link",
                  "title": "NSMicrophoneUsageDescription",
                  "destination": "https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/plist/info/NSMicorphoneUsageDescription"
                },
                {
                  "type": "text",
                  "text": " Info.plist key; iOS displays this explanation when initially asking the user for permission, and thereafter in the Settings app. Calling this method or attempting to start a capture session without a usage description raises an exception."
                }
              ]
            }
          ],
          "style": "important"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This call will not block while the user is being asked for access, allowing the client to continue running.  Until access has been granted, any "
            },
            {
              "type": "codeVoice",
              "code": "AVCaptureDevices"
            },
            {
              "type": "text",
              "text": " for the media type will vend silent audio samples or black video frames.  The user is only asked for permission the first time the client requests access.  Later calls use the permission granted by the user."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "After the user grants recording permission, the system remembers the choice for future use in the same app, but the user can change this choice at any time using the Settings app. If the user has denied your app recoding permission or has not yet responded to the permission prompt, any audio recordings will contain only silence and any video recordings will contain only black frames."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The "
            },
            {
              "type": "codeVoice",
              "code": "response"
            },
            {
              "type": "text",
              "text": " parameter is a block whose sole parameter indicates whether the user granted or denied permission to record. This method always returns immediately. If the user has previously granted or denied recording permission, it executes the block when called; otherwise, it displays an alert and executes the block only after the user has responded to the alert."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Invoking this method with "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avmediatypeaudio"
            },
            {
              "type": "text",
              "text": " is equivalent to calling the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfaudio/avaudiosession"
            },
            {
              "type": "text",
              "text": " method "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfaudio/avaudiosession/1616601-requestrecordpermission"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}