{
  "abstract": [
    {
      "type": "text",
      "text": "Sets the sample buffer delegate and the queue for invoking callbacks."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/avfoundation",
        "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture",
        "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1389008-setsamplebufferdelegate",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1389008,
  "kind": "symbol",
  "metadata": {
    "title": "setSampleBufferDelegate:queue:",
    "role": "symbol",
    "roleHeading": "Instance Method",
    "modules": [
      {
        "name": "AVFoundation"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "4.0",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "4.0",
        "current": "15.2"
      },
      {
        "name": "macOS",
        "introducedAt": "10.7",
        "current": "12.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "15.2"
      }
    ],
    "externalID": "c:objc(cs)AVCaptureVideoDataOutput(im)setSampleBufferDelegate:queue:",
    "parent": {
      "title": "AVCaptureVideoDataOutput"
    },
    "symbolKind": "instm"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/avfoundation/avcapturevideodataoutput/1389008-setsamplebufferdelegate"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/avfoundation/avcapturevideodataoutput/1389008-setsamplebufferdelegate"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/avfoundation": {
      "title": "AVFoundation",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation",
      "url": "/documentation/avfoundation",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture": {
      "title": "Cameras and Media Capture",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture",
      "url": "/documentation/avfoundation/cameras_and_media_capture",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput": {
      "title": "AVCaptureVideoDataOutput",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcapturevideodataoutput",
      "abstract": [
        {
          "type": "text",
          "text": "A capture output that records video and provides access to video frames for processing."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutputsamplebufferdelegate": {
      "title": "AVCaptureVideoDataOutputSampleBufferDelegate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutputsamplebufferdelegate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcapturevideodataoutputsamplebufferdelegate",
      "abstract": [
        {
          "type": "text",
          "text": "Methods for receiving sample buffers from, and monitoring the status of, a video data output."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/dispatch/1496306-dispatch_retain": {
      "title": "dispatch_retain",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/dispatch/1496306-dispatch_retain",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/dispatch/1496306-dispatch_retain"
    },
    "doc://com.apple.documentation/documentation/dispatch/1496328-dispatch_release": {
      "title": "dispatch_release",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/dispatch/1496328-dispatch_release",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/dispatch/1496328-dispatch_release"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutputsamplebufferdelegate/1385775-captureoutput": {
      "title": "captureOutput:didOutputSampleBuffer:fromConnection:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutputsamplebufferdelegate/1385775-captureoutput",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcapturevideodataoutputsamplebufferdelegate/1385775-captureoutput",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "captureOutput:didOutputSampleBuffer:fromConnection:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1385780-alwaysdiscardslatevideoframes": {
      "title": "alwaysDiscardsLateVideoFrames",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1385780-alwaysdiscardslatevideoframes",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcapturevideodataoutput/1385780-alwaysdiscardslatevideoframes"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1616296-minframeduration": {
      "title": "minFrameDuration",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1616296-minframeduration",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcapturevideodataoutput/1616296-minframeduration"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1385831-samplebuffercallbackqueue": {
      "title": "sampleBufferCallbackQueue",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1385831-samplebuffercallbackqueue",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcapturevideodataoutput/1385831-samplebuffercallbackqueue",
      "abstract": [
        {
          "type": "text",
          "text": "The queue on which the system invokes delegate callbacks."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1385886-samplebufferdelegate": {
      "title": "sampleBufferDelegate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1385886-samplebufferdelegate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcapturevideodataoutput/1385886-samplebufferdelegate",
      "abstract": [
        {
          "type": "text",
          "text": "The capture objectâ€™s delegate."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/dispatch/dispatch_queue_t": {
      "title": "dispatch_queue_t",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_queue_t",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/dispatch/dispatch_queue_t"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1389008-setsamplebufferdelegate": {
      "title": "setSampleBufferDelegate:queue:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1389008-setsamplebufferdelegate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcapturevideodataoutput/1389008-setsamplebufferdelegate",
      "abstract": [
        {
          "type": "text",
          "text": "Sets the sample buffer delegate and the queue for invoking callbacks."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "setSampleBufferDelegate:queue:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1385886-samplebufferdelegate",
        "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1385831-samplebuffercallbackqueue",
        "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutputsamplebufferdelegate"
      ],
      "title": "Receiving Captured Video Data",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "text",
              "text": "- ("
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "identifier",
              "text": "setSampleBufferDelegate:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "keyword",
              "text": "id"
            },
            {
              "kind": "text",
              "text": "<"
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(pl)AVCaptureVideoDataOutputSampleBufferDelegate",
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutputsamplebufferdelegate",
              "text": "AVCaptureVideoDataOutputSampleBufferDelegate"
            },
            {
              "kind": "text",
              "text": ">"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "sampleBufferDelegate"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "queue:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@dispatch_queue_t",
              "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_queue_t",
              "text": "dispatch_queue_t"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "sampleBufferCallbackQueue"
            },
            {
              "kind": "text",
              "text": ";"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "macOS",
            "Mac Catalyst"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "sampleBufferDelegate",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "An object conforming to the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutputsamplebufferdelegate"
                },
                {
                  "type": "text",
                  "text": " protocol that will receive sample buffers after they are captured."
                }
              ]
            }
          ]
        },
        {
          "name": "sampleBufferCallbackQueue",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The queue on which callbacks should be invoked. You must use a serial dispatch queue, to guarantee that video frames will be delivered in order. "
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The sampleBufferCallbackQueue parameter may not be "
                },
                {
                  "type": "codeVoice",
                  "code": "NULL"
                },
                {
                  "type": "text",
                  "text": ", except when setting the "
                },
                {
                  "type": "codeVoice",
                  "code": "sampleBufferDelegate"
                },
                {
                  "type": "text",
                  "text": " to "
                },
                {
                  "type": "codeVoice",
                  "code": "nil"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When a new video sample buffer is captured, it is sent to the sample buffer delegate using "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutputsamplebufferdelegate/1385775-captureoutput"
            },
            {
              "type": "text",
              "text": ". All delegate methods are invoked on the specified dispatch queue."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If the queue is blocked when new frames are captured, those frames will be automatically dropped at a time determined by the value of the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1385780-alwaysdiscardslatevideoframes"
            },
            {
              "type": "text",
              "text": " property. This allows you to process existing frames on the same queue without having to manage the potential memory usage increases that would otherwise occur when that processing is unable to keep up with the rate of incoming frames."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If your frame processing is consistently unable to keep up with the rate of incoming frames, you should consider using the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcapturevideodataoutput/1616296-minframeduration"
            },
            {
              "type": "text",
              "text": " property, which will generally yield better performance characteristics and more consistent frame rates than frame dropping alone."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If you need to minimize the chances of frames being dropped, you should specify a queue on which a sufficiently small amount of processing is being done outside of receiving sample buffers. However, if you migrate extra processing to another queue, you are responsible for ensuring that memory usage does not grow without bound from frames that have not been processed."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Special Considerations",
          "anchor": "1679058"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This method uses "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/dispatch/1496306-dispatch_retain"
            },
            {
              "type": "text",
              "text": " and "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/dispatch/1496328-dispatch_release"
            },
            {
              "type": "text",
              "text": " to manage the queue."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}