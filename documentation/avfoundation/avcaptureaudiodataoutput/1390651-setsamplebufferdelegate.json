{
  "abstract": [
    {
      "type": "text",
      "text": "Sets the delegate that will accept captured buffers and the dispatch queue on which the delegate will be called."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/avfoundation",
        "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture",
        "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutput"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutput/1390651-setsamplebufferdelegate",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1390651,
  "kind": "symbol",
  "metadata": {
    "title": "setSampleBufferDelegate:queue:",
    "role": "symbol",
    "roleHeading": "Instance Method",
    "modules": [
      {
        "name": "AVFoundation"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "4.0",
        "current": "14.3"
      },
      {
        "name": "macOS",
        "introducedAt": "10.7",
        "current": "11.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "14.3"
      }
    ],
    "externalID": "c:objc(cs)AVCaptureAudioDataOutput(im)setSampleBufferDelegate:queue:",
    "symbolKind": "instm"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/avfoundation/avcaptureaudiodataoutput/1390651-setsamplebufferdelegate"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/avfoundation/avcaptureaudiodataoutput/1390651-setsamplebufferdelegate"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/avfoundation": {
      "title": "AVFoundation",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation",
      "url": "/documentation/avfoundation",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture": {
      "title": "Cameras and Media Capture",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/cameras_and_media_capture",
      "url": "/documentation/avfoundation/cameras_and_media_capture",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutput": {
      "title": "AVCaptureAudioDataOutput",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutput",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcaptureaudiodataoutput",
      "abstract": [
        {
          "type": "text",
          "text": "A capture output that records audio and provides access to audio sample buffers as they are recorded. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutputsamplebufferdelegate": {
      "title": "AVCaptureAudioDataOutputSampleBufferDelegate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutputsamplebufferdelegate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcaptureaudiodataoutputsamplebufferdelegate",
      "abstract": [
        {
          "type": "text",
          "text": "Methods for receiving audio sample data from an audio capture."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/dispatch/1496306-dispatch_retain": {
      "title": "dispatch_retain",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/dispatch/1496306-dispatch_retain",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/dispatch/1496306-dispatch_retain"
    },
    "doc://com.apple.documentation/documentation/dispatch/1496328-dispatch_release": {
      "title": "dispatch_release",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/dispatch/1496328-dispatch_release",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/dispatch/1496328-dispatch_release"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutputsamplebufferdelegate/1386039-captureoutput": {
      "title": "captureOutput:didOutputSampleBuffer:fromConnection:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutputsamplebufferdelegate/1386039-captureoutput",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcaptureaudiodataoutputsamplebufferdelegate/1386039-captureoutput",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "captureOutput:didOutputSampleBuffer:fromConnection:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/dispatch/dispatch_queue_t": {
      "title": "dispatch_queue_t",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_queue_t",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/dispatch/dispatch_queue_t"
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutput/1390651-setsamplebufferdelegate": {
      "title": "setSampleBufferDelegate:queue:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutput/1390651-setsamplebufferdelegate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcaptureaudiodataoutput/1390651-setsamplebufferdelegate",
      "abstract": [
        {
          "type": "text",
          "text": "Sets the delegate that will accept captured buffers and the dispatch queue on which the delegate will be called."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "setSampleBufferDelegate:queue:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutput/1386344-samplebufferdelegate": {
      "title": "sampleBufferDelegate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutput/1386344-samplebufferdelegate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcaptureaudiodataoutput/1386344-samplebufferdelegate",
      "abstract": [
        {
          "type": "text",
          "text": "The capture objectâ€™s delegate."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutput/1389355-samplebuffercallbackqueue": {
      "title": "sampleBufferCallbackQueue",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutput/1389355-samplebuffercallbackqueue",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/avfoundation/avcaptureaudiodataoutput/1389355-samplebuffercallbackqueue",
      "abstract": [
        {
          "type": "text",
          "text": "The queue on which delegate callbacks are invoked"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutput/1386344-samplebufferdelegate",
        "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutput/1389355-samplebuffercallbackqueue",
        "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutputsamplebufferdelegate"
      ],
      "title": "Receiving Captured Audio Data",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "text",
              "text": "- ("
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "identifier",
              "text": "setSampleBufferDelegate:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "keyword",
              "text": "id"
            },
            {
              "kind": "text",
              "text": "<"
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(pl)AVCaptureAudioDataOutputSampleBufferDelegate",
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutputsamplebufferdelegate",
              "text": "AVCaptureAudioDataOutputSampleBufferDelegate"
            },
            {
              "kind": "text",
              "text": ">"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "sampleBufferDelegate"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "queue:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@dispatch_queue_t",
              "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_queue_t",
              "text": "dispatch_queue_t"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "sampleBufferCallbackQueue"
            },
            {
              "kind": "text",
              "text": ";"
            }
          ],
          "platforms": [
            "iOS",
            "macOS",
            "Mac Catalyst"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "sampleBufferDelegate",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "An object conforming to the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutputsamplebufferdelegate"
                },
                {
                  "type": "text",
                  "text": " protocol that will receive sample buffers after they are captured."
                }
              ]
            }
          ]
        },
        {
          "name": "sampleBufferCallbackQueue",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "You must pass a serial dispatch to guarantee that audio samples will be delivered in order."
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The value may not be "
                },
                {
                  "type": "codeVoice",
                  "code": "NULL"
                },
                {
                  "type": "text",
                  "text": ", except when setting the "
                },
                {
                  "type": "codeVoice",
                  "code": "sampleBufferDelegate"
                },
                {
                  "type": "text",
                  "text": " to "
                },
                {
                  "type": "codeVoice",
                  "code": "nil"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When a new audio sample buffer is captured it is vended to the sample buffer delegate using the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/avfoundation/avcaptureaudiodataoutputsamplebufferdelegate/1386039-captureoutput"
            },
            {
              "type": "text",
              "text": " delegate method. All delegate methods are called on the specified dispatch queue."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If the queue is blocked when new samples are captured, those samples will be automatically dropped when they become sufficiently late. This allows you to process existing samples on the same queue without having to manage the potential memory usage increases that would otherwise occur when that processing is unable to keep up with the rate of incoming samples."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If you need to minimize the chances of samples being dropped, you should specify a queue on which a sufficiently small amount of processing is being done outside of receiving sample buffers. When migrating extra processing to another queue, you are responsible for ensuring that memory usage does not grow without bound from samples that have not been processed."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Special Considerations",
          "anchor": "1679063"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This method uses "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/dispatch/1496306-dispatch_retain"
            },
            {
              "type": "text",
              "text": " and "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/dispatch/1496328-dispatch_release"
            },
            {
              "type": "text",
              "text": " to manage the queue."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}