{
  "abstract": [
    {
      "type": "text",
      "text": "Returns a Boolean value that indicates whether it is safe to autosave document changes."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/appkit",
        "doc://com.apple.documentation/documentation/appkit/documents_data_and_pasteboard",
        "doc://com.apple.documentation/documentation/appkit/nsdocument"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/appkit/nsdocument/1515061-checkautosavingsafetyandreturner",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1515061,
  "kind": "symbol",
  "metadata": {
    "title": "checkAutosavingSafetyAndReturnError:",
    "role": "symbol",
    "roleHeading": "Instance Method",
    "modules": [
      {
        "name": "AppKit"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.7",
        "current": "11.1"
      }
    ],
    "externalID": "c:objc(cs)NSDocument(im)checkAutosavingSafetyAndReturnError:",
    "symbolKind": "instm"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/appkit/nsdocument/1515061-checkautosavingsafetyandreturner"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/appkit/nsdocument/1515061-checkautosavingsafety"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/appkit": {
      "title": "AppKit",
      "identifier": "doc://com.apple.documentation/documentation/appkit",
      "url": "/documentation/appkit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/appkit/documents_data_and_pasteboard": {
      "title": "Documents, Data, and Pasteboard",
      "identifier": "doc://com.apple.documentation/documentation/appkit/documents_data_and_pasteboard",
      "url": "/documentation/appkit/documents_data_and_pasteboard",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/appkit/nsdocument": {
      "title": "NSDocument",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/appkit/nsdocument",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/appkit/nsdocument",
      "abstract": [
        {
          "type": "text",
          "text": "An abstract class that defines the interface for macOS documents. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/objectivec/no": {
      "title": "NO",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/objectivec/no",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/objectivec/no"
    },
    "doc://com.apple.documentation/documentation/appkit/nsdocument/1515106-autosavesinplace": {
      "title": "autosavesInPlace",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/appkit/nsdocument/1515106-autosavesinplace",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/appkit/nsdocument/1515106-autosavesinplace"
    },
    "doc://com.apple.documentation/documentation/objectivec/yes": {
      "title": "YES",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/objectivec/yes",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/objectivec/yes"
    },
    "doc://com.apple.documentation/documentation/appkit/nsdocument/1515223-updatechangecount": {
      "title": "updateChangeCount:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/appkit/nsdocument/1515223-updatechangecount",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/appkit/nsdocument/1515223-updatechangecount",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "updateChangeCount:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/nsundomanager/1412189-undo": {
      "title": "undo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsundomanager/1412189-undo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsundomanager/1412189-undo",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "undo"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/nsundomanager/1417030-redo": {
      "title": "redo",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsundomanager/1417030-redo",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsundomanager/1417030-redo",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "redo"
        }
      ]
    },
    "link-3023437": {
      "title": "Error Handling",
      "type": "topic",
      "identifier": "link-3023437",
      "kind": "article",
      "role": "link",
      "url": "https://docs.swift.org/swift-book/LanguageGuide/ErrorHandling.html"
    },
    "link-3023438": {
      "title": "The Swift Programming Language",
      "type": "topic",
      "identifier": "link-3023438",
      "kind": "article",
      "role": "link",
      "url": "https://docs.swift.org/swift-book/"
    },
    "doc://com.apple.documentation/documentation/swift/cocoa_design_patterns/about_imported_cocoa_error_parameters": {
      "title": "About Imported Cocoa Error Parameters",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/swift/cocoa_design_patterns/about_imported_cocoa_error_parameters",
      "kind": "article",
      "role": "article",
      "url": "/documentation/swift/cocoa_design_patterns/about_imported_cocoa_error_parameters"
    },
    "doc://com.apple.documentation/documentation/foundation/nserror": {
      "title": "NSError",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nserror",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nserror"
    },
    "doc://com.apple.documentation/documentation/appkit/nsdocument/1515061-checkautosavingsafetyandreturner": {
      "title": "checkAutosavingSafetyAndReturnError:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/appkit/nsdocument/1515061-checkautosavingsafetyandreturner",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/appkit/nsdocument/1515061-checkautosavingsafetyandreturner",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a Boolean value that indicates whether it is safe to autosave document changes."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "checkAutosavingSafetyAndReturnError:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/appkit/nsdocument/1515079-hasunautosavedchanges": {
      "title": "hasUnautosavedChanges",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/appkit/nsdocument/1515079-hasunautosavedchanges",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/appkit/nsdocument/1515079-hasunautosavedchanges",
      "abstract": [
        {
          "type": "text",
          "text": "A Boolean value that indicates whether the document has changes that have not been autosaved. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/appkit/nsdocument/1515119-scheduleautosaving": {
      "title": "scheduleAutosaving",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/appkit/nsdocument/1515119-scheduleautosaving",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/appkit/nsdocument/1515119-scheduleautosaving",
      "abstract": [
        {
          "type": "text",
          "text": "Schedules periodic autosaving for the purpose of crash protection."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "scheduleAutosaving"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/appkit/nsdocument/1515225-autosavedocumentwithdelegate": {
      "title": "autosaveDocumentWithDelegate:didAutosaveSelector:contextInfo:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/appkit/nsdocument/1515225-autosavedocumentwithdelegate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/appkit/nsdocument/1515225-autosavedocumentwithdelegate",
      "abstract": [
        {
          "type": "text",
          "text": "Autosaves the document’s contents to an appropriate location in the file system."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "autosaveDocumentWithDelegate:didAutosaveSelector:contextInfo:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/appkit/nsdocument/1515096-autosavewithimplicitcancellabili": {
      "title": "autosaveWithImplicitCancellability:completionHandler:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/appkit/nsdocument/1515096-autosavewithimplicitcancellabili",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/appkit/nsdocument/1515096-autosavewithimplicitcancellabili",
      "abstract": [
        {
          "type": "text",
          "text": "Autosaves the document’s contents to an appropriate file-system location, as needed."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "autosaveWithImplicitCancellability:completionHandler:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/appkit/nsdocument/1515200-backupfileurl": {
      "title": "backupFileURL",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/appkit/nsdocument/1515200-backupfileurl",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/appkit/nsdocument/1515200-backupfileurl",
      "abstract": [
        {
          "type": "text",
          "text": "The URL for the document’s backup file that was created during an autosave operation."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/appkit/nsdocument/1515079-hasunautosavedchanges",
        "doc://com.apple.documentation/documentation/appkit/nsdocument/1515119-scheduleautosaving",
        "doc://com.apple.documentation/documentation/appkit/nsdocument/1515225-autosavedocumentwithdelegate",
        "doc://com.apple.documentation/documentation/appkit/nsdocument/1515096-autosavewithimplicitcancellabili",
        "doc://com.apple.documentation/documentation/appkit/nsdocument/1515200-backupfileurl"
      ],
      "title": "Autosaving the Document",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "text",
              "text": "- ("
            },
            {
              "kind": "keyword",
              "text": "BOOL"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "identifier",
              "text": "checkAutosavingSafetyAndReturnError:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSError",
              "identifier": "doc://com.apple.documentation/documentation/foundation/nserror",
              "text": "NSError"
            },
            {
              "kind": "text",
              "text": " * "
            },
            {
              "kind": "keyword",
              "text": "_Nullable"
            },
            {
              "kind": "text",
              "text": " *"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "outError"
            },
            {
              "kind": "text",
              "text": ";"
            }
          ],
          "platforms": [
            "macOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "outError",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "If "
                },
                {
                  "type": "reference",
                  "isActive": false,
                  "identifier": "doc://com.apple.documentation/documentation/objectivec/no"
                },
                {
                  "type": "text",
                  "text": " is returned, a pointer to an error object that encapsulates the reason the document should not be autosaved."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/objectivec/yes"
            },
            {
              "type": "text",
              "text": " if autosaving the document is probably safe; otherwise, "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/objectivec/no"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The default implementation of this method checks for documents that have not been changed in a while (\"a while\" is subject to change) or are saved in folders where the user typically does not edit documents (the "
            },
            {
              "type": "codeVoice",
              "code": "~/Downloads"
            },
            {
              "type": "text",
              "text": " folder, for example). When it senses one of those cases it returns "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/objectivec/no"
            },
            {
              "type": "text",
              "text": " with an "
            },
            {
              "type": "codeVoice",
              "code": "NSError"
            },
            {
              "type": "text",
              "text": " object that has recovery options like Duplicate, Cancel, and Unlock."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In an app that has adopted autosaving in place by overriding "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/appkit/nsdocument/1515106-autosavesinplace"
            },
            {
              "type": "text",
              "text": " to return "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/objectivec/yes"
            },
            {
              "type": "text",
              "text": ", you can override this method to customize the autosaving safety checking that "
            },
            {
              "type": "codeVoice",
              "code": "NSDocument"
            },
            {
              "type": "text",
              "text": " does by default. You can remove the "
            },
            {
              "type": "codeVoice",
              "code": "NSDocument"
            },
            {
              "type": "text",
              "text": " default checking by overriding this method and not invoking super. You can add to the "
            },
            {
              "type": "codeVoice",
              "code": "NSDocument"
            },
            {
              "type": "text",
              "text": " default checking by invoking super and then doing your own checking if "
            },
            {
              "type": "codeVoice",
              "code": "[super checkAutosavingSafetyAndReturnError:]"
            },
            {
              "type": "text",
              "text": " did not signal an error. For example, TextEdit overrides this method to ask the user what to do when opening a document file has been lossy and overwriting that file might therefore be lossy."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When autosaving in place is turned on an "
            },
            {
              "type": "codeVoice",
              "code": "NSDocument"
            },
            {
              "type": "text",
              "text": " object may invoke this method when it receives notification from its "
            },
            {
              "type": "codeVoice",
              "code": "NSUndoManager"
            },
            {
              "type": "text",
              "text": " object that the user changed the document, or undid or redid a change. If an error is returned, "
            },
            {
              "type": "codeVoice",
              "code": "NSDocument"
            },
            {
              "type": "text",
              "text": " presents the error to the user, allowing the user to choose a recovery option. If the user chooses a recovery option, then "
            },
            {
              "type": "codeVoice",
              "code": "NSDocument"
            },
            {
              "type": "text",
              "text": " invokes this method again until no error is signaled, to make sure that all checks have been done. This means that when you signal an error and the user’s choice of recovery option indicates that they have seen and disregarded a safety concern, you must record that fact and not do that particular safety check again. Once all errors are handled, "
            },
            {
              "type": "codeVoice",
              "code": "NSDocument"
            },
            {
              "type": "text",
              "text": " continues by invoking "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/appkit/nsdocument/1515223-updatechangecount"
            },
            {
              "type": "text",
              "text": ". If the user does not recover from an error, then "
            },
            {
              "type": "codeVoice",
              "code": "NSDocument"
            },
            {
              "type": "text",
              "text": " invokes one of the "
            },
            {
              "type": "codeVoice",
              "code": "NSUndoManager"
            },
            {
              "type": "text",
              "text": " methods "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsundomanager/1412189-undo"
            },
            {
              "type": "text",
              "text": " or "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsundomanager/1417030-redo"
            },
            {
              "type": "text",
              "text": " to roll back the change. So, some of the "
            },
            {
              "type": "codeVoice",
              "code": "NSError"
            },
            {
              "type": "text",
              "text": " recovery options the user can choose, like the "
            },
            {
              "type": "codeVoice",
              "code": "NSDocument"
            },
            {
              "type": "text",
              "text": " options Duplicate and Cancel, should indicate failed recovery and cause the document to remain unchanged afterward."
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "In Swift, this method is marked with the "
                },
                {
                  "type": "codeVoice",
                  "code": "throws"
                },
                {
                  "type": "text",
                  "text": " keyword to indicate that it throws an error in cases of failure."
                }
              ]
            },
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "When overriding this method, use the "
                },
                {
                  "type": "codeVoice",
                  "code": "throw"
                },
                {
                  "type": "text",
                  "text": " statement to throw an "
                },
                {
                  "type": "codeVoice",
                  "code": "NSError"
                },
                {
                  "type": "text",
                  "text": ", as described in "
                },
                {
                  "type": "link",
                  "title": "Error Handling",
                  "destination": "https://docs.swift.org/swift-book/LanguageGuide/ErrorHandling.html"
                },
                {
                  "type": "text",
                  "text": " in "
                },
                {
                  "type": "link",
                  "title": "The Swift Programming Language",
                  "destination": "https://docs.swift.org/swift-book/"
                },
                {
                  "type": "text",
                  "text": " and "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/swift/cocoa_design_patterns/about_imported_cocoa_error_parameters"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            }
          ],
          "style": "note",
          "name": "Handling Errors in Swift:"
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}