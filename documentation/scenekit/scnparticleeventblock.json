{
  "abstract": [
    {
      "type": "text",
      "text": "The signature for blocks called by SceneKit in response to significant events during particle simulation, used by the "
    },
    {
      "type": "reference",
      "isActive": true,
      "identifier": "doc://com.apple.documentation/documentation/scenekit/scnparticlesystem/1523251-handleevent"
    },
    {
      "type": "text",
      "text": " method."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/scenekit",
        "doc://com.apple.documentation/documentation/scenekit/scnparticlesystem"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/scenekit/scnparticleeventblock",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1524242,
  "kind": "symbol",
  "metadata": {
    "title": "SCNParticleEventBlock",
    "role": "symbol",
    "roleHeading": "Type Alias",
    "modules": [
      {
        "name": "SceneKit"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "8.0",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "8.0",
        "current": "15.2"
      },
      {
        "name": "macOS",
        "introducedAt": "10.10",
        "current": "12.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "15.2"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "current": "15.2"
      },
      {
        "name": "watchOS",
        "introducedAt": "3.0",
        "current": "8.3"
      }
    ],
    "externalID": "c:@T@SCNParticleEventBlock",
    "symbolKind": "tdef"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/scenekit/scnparticleeventblock"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/scenekit/scnparticleeventblock"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/scenekit": {
      "title": "SceneKit",
      "identifier": "doc://com.apple.documentation/documentation/scenekit",
      "url": "/documentation/scenekit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/scenekit/scnparticlesystem": {
      "title": "SCNParticleSystem",
      "identifier": "doc://com.apple.documentation/documentation/scenekit/scnparticlesystem",
      "url": "/documentation/scenekit/scnparticlesystem",
      "type": "topic",
      "kind": "symbol",
      "role": "symbol"
    },
    "doc://com.apple.documentation/documentation/scenekit/scnparticlesystem/1523251-handleevent": {
      "title": "handleEvent:forProperties:withBlock:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/scenekit/scnparticlesystem/1523251-handleevent",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/scenekit/scnparticlesystem/1523251-handleevent",
      "abstract": [
        {
          "type": "text",
          "text": "Adds a block that modifies particle properties, to be executed at a specified event in the lifetimes of particles in the system."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "handleEvent:forProperties:withBlock:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/scenekit/scnparticleevent/scnparticleeventbirth": {
      "title": "SCNParticleEventBirth",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/scenekit/scnparticleevent/scnparticleeventbirth",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/scenekit/scnparticleevent/scnparticleeventbirth"
    },
    "doc://com.apple.documentation/documentation/scenekit/scnparticleeventblock#2557219": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/scenekit/scnparticleeventblock#2557219",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/scenekit/scnparticleeventblock#2557219"
    },
    "doc://com.apple.documentation/documentation/kernel/size_t": {
      "title": "size_t",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/kernel/size_t",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/kernel/size_t"
    },
    "doc://com.apple.documentation/documentation/objectivec/nsinteger": {
      "title": "NSInteger",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/objectivec/nsinteger",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/objectivec/nsinteger"
    },
    "doc://com.apple.documentation/documentation/scenekit/scnparticleevent": {
      "title": "SCNParticleEvent",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/scenekit/scnparticleevent",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/scenekit/scnparticleevent",
      "abstract": [
        {
          "type": "text",
          "text": "Significant events in the life spans of simulate particles, used by the "
        },
        {
          "type": "reference",
          "isActive": true,
          "identifier": "doc://com.apple.documentation/documentation/scenekit/scnparticlesystem/1523251-handleevent"
        },
        {
          "type": "text",
          "text": " method."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/scenekit/scnparticleeventblock": {
      "title": "SCNParticleEventBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/scenekit/scnparticleeventblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/scenekit/scnparticleeventblock",
      "abstract": [
        {
          "type": "text",
          "text": "The signature for blocks called by SceneKit in response to significant events during particle simulation, used by the "
        },
        {
          "type": "reference",
          "isActive": true,
          "identifier": "doc://com.apple.documentation/documentation/scenekit/scnparticlesystem/1523251-handleevent"
        },
        {
          "type": "text",
          "text": " method."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/scenekit/scnparticlesystem/1523251-handleevent",
        "doc://com.apple.documentation/documentation/scenekit/scnparticleevent"
      ],
      "title": "Modifying Particles in Response to Particle System Events",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "typedef"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": " (^"
            },
            {
              "kind": "identifier",
              "text": "SCNParticleEventBlock"
            },
            {
              "kind": "text",
              "text": ")("
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": " * "
            },
            {
              "kind": "keyword",
              "text": "_Nonnull"
            },
            {
              "kind": "text",
              "text": " *data, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@size_t",
              "identifier": "doc://com.apple.documentation/documentation/kernel/size_t",
              "text": "size_t"
            },
            {
              "kind": "text",
              "text": " *dataStride, "
            },
            {
              "kind": "keyword",
              "text": "uint32_t"
            },
            {
              "kind": "text",
              "text": " *indices, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@NSInteger",
              "identifier": "doc://com.apple.documentation/documentation/objectivec/nsinteger",
              "text": "NSInteger"
            },
            {
              "kind": "text",
              "text": " count);"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The block takes the following parameters:"
            }
          ]
        },
        {
          "type": "termList",
          "items": [
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "text",
                    "text": "data"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "An array of floating-point values containing stripes of property data for the system’s particles. The width and format of each data stripe depend on the properties you specify when calling the "
                      },
                      {
                        "type": "reference",
                        "isActive": true,
                        "identifier": "doc://com.apple.documentation/documentation/scenekit/scnparticlesystem/1523251-handleevent"
                      },
                      {
                        "type": "text",
                        "text": " method."
                      }
                    ]
                  }
                ]
              }
            },
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "text",
                    "text": "dataStride"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "An array identifying the offset, in bytes, of each property’s value in the data stripe for each particle. The order of offsets in this array corresponds to the order of the "
                      },
                      {
                        "type": "codeVoice",
                        "code": "properties"
                      },
                      {
                        "type": "text",
                        "text": " array you specify when calling the "
                      },
                      {
                        "type": "reference",
                        "isActive": true,
                        "identifier": "doc://com.apple.documentation/documentation/scenekit/scnparticlesystem/1523251-handleevent"
                      },
                      {
                        "type": "text",
                        "text": " method."
                      }
                    ]
                  }
                ]
              }
            },
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "text",
                    "text": "indices"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "An array in which each element is an index that identifies (in the "
                      },
                      {
                        "type": "codeVoice",
                        "code": "data"
                      },
                      {
                        "type": "text",
                        "text": " array) the data stripe for each particle affected by the event that caused SceneKit to call the handler block."
                      }
                    ]
                  },
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "When SceneKit calls your handler block for the "
                      },
                      {
                        "type": "reference",
                        "isActive": true,
                        "identifier": "doc://com.apple.documentation/documentation/scenekit/scnparticleevent/scnparticleeventbirth"
                      },
                      {
                        "type": "text",
                        "text": " event, you need not use this parameter—at that time, the affected particles are indexed from "
                      },
                      {
                        "type": "codeVoice",
                        "code": "0"
                      },
                      {
                        "type": "text",
                        "text": " to the "
                      },
                      {
                        "type": "codeVoice",
                        "code": "count"
                      },
                      {
                        "type": "text",
                        "text": " parameter’s value."
                      }
                    ]
                  }
                ]
              }
            },
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "text",
                    "text": "count"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "The number of particles affected by the current event."
                      }
                    ]
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Use this block to change properties of individual particles when they are spawned, when they collide with scene geometry, or when they die (that is, reach the end of their life spans and are removed from the scene). "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The following example illustrates setting up a handler block for particle collision events:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "[system handleEvent:SCNParticleEventCollision",
            "      forProperties:@[SCNParticlePropertyAngle,",
            "                      SCNParticlePropertyRotationAxis,",
            "                      SCNParticlePropertyContactNormal]",
            "          withBlock:^(void **data, size_t *dataStride, uint32_t *indices, NSInteger count) {",
            "              // For each particle affected by the collision event,",
            "              // calculate pointers in the data to each property's value.",
            "              for (NSInteger i = 0; i < count; ++i) {",
            "                  // SCNParticlePropertyAngle (float)",
            "                  float *angle = (float *)((char *)data[0] + dataStride[0] * indices[i]);",
            "                  // angle[0] is the particle's rotation angle in radians.",
            " ",
            "                  // SCNParticlePropertyRotationAxis (float3)",
            "                  float *axis = (float *)((char *)data[1] + dataStride[1] * indices[i]);",
            "                  // axis[0..2] are the xyz components of the particle's rotation axis.",
            " ",
            "                  // SCNParticlePropertyContactNormal (float3)",
            "                  float *norm = (float *)((char *)data[2] + dataStride[2] * indices[i]);",
            "                  // norm[0..2] are the xyz components of the contact normal vector.",
            " ",
            "                  // Now, use the norm vector to rotate the particle's axis/angle (not shown).",
            "              }",
            "          }];"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "2557219",
            "title": "Listing 1"
          }
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}