{
  "abstract": [
    {
      "type": "text",
      "text": "Use this entry point to modify the surface properties of a material before lighting is computed."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/scenekit",
        "doc://com.apple.documentation/documentation/scenekit/scnshadable",
        "doc://com.apple.documentation/documentation/scenekit/scnshadermodifierentrypoint"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/scenekit/scnshadermodifierentrypointsurface",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1523791,
  "kind": "symbol",
  "metadata": {
    "title": "SCNShaderModifierEntryPointSurface",
    "role": "symbol",
    "roleHeading": "Global Variable",
    "modules": [
      {
        "name": "SceneKit"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "8.0",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "8.0",
        "current": "15.2"
      },
      {
        "name": "macOS",
        "introducedAt": "10.9",
        "current": "12.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.1",
        "current": "15.2"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "current": "15.2"
      },
      {
        "name": "watchOS",
        "introducedAt": "2.0",
        "current": "8.3"
      }
    ],
    "externalID": "c:@SCNShaderModifierEntryPointSurface",
    "symbolKind": "data"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/scenekit/scnshadermodifierentrypointsurface"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/scenekit/scnshadermodifierentrypoint/1523791-surface"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/scenekit": {
      "title": "SceneKit",
      "identifier": "doc://com.apple.documentation/documentation/scenekit",
      "url": "/documentation/scenekit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/scenekit/scnshadable": {
      "title": "SCNShadable",
      "identifier": "doc://com.apple.documentation/documentation/scenekit/scnshadable",
      "url": "/documentation/scenekit/scnshadable",
      "type": "topic",
      "kind": "symbol",
      "role": "symbol"
    },
    "doc://com.apple.documentation/documentation/scenekit/scnshadermodifierentrypoint": {
      "title": "SCNShaderModifierEntryPoint",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/scenekit/scnshadermodifierentrypoint",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/scenekit/scnshadermodifierentrypoint"
    },
    "doc://com.apple.documentation/documentation/scenekit/scnshadermodifierentrypointsurface#2557249": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/scenekit/scnshadermodifierentrypointsurface#2557249",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/scenekit/scnshadermodifierentrypointsurface#2557249"
    },
    "doc://com.apple.documentation/documentation/scenekit/scnmaterialproperty": {
      "title": "SCNMaterialProperty",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/scenekit/scnmaterialproperty",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/scenekit/scnmaterialproperty"
    },
    "doc://com.apple.documentation/documentation/scenekit/scnmaterialproperty/1395388-contentstransform": {
      "title": "contentsTransform",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/scenekit/scnmaterialproperty/1395388-contentstransform",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/scenekit/scnmaterialproperty/1395388-contentstransform"
    },
    "doc://com.apple.documentation/documentation/scenekit/scnshadermodifierentrypointsurface#2557250": {
      "title": "Listing 2",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/scenekit/scnshadermodifierentrypointsurface#2557250",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/scenekit/scnshadermodifierentrypointsurface#2557250"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@SCNShaderModifierEntryPoint",
              "identifier": "doc://com.apple.documentation/documentation/scenekit/scnshadermodifierentrypoint",
              "text": "SCNShaderModifierEntryPoint"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "SCNShaderModifierEntryPointSurface"
            },
            {
              "kind": "text",
              "text": ";"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Shader modifiers for this entry point execute in the fragment processing stage."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The surface entry point defines the following structure:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "struct SCNShaderSurface {",
            "   vec3 view;                // Direction from the point on the surface toward the camera (V)",
            "   vec3 position;            // Position of the fragment",
            "   vec3 normal;              // Normal of the fragment (N)",
            "   vec3 tangent;             // Tangent of the fragment",
            "   vec3 bitangent;           // Bitangent of the fragment",
            "   vec4 ambient;             // Ambient property of the fragment",
            "   vec2 ambientTexcoord;     // Ambient texture coordinates",
            "   vec4 diffuse;             // Diffuse property of the fragment. Alpha contains the opacity.",
            "   vec2 diffuseTexcoord;     // Diffuse texture coordinates",
            "   vec4 specular;            // Specular property of the fragment",
            "   vec2 specularTexcoord;    // Specular texture coordinates",
            "   vec4 emission;            // Emission property of the fragment",
            "   vec2 emissionTexcoord;    // Emission texture coordinates",
            "   vec4 multiply;            // Multiply property of the fragment",
            "   vec2 multiplyTexcoord;    // Multiply texture coordinates",
            "   vec4 transparent;         // Transparent property of the fragment",
            "   vec2 transparentTexcoord; // Transparent texture coordinates",
            "   vec4 reflective;          // Reflective property of the fragment",
            "   float shininess;          // Shininess property of the fragment.",
            "   float fresnel;            // Fresnel property of the fragment.",
            "} _surface;"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "2557249",
            "title": "Listing 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Your shader modifier reads from this structure and writes new values to the same structure to alter the surface properties of each rendered fragment. After your shader modifier completes, SceneKit’s shader program uses these properties to compute lighting."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Geometric fields (such as "
            },
            {
              "type": "codeVoice",
              "code": "position"
            },
            {
              "type": "text",
              "text": " and "
            },
            {
              "type": "codeVoice",
              "code": "normal"
            },
            {
              "type": "text",
              "text": ") are expressed in view space. You can use SceneKit’s uniforms (such as "
            },
            {
              "type": "codeVoice",
              "code": "u_inverseViewTransform"
            },
            {
              "type": "text",
              "text": ") to operate in a different coordinate space, but you must convert back to view space before writing results."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Other fields of type "
            },
            {
              "type": "codeVoice",
              "code": "vec4"
            },
            {
              "type": "text",
              "text": " are colors provided by the contents of the corresponding "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/scenekit/scnmaterialproperty"
            },
            {
              "type": "text",
              "text": " object. Texture coordinate fields contain values transformed by the relevant material property’s "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/scenekit/scnmaterialproperty/1395388-contentstransform"
            },
            {
              "type": "text",
              "text": " transformation."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The below shader modifier produces black and white stripes on a surface:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "uniform float Scale = 12.0;",
            "uniform float Width = 0.25;",
            "uniform float Blend = 0.3;",
            " ",
            "vec2 position = fract(_surface.diffuseTexcoord * Scale);",
            "float f1 = clamp(position.y / Blend, 0.0, 1.0);",
            "float f2 = clamp((position.y - Width) / Blend, 0.0, 1.0);",
            "f1 = f1 * (1.0 - f2);",
            "f1 = f1 * f1 * 2.0 * (3. * 2. * f1);",
            "_surface.diffuse = mix(vec4(1.0), vec4(0.0), f1);"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "2557250",
            "title": "Listing 2"
          }
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}