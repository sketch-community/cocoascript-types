{
  "abstract": [
    {
      "type": "text",
      "text": "A finite-state machine—a collection of state objects that each define logic for a particular state of gameplay and rules for transitioning between states. "
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/gameplaykit"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1385742,
  "kind": "symbol",
  "metadata": {
    "title": "GKStateMachine",
    "role": "symbol",
    "roleHeading": "Class",
    "modules": [
      {
        "name": "GameplayKit"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "9.0",
        "current": "14.3"
      },
      {
        "name": "macOS",
        "introducedAt": "10.11",
        "current": "11.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "14.3"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "current": "14.3"
      }
    ],
    "externalID": "c:objc(cs)GKStateMachine",
    "symbolKind": "cl"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/gameplaykit/gkstatemachine"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/gameplaykit/gkstatemachine"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/gameplaykit": {
      "title": "GameplayKit",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit",
      "url": "/documentation/gameplaykit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstate": {
      "title": "GKState",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/gameplaykit/gkstate",
      "abstract": [
        {
          "type": "text",
          "text": "The abstract superclass for defining state-specific logic as part of a state machine."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine": {
      "title": "GKStateMachine",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/gameplaykit/gkstatemachine",
      "abstract": [
        {
          "type": "text",
          "text": "A finite-state machine—a collection of state objects that each define logic for a particular state of gameplay and rules for transitioning between states. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501221-isvalidnextstate": {
      "title": "isValidNextState:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501221-isvalidnextstate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/gameplaykit/gkstate/1501221-isvalidnextstate",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "isValidNextState:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine#1664553": {
      "title": "Creating a State Machine",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine#1664553",
      "kind": "article",
      "role": "task",
      "url": "/documentation/gameplaykit/gkstatemachine#1664553"
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385753-enterstate": {
      "title": "enterState:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385753-enterstate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/gameplaykit/gkstatemachine/1385753-enterstate",
      "abstract": [
        {
          "type": "text",
          "text": "Attempts to transition the state machine from its current state to a state of the specified class. "
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "enterState:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501076-didenterwithpreviousstate": {
      "title": "didEnterWithPreviousState:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501076-didenterwithpreviousstate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/gameplaykit/gkstate/1501076-didenterwithpreviousstate",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "didEnterWithPreviousState:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501136-updatewithdeltatime": {
      "title": "updateWithDeltaTime:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501136-updatewithdeltatime",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/gameplaykit/gkstate/1501136-updatewithdeltatime",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "updateWithDeltaTime:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501127-willexitwithnextstate": {
      "title": "willExitWithNextState:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501127-willexitwithnextstate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/gameplaykit/gkstate/1501127-willexitwithnextstate",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "willExitWithNextState:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385748-updatewithdeltatime": {
      "title": "updateWithDeltaTime:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385748-updatewithdeltatime",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/gameplaykit/gkstatemachine/1385748-updatewithdeltatime",
      "abstract": [
        {
          "type": "text",
          "text": "Tells the current state object to perform per-frame updates."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "updateWithDeltaTime:"
        }
      ]
    },
    "devLink-1757357": {
      "identifier": "devLink-1757357",
      "type": "link",
      "title": "State Machines",
      "url": "https://developer.apple.com/library/archive/documentation/General/Conceptual/GameplayKit_Guide/StateMachine.html#//apple_ref/doc/uid/TP40015172-CH7"
    },
    "devLink-1757291": {
      "identifier": "devLink-1757291",
      "type": "link",
      "title": "GameplayKit Programming Guide",
      "url": "https://developer.apple.com/library/archive/documentation/General/Conceptual/GameplayKit_Guide/index.html#//apple_ref/doc/uid/TP40015172"
    },
    "doc://com.apple.documentation/documentation/objectivec/nsobject": {
      "title": "NSObject",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/objectivec/nsobject",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/objectivec/nsobject"
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385744-initwithstates": {
      "title": "initWithStates:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385744-initwithstates",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/gameplaykit/gkstatemachine/1385744-initwithstates",
      "abstract": [
        {
          "type": "text",
          "text": "Initializes a state machine with the specified states."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "initWithStates:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385746-statemachinewithstates": {
      "title": "stateMachineWithStates:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385746-statemachinewithstates",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/gameplaykit/gkstatemachine/1385746-statemachinewithstates",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a state machine with the specified states."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "stateMachineWithStates:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385750-currentstate": {
      "title": "currentState",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385750-currentstate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/gameplaykit/gkstatemachine/1385750-currentstate",
      "abstract": [
        {
          "type": "text",
          "text": "The state machine’s current state."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385752-canenterstate": {
      "title": "canEnterState:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385752-canenterstate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/gameplaykit/gkstatemachine/1385752-canenterstate",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a Boolean value indicating whether it is valid for the state machine to transition from its current state to a state of the specified class."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "canEnterState:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385739-stateforclass": {
      "title": "stateForClass:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385739-stateforclass",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/gameplaykit/gkstatemachine/1385739-stateforclass",
      "abstract": [
        {
          "type": "text",
          "text": "Returns the state object in the state machine corresponding to the specified class."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "stateForClass:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "diffAvailability": {
    "major": {
      "change": "modified",
      "platform": "Xcode",
      "versions": [
        "12.0",
        "12.3 Release Candidate"
      ]
    }
  },
  "relationshipsSections": [
    {
      "kind": "relationships",
      "title": "Inherits From",
      "type": "inheritsFrom",
      "identifiers": [
        "doc://com.apple.documentation/documentation/objectivec/nsobject"
      ]
    }
  ],
  "topicSections": [
    {
      "kind": "taskGroup",
      "title": "Creating a State Machine",
      "identifiers": [
        "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385744-initwithstates",
        "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385746-statemachinewithstates"
      ]
    },
    {
      "kind": "taskGroup",
      "title": "Working with States",
      "identifiers": [
        "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385750-currentstate",
        "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385752-canenterstate",
        "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385753-enterstate",
        "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385739-stateforclass",
        "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385748-updatewithdeltatime"
      ]
    }
  ],
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/gameplaykit/gkstate"
      ],
      "title": "State Machines",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "@interface"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "GKStateMachine"
            },
            {
              "kind": "text",
              "text": " : "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSObject",
              "identifier": "doc://com.apple.documentation/documentation/objectivec/nsobject",
              "text": "NSObject"
            }
          ],
          "platforms": [
            "iOS",
            "macOS",
            "Mac Catalyst",
            "tvOS"
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In GameplayKit, you subclass "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate"
            },
            {
              "type": "text",
              "text": " to define each state and the rules for allowed transitions between states, and use a "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine"
            },
            {
              "type": "text",
              "text": " instance to manage a machine that combines several states. This system provides a way to organize code in your game by organizing state-dependent actions into methods that run when entering a state, when exiting a state, and periodically while in a state (for example, on every animation frame your game renders)."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You can use state machines to govern various aspects of a game. For example:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "An enemy character might use a state machine with Chase, Flee, Dead, and Respawn states, each of which drives the enemy’s behavior, with state transitions determined by player actions and elapsed time."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "An automated turret might use a state machine with Ready, Firing, and Cooldown states, controlling when it seeks out nearby targets and how often it fires."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "A game user interface might use Menu, Playing, Paused, and GameOver states, each of which determines what UI elements are shown and what other game elements are running."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To build a state machine, first define a distinct subclass of "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate"
            },
            {
              "type": "text",
              "text": " for each possible state of the machine. In each state class, the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501221-isvalidnextstate"
            },
            {
              "type": "text",
              "text": " method determines which other state classes the machine may transition into from that state. Then, create a state machine object by constructing instances of the state classes and passing them to one of the methods listed in "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine#1664553"
            },
            {
              "type": "text",
              "text": ". Finally, set the machine in motion by choosing an initial state for it to enter with the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385753-enterstate"
            },
            {
              "type": "text",
              "text": " method."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To define state-dependent behavior, override the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501076-didenterwithpreviousstate"
            },
            {
              "type": "text",
              "text": ", "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501136-updatewithdeltatime"
            },
            {
              "type": "text",
              "text": ", and "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501127-willexitwithnextstate"
            },
            {
              "type": "text",
              "text": " methods in each "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate"
            },
            {
              "type": "text",
              "text": " subclass. "
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "The state machine notifies the current state whenever a state change happens. Use the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501076-didenterwithpreviousstate"
                    },
                    {
                      "type": "text",
                      "text": " and "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501127-willexitwithnextstate"
                    },
                    {
                      "type": "text",
                      "text": " methods to perform actions in response to a state change. For example, an enemy character entering the Flee state might change its appearance to indicate that is has become vulnerable to attack by the player."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "When you call a state machine’s "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstatemachine/1385748-updatewithdeltatime"
                    },
                    {
                      "type": "text",
                      "text": " method, the state machine calls the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/gameplaykit/gkstate/1501136-updatewithdeltatime"
                    },
                    {
                      "type": "text",
                      "text": " method of its current state. Use this method to organize per-frame update code by state. For example, an enemy character in the Chase state can update its position to pursue the player, and an enemy in the Flee state can update its position to evade the player."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For more information about state machines, read "
            },
            {
              "type": "link",
              "title": "State Machines",
              "destination": "https://developer.apple.com/library/archive/documentation/General/Conceptual/GameplayKit_Guide/StateMachine.html#//apple_ref/doc/uid/TP40015172-CH7"
            },
            {
              "type": "text",
              "text": " in "
            },
            {
              "type": "link",
              "title": "GameplayKit Programming Guide",
              "destination": "https://developer.apple.com/library/archive/documentation/General/Conceptual/GameplayKit_Guide/index.html#//apple_ref/doc/uid/TP40015172"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}