{
  "abstract": [
    {
      "type": "text",
      "text": "Create an identity from a certificate and private key."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/security",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/identities"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/identities/creating_an_identity",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 2864283,
  "kind": "article",
  "metadata": {
    "title": "Creating an Identity",
    "role": "article",
    "roleHeading": "Article",
    "modules": [
      {
        "name": "Security"
      }
    ]
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/security/certificate_key_and_trust_services/identities/creating_an_identity"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/security/certificate_key_and_trust_services/identities/creating_an_identity"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/security": {
      "title": "Security",
      "identifier": "doc://com.apple.documentation/documentation/security",
      "url": "/documentation/security",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services": {
      "title": "Certificate, Key, and Trust Services",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services",
      "url": "/documentation/security/certificate_key_and_trust_services",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/identities": {
      "title": "Identities",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/identities",
      "url": "/documentation/security/certificate_key_and_trust_services/identities",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/certificates/getting_a_certificate": {
      "title": "Getting a Certificate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/certificates/getting_a_certificate",
      "kind": "article",
      "role": "article",
      "url": "/documentation/security/certificate_key_and_trust_services/certificates/getting_a_certificate"
    },
    "doc://com.apple.documentation/documentation/security/1401160-secidentitycreatewithcertificate": {
      "title": "SecIdentityCreateWithCertificate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1401160-secidentitycreatewithcertificate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1401160-secidentitycreatewithcertificate",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a new identity for a certificate and its associated private key. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/identities/creating_an_identity#2864280": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/identities/creating_an_identity#2864280",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/security/certificate_key_and_trust_services/identities/creating_an_identity#2864280"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/identities/storing_an_identity_in_the_keychain": {
      "title": "Storing an Identity in the Keychain",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/identities/storing_an_identity_in_the_keychain",
      "kind": "article",
      "role": "article",
      "url": "/documentation/security/certificate_key_and_trust_services/identities/storing_an_identity_in_the_keychain",
      "abstract": [
        {
          "type": "text",
          "text": "Securely store an identity in the keychain."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/identities/creating_an_identity": {
      "title": "Creating an Identity",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/identities/creating_an_identity",
      "kind": "article",
      "role": "article",
      "url": "/documentation/security/certificate_key_and_trust_services/identities/creating_an_identity",
      "abstract": [
        {
          "type": "text",
          "text": "Create an identity from a certificate and private key."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/secidentityref": {
      "title": "SecIdentityRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/secidentityref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/secidentityref",
      "abstract": [
        {
          "type": "text",
          "text": "An abstract Core Foundation-type object representing an identity."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1400269-secidentitygettypeid": {
      "title": "SecIdentityGetTypeID",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1400269-secidentitygettypeid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1400269-secidentitygettypeid",
      "abstract": [
        {
          "type": "text",
          "text": "Returns the unique identifier of the opaque type to which an identity object belongs."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/identities/storing_an_identity_in_the_keychain",
        "doc://com.apple.documentation/documentation/security/1401160-secidentitycreatewithcertificate",
        "doc://com.apple.documentation/documentation/security/secidentityref",
        "doc://com.apple.documentation/documentation/security/1400269-secidentitygettypeid"
      ],
      "title": "Essentials",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In macOS, you can create an identity as a combination of a certificate and a private key. You begin by obtaining a certificate reference in one of the ways described in "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/certificates/getting_a_certificate"
            },
            {
              "type": "text",
              "text": ". You then supply that reference to the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1401160-secidentitycreatewithcertificate"
            },
            {
              "type": "text",
              "text": " function:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "SecCertificateRef certificate = <# a certificate #>;",
            "SecIdentityRef identity = NULL;",
            "OSStatus status =",
            "    SecIdentityCreateWithCertificate(NULL,   // Default keychain search list",
            "                                     certificate,",
            "                                     &identity);",
            "if (status != errSecSuccess) { <# Handle error #> }",
            "else                         { <# Use identity #> }",
            " ",
            "if (identity) { CFRelease(identity); }  // After you are done with it"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "2864280",
            "title": "Listing 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The function attempts to locate the corresponding private key in the default keychain list or in the keychain or keychains that you specify as the first argument. If it succeeds, as indicated by the status result, it populates the identity reference with a pointer to a newly created identity object. Otherwise, the identity reference remains empty."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To persist a copy of the identity for later use, store it in the keychain, as described in "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/identities/storing_an_identity_in_the_keychain"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In Objective-C, when you are done with the identity, you are responsible for freeing the object’s memory. In Swift, the system manages the object’s memory automatically, releasing it when the object goes out of scope."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}