{
  "abstract": [
    {
      "type": "text",
      "text": "Determine whether you can recover from a failed trust evaluation."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/security",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/discovering_why_a_trust_evaluation_failed",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 2874968,
  "kind": "article",
  "metadata": {
    "title": "Discovering Why a Trust Evaluation Failed",
    "role": "article",
    "roleHeading": "Article",
    "modules": [
      {
        "name": "Security"
      }
    ]
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/security/certificate_key_and_trust_services/trust/discovering_why_a_trust_evaluation_failed"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/security/certificate_key_and_trust_services/trust/discovering_why_a_trust_evaluation_failed"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/security": {
      "title": "Security",
      "identifier": "doc://com.apple.documentation/documentation/security",
      "url": "/documentation/security",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services": {
      "title": "Certificate, Key, and Trust Services",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services",
      "url": "/documentation/security/certificate_key_and_trust_services",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust": {
      "title": "Trust",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust",
      "url": "/documentation/security/certificate_key_and_trust_services/trust",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/evaluating_a_trust_and_parsing_the_result": {
      "title": "Evaluating a Trust and Parsing the Result",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/evaluating_a_trust_and_parsing_the_result",
      "kind": "article",
      "role": "article",
      "url": "/documentation/security/certificate_key_and_trust_services/trust/evaluating_a_trust_and_parsing_the_result"
    },
    "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errseccertificaterevoked": {
      "title": "errSecCertificateRevoked",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errseccertificaterevoked",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1542001-security_framework_result_codes/errseccertificaterevoked"
    },
    "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errseccertificateexpired": {
      "title": "errSecCertificateExpired",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errseccertificateexpired",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1542001-security_framework_result_codes/errseccertificateexpired"
    },
    "doc://com.apple.documentation/documentation/security/1396077-sectrustgettrustresult": {
      "title": "SecTrustGetTrustResult",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1396077-sectrustgettrustresult",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1396077-sectrustgettrustresult",
      "abstract": [
        {
          "type": "text",
          "text": "Returns the result code from the most recent trust evaluation."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/discovering_why_a_trust_evaluation_failed#2874969": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/discovering_why_a_trust_evaluation_failed#2874969",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/security/certificate_key_and_trust_services/trust/discovering_why_a_trust_evaluation_failed#2874969"
    },
    "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultrecoverabletrustfailure": {
      "title": "kSecTrustResultRecoverableTrustFailure",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultrecoverabletrustfailure",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustresulttype/ksectrustresultrecoverabletrustfailure"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/configuring_a_trust": {
      "title": "Configuring a Trust",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/configuring_a_trust",
      "kind": "article",
      "role": "article",
      "url": "/documentation/security/certificate_key_and_trust_services/trust/configuring_a_trust"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/discovering_why_a_trust_evaluation_failed": {
      "title": "Discovering Why a Trust Evaluation Failed",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/discovering_why_a_trust_evaluation_failed",
      "kind": "article",
      "role": "article",
      "url": "/documentation/security/certificate_key_and_trust_services/trust/discovering_why_a_trust_evaluation_failed",
      "abstract": [
        {
          "type": "text",
          "text": "Determine whether you can recover from a failed trust evaluation."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/sectrustresulttype": {
      "title": "SecTrustResultType",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustresulttype",
      "abstract": [
        {
          "type": "text",
          "text": "Trust evaluation result codes."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1398612-sectrustcopyresult": {
      "title": "SecTrustCopyResult",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1398612-sectrustcopyresult",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1398612-sectrustcopyresult",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a dictionary containing information about an evaluated trust."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/trust_result_dictionary_keys": {
      "title": "Trust Result Dictionary Keys",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/trust_result_dictionary_keys",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/security/certificate_key_and_trust_services/trust/trust_result_dictionary_keys",
      "abstract": [
        {
          "type": "text",
          "text": "Recognize the keys that appear in a dictionary containing information about an evaluated certification chain."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/security/1396077-sectrustgettrustresult",
        "doc://com.apple.documentation/documentation/security/sectrustresulttype",
        "doc://com.apple.documentation/documentation/security/1398612-sectrustcopyresult",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/trust_result_dictionary_keys"
      ],
      "title": "Trust Evaluation Result",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Many factors affect the outcome of a trust evaluation. These include whether the system can locate all of the intermediate certificates, the validity of the certificates in the chain, and the characteristics of the certificates. Some issues, like a revoked certificate, result in an absolute failure and should "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "not"
                }
              ]
            },
            {
              "type": "text",
              "text": " be circumvented. In other cases, you might get a different result by changing the conditions of the evaluation. For example, an expired certificate might have been valid when the corresponding identity was used to sign a document."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To get the specific reason for trust failure, examine the error parameter provided in the evaluation callback described in "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/evaluating_a_trust_and_parsing_the_result"
            },
            {
              "type": "text",
              "text": ". The error’s code indicates the reason, or in the case of multiple errors, the most serious reason for the failure. For example, a revoked certificate results in an error with the code "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errseccertificaterevoked"
            },
            {
              "type": "text",
              "text": ", while an expired certificate produces "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errseccertificateexpired"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To determine whether the system considers the failure recoverable, use the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1396077-sectrustgettrustresult"
            },
            {
              "type": "text",
              "text": " method."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "SecTrustResultType trustResult;",
            "SecTrustGetTrustResult(trust, &trustResult);",
            "if (trustResult == kSecTrustResultRecoverableTrustFailure) {",
            "    // Make changes and try again.",
            "}"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "2874969",
            "title": "Listing 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For a result of "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultrecoverabletrustfailure"
            },
            {
              "type": "text",
              "text": ", and based on the error you receive, you may be able to remedy problems by reconfiguring and reevaluating the trust, as described in "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/configuring_a_trust"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}