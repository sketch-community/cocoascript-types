{
  "abstract": [
    {
      "type": "text",
      "text": "Retrieves the user-specified trust setting for a certificate and policy."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/security",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805379-sectrustgetusertrust",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1805379,
  "kind": "symbol",
  "metadata": {
    "title": "SecTrustGetUserTrust",
    "role": "pseudoSymbol",
    "modules": [
      {
        "name": "Security"
      }
    ],
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/security/certificate_key_and_trust_services/trust/1805379-sectrustgetusertrust"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/security": {
      "title": "Security",
      "identifier": "doc://com.apple.documentation/documentation/security",
      "url": "/documentation/security",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services": {
      "title": "Certificate, Key, and Trust Services",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services",
      "url": "/documentation/security/certificate_key_and_trust_services",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust": {
      "title": "Trust",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust",
      "url": "/documentation/security/certificate_key_and_trust_services/trust",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/security/1562856-secpolicysearchcopynext": {
      "title": "SecPolicySearchCopyNext",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1562856-secpolicysearchcopynext",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1562856-secpolicysearchcopynext"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805395-sectrustsetusertrust": {
      "title": "SecTrustSetUserTrust",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805395-sectrustsetusertrust",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "url": "/documentation/security/certificate_key_and_trust_services/trust/1805395-sectrustsetusertrust",
      "abstract": [
        {
          "type": "text",
          "text": "Sets the user-specified trust settings of a certificate and policy. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1399119-sectrustsettingssettrustsettings": {
      "title": "SecTrustSettingsSetTrustSettings",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1399119-sectrustsettingssettrustsettings",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1399119-sectrustsettingssettrustsettings",
      "abstract": [
        {
          "type": "text",
          "text": "Specifies trust settings for a certificate."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1394363-sectrustevaluate": {
      "title": "SecTrustEvaluate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1394363-sectrustevaluate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1394363-sectrustevaluate",
      "abstract": [
        {
          "type": "text",
          "text": "Evaluates trust for the specified certificate and policies."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805379-sectrustgetusertrust": {
      "title": "SecTrustGetUserTrust",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805379-sectrustgetusertrust",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "url": "/documentation/security/certificate_key_and_trust_services/trust/1805379-sectrustgetusertrust",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves the user-specified trust setting for a certificate and policy."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/sectrustresulttype": {
      "title": "SecTrustResultType",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustresulttype"
    },
    "doc://com.apple.documentation/documentation/security/1397216-sectrustsetverifydate": {
      "title": "SecTrustSetVerifyDate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1397216-sectrustsetverifydate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1397216-sectrustsetverifydate"
    },
    "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes": {
      "title": "Security Framework Result Codes",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes",
      "kind": "symbol",
      "role": "containerSymbol",
      "url": "/documentation/security/1542001-security_framework_result_codes"
    },
    "doc://com.apple.documentation/documentation/security/1400261-sectrustsettingscopytrustsetting": {
      "title": "SecTrustSettingsCopyTrustSettings",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1400261-sectrustsettingscopytrustsetting",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1400261-sectrustsettingscopytrustsetting",
      "abstract": [
        {
          "type": "text",
          "text": "Obtains the trust settings for a certificate."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1400632-sectrustevaluateasync": {
      "title": "SecTrustEvaluateAsync",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1400632-sectrustevaluateasync",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1400632-sectrustevaluateasync",
      "abstract": [
        {
          "type": "text",
          "text": "Evaluates a trust object asynchronously on the specified dispatch queue."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/sectrustcallback": {
      "title": "SecTrustCallback",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustcallback",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustcallback",
      "abstract": [
        {
          "type": "text",
          "text": "A block called with the results of an asynchronous trust evaluation."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/sectrustusersetting": {
      "title": "SecTrustUserSetting",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustusersetting",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustusersetting",
      "abstract": [
        {
          "type": "text",
          "text": "Represents user-specified trust settings."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1524326-sectrustsetparameters": {
      "title": "SecTrustSetParameters",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1524326-sectrustsetparameters",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1524326-sectrustsetparameters",
      "abstract": [
        {
          "type": "text",
          "text": "Sets the action and action data for a trust management object. "
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1395644-sectrustsetkeychains": {
      "title": "SecTrustSetKeychains",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1395644-sectrustsetkeychains",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1395644-sectrustsetkeychains",
      "abstract": [
        {
          "type": "text",
          "text": "Sets the keychains searched for intermediate certificates when evaluating a trust management object."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805368-sectrustgetcssmanchorcertificate": {
      "title": "SecTrustGetCSSMAnchorCertificates",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805368-sectrustgetcssmanchorcertificate",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "url": "/documentation/security/certificate_key_and_trust_services/trust/1805368-sectrustgetcssmanchorcertificate",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves the CSSM anchor certificates."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1524311-sectrustgetcssmresult": {
      "title": "SecTrustGetCssmResult",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1524311-sectrustgetcssmresult",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1524311-sectrustgetcssmresult",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves the CSSM trust result."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1524327-sectrustgetcssmresultcode": {
      "title": "SecTrustGetCssmResultCode",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1524327-sectrustgetcssmresultcode",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1524327-sectrustgetcssmresultcode",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves the CSSM result code from the most recent trust evaluation for a trust management object."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1524309-sectrustgettphandle": {
      "title": "SecTrustGetTPHandle",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1524309-sectrustgettphandle",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1524309-sectrustgettphandle",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves the trust policy handle."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1524331-sectrustgetresult": {
      "title": "SecTrustGetResult",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1524331-sectrustgetresult",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1524331-sectrustgetresult",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves details on the outcome of a call to the function "
        },
        {
          "type": "codeVoice",
          "code": "SecTrustEvaluate"
        },
        {
          "type": "text",
          "text": "."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "deprecationSummary": [
    {
      "type": "paragraph",
      "inlineContent": [
        {
          "type": "text",
          "text": "Use "
        },
        {
          "type": "reference",
          "isActive": true,
          "identifier": "doc://com.apple.documentation/documentation/security/1400261-sectrustsettingscopytrustsetting"
        },
        {
          "type": "text",
          "text": " for new development instead."
        }
      ]
    }
  ],
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/security/1394363-sectrustevaluate",
        "doc://com.apple.documentation/documentation/security/1400632-sectrustevaluateasync",
        "doc://com.apple.documentation/documentation/security/sectrustcallback",
        "doc://com.apple.documentation/documentation/security/sectrustusersetting",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805395-sectrustsetusertrust",
        "doc://com.apple.documentation/documentation/security/1524326-sectrustsetparameters",
        "doc://com.apple.documentation/documentation/security/1395644-sectrustsetkeychains",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805368-sectrustgetcssmanchorcertificate",
        "doc://com.apple.documentation/documentation/security/1524311-sectrustgetcssmresult",
        "doc://com.apple.documentation/documentation/security/1524327-sectrustgetcssmresultcode",
        "doc://com.apple.documentation/documentation/security/1524309-sectrustgettphandle",
        "doc://com.apple.documentation/documentation/security/1524331-sectrustgetresult"
      ],
      "title": "Legacy Symbols",
      "generated": true
    },
    {
      "title": "Related Documentation",
      "generated": false,
      "identifiers": [
        "doc://com.apple.documentation/documentation/security/1399119-sectrustsettingssettrustsettings",
        "doc://com.apple.documentation/documentation/security/1400261-sectrustsettingscopytrustsetting"
      ]
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "text",
              "text": "OSStatus SecTrustGetUserTrust ("
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": "   SecCertificateRef certificate,"
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": "   SecPolicyRef policy,"
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": "   SecTrustUserSetting *trustSetting"
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": ");"
            }
          ],
          "platforms": []
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "certificate",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The certificate object from which to obtain the user-specified trust setting. "
                }
              ]
            }
          ]
        },
        {
          "name": "policy",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The policy object for the policy for which to obtain the user-specified trust setting. Use the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/1562856-secpolicysearchcopynext"
                },
                {
                  "type": "text",
                  "text": " function to obtain a policy object."
                }
              ]
            }
          ]
        },
        {
          "name": "trustSetting",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, points to the user-specified trust setting for the specified certificate and policy."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A result code. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Each certificate has one user-specified trust setting per policy. For each policy, the user can specify that the certificate is always to be trusted, is never to be trusted, or can be trusted only after permission is requested from—and granted by—the user. It is also possible for there to be no user-specified trust setting for a policy. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1394363-sectrustevaluate"
            },
            {
              "type": "text",
              "text": " for a discussion of the use of user-specified trust settings in a trust evaluation."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805379-sectrustgetusertrust"
            },
            {
              "type": "text",
              "text": " function returns the effective user trust setting for the certificate and policy specified. You can obtain a certificate from a keychain and typecast the keychain item object (data type "
            },
            {
              "type": "codeVoice",
              "code": "SecKeychainItemRef"
            },
            {
              "type": "text",
              "text": ") to a certificate object ("
            },
            {
              "type": "codeVoice",
              "code": "SecCertificateRef"
            },
            {
              "type": "text",
              "text": "). "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype"
            },
            {
              "type": "text",
              "text": " for values and descriptions of the user-specified trust settings. The user can set these values in the Keychain Access utility. If you provide your own UI for these settings, you can use the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1399119-sectrustsettingssettrustsettings"
            },
            {
              "type": "text",
              "text": " function to set them."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "It is safe to call this function concurrently on two or more threads as long as it is not used to get values from a trust management object that is simultaneously being changed by another function. For example, you can call this function on two threads at the same time, but not if you are simultaneously calling the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1397216-sectrustsetverifydate"
            },
            {
              "type": "text",
              "text": " function for the same trust management object on another thread. "
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Special Considerations",
          "anchor": "1819540"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Prior to OS X v10.5, the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805395-sectrustsetusertrust"
            },
            {
              "type": "text",
              "text": " function did not require user authentication in order to change trust settings. Starting with OS X v10.5, that function is a shell for the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1399119-sectrustsettingssettrustsettings"
            },
            {
              "type": "text",
              "text": " function, which requires the user to authenticate before changing trust settings. Therefore, the function might block while waiting for user input."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}