{
  "abstract": [
    {
      "type": "text",
      "text": "Makes the calling thread the proxy for a specified guest."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/security",
        "doc://com.apple.documentation/documentation/security/code_signing_services"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/security/1401329-sechostselectguest",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1401329,
  "kind": "symbol",
  "metadata": {
    "title": "SecHostSelectGuest",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Security"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.5",
        "deprecatedAt": "10.6",
        "current": "11.1",
        "deprecated": true
      }
    ],
    "externalID": "c:@F@SecHostSelectGuest",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/security/1401329-sechostselectguest"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/security": {
      "title": "Security",
      "identifier": "doc://com.apple.documentation/documentation/security",
      "url": "/documentation/security",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/security/code_signing_services": {
      "title": "Code Signing Services",
      "identifier": "doc://com.apple.documentation/documentation/security/code_signing_services",
      "url": "/documentation/security/code_signing_services",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/security/1574088-code_signing_services_result_cod": {
      "title": "Code Signing Services Result Codes",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1574088-code_signing_services_result_cod",
      "kind": "symbol",
      "role": "containerSymbol",
      "url": "/documentation/security/1574088-code_signing_services_result_cod"
    },
    "doc://com.apple.documentation/documentation/security/1574087-null_guest_handle/ksecnoguest": {
      "title": "kSecNoGuest",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1574087-null_guest_handle/ksecnoguest",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1574087-null_guest_handle/ksecnoguest"
    },
    "doc://com.apple.documentation/documentation/security/seccsflags": {
      "title": "SecCSFlags",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/seccsflags",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/seccsflags"
    },
    "doc://com.apple.documentation/documentation/security/seccsflags/kseccsdefaultflags": {
      "title": "kSecCSDefaultFlags",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/seccsflags/kseccsdefaultflags",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/seccsflags/kseccsdefaultflags"
    },
    "doc://com.apple.documentation/documentation/security/1396527-sechostselectedguest": {
      "title": "SecHostSelectedGuest",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1396527-sechostselectedguest",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1396527-sechostselectedguest",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves the handle for the guest currently selected for the calling thread."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1396597-sechostcreateguest": {
      "title": "SecHostCreateGuest",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1396597-sechostcreateguest",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1396597-sechostcreateguest",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a new guest and describes its initial properties."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/secguestref": {
      "title": "SecGuestRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/secguestref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/secguestref"
    },
    "doc://com.apple.documentation/documentation/security/1398794-seccodecopyhost": {
      "title": "SecCodeCopyHost",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1398794-seccodecopyhost",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1398794-seccodecopyhost",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves the code object for the host of specified guest code."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1401699-sechostremoveguest": {
      "title": "SecHostRemoveGuest",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1401699-sechostremoveguest",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1401699-sechostremoveguest",
      "abstract": [
        {
          "type": "text",
          "text": "Removes a guest from a host."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1401329-sechostselectguest": {
      "title": "SecHostSelectGuest",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1401329-sechostselectguest",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1401329-sechostselectguest",
      "abstract": [
        {
          "type": "text",
          "text": "Makes the calling thread the proxy for a specified guest."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1392127-sechostsethostingport": {
      "title": "SecHostSetHostingPort",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1392127-sechostsethostingport",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1392127-sechostsethostingport",
      "abstract": [
        {
          "type": "text",
          "text": "Tells code signing services that the calling code will directly respond to hosting inquiries over the given port."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1393719-seccodemapmemory": {
      "title": "SecCodeMapMemory",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1393719-seccodemapmemory",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1393719-seccodemapmemory",
      "abstract": [
        {
          "type": "text",
          "text": "Asks the kernel to accept the signing information currently attached to a code object and uses it to validate memory page-ins."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/security/1398794-seccodecopyhost",
        "doc://com.apple.documentation/documentation/security/1401699-sechostremoveguest",
        "doc://com.apple.documentation/documentation/security/1396527-sechostselectedguest",
        "doc://com.apple.documentation/documentation/security/1392127-sechostsethostingport",
        "doc://com.apple.documentation/documentation/security/1393719-seccodemapmemory"
      ],
      "title": "Guest Management",
      "generated": true
    },
    {
      "title": "Related Documentation",
      "generated": false,
      "identifiers": [
        "doc://com.apple.documentation/documentation/security/1396597-sechostcreateguest"
      ]
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "identifier": "symbol-1480124",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "SecHostSelectGuest"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@SecGuestRef",
              "identifier": "doc://com.apple.documentation/documentation/security/secguestref",
              "text": "SecGuestRef"
            },
            {
              "kind": "text",
              "text": " guestRef, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@SecCSFlags",
              "identifier": "doc://com.apple.documentation/documentation/security/seccsflags",
              "text": "SecCSFlags"
            },
            {
              "kind": "text",
              "text": " flags);"
            }
          ],
          "platforms": [
            "macOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "guestRef",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A guest code object identifying the code on whose behalf the calling thread is to act. To indicate that the calling thread will act on its own behalf, rather than for any guest, pass "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/1574087-null_guest_handle/ksecnoguest"
                },
                {
                  "type": "text",
                  "text": ". "
                }
              ]
            }
          ]
        },
        {
          "name": "flags",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Optional flags; see "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/seccsflags"
                },
                {
                  "type": "text",
                  "text": " for possible values. Pass "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/seccsflags/kseccsdefaultflags"
                },
                {
                  "type": "text",
                  "text": " for standard behavior."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A result code. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1574088-code_signing_services_result_cod"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The specified guest must be dynamically valid. This function works both for hosts acting in proxy mode and those acting in dynamic mode. The selected guest setting remains in effect until it is changed or the thread terminates."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This function tells the system that your application is acting on behalf of the selected guest (or on its own behalf if you specify "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1574087-null_guest_handle/ksecnoguest"
            },
            {
              "type": "text",
              "text": " for the "
            },
            {
              "type": "codeVoice",
              "code": "guestRef"
            },
            {
              "type": "text",
              "text": " parameter). This function acts on a per-thread basis; that is, each of your application’s threads can call this function to select a guest for that thread. Thereafter, the system assumes that any action taken by your application on that thread is on behalf of the selected guest. For example, if your application attempts to access the keychain, the system assumes that the selected guest is the application that is attempting to access the keychain and acts accordingly. You can call this function as often as necessary to act on behalf of as many guests as you wish."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Note that if you are using blocks to implement concurrency, you can’t tell which thread your code will be running on. Therefore, you must make this function call at the beginning of each block to be sure that the guest selection is set correctly for the thread. "
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}