{
  "abstract": [
    {
      "type": "text",
      "text": "Creates a new guest and describes its initial properties."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/security",
        "doc://com.apple.documentation/documentation/security/code_signing_services"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/security/1396597-sechostcreateguest",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1396597,
  "kind": "symbol",
  "metadata": {
    "title": "SecHostCreateGuest",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Security"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.5",
        "deprecatedAt": "10.6",
        "current": "12.1",
        "deprecated": true
      }
    ],
    "externalID": "c:@F@SecHostCreateGuest",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/security/1396597-sechostcreateguest"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/security": {
      "title": "Security",
      "identifier": "doc://com.apple.documentation/documentation/security",
      "url": "/documentation/security",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/security/code_signing_services": {
      "title": "Code Signing Services",
      "identifier": "doc://com.apple.documentation/documentation/security/code_signing_services",
      "url": "/documentation/security/code_signing_services",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/security/1574088-code_signing_services_result_cod": {
      "title": "Code Signing Services Result Codes",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1574088-code_signing_services_result_cod",
      "kind": "symbol",
      "role": "containerSymbol",
      "url": "/documentation/security/1574088-code_signing_services_result_cod"
    },
    "doc://com.apple.documentation/documentation/security/1396597-sechostcreateguest": {
      "title": "SecHostCreateGuest",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1396597-sechostcreateguest",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1396597-sechostcreateguest",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a new guest and describes its initial properties."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1397494-sechostsetgueststatus": {
      "title": "SecHostSetGuestStatus",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1397494-sechostsetgueststatus",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1397494-sechostsetgueststatus",
      "abstract": [
        {
          "type": "text",
          "text": "Updates the status and attributes of a particular guest."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1401699-sechostremoveguest": {
      "title": "SecHostRemoveGuest",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1401699-sechostremoveguest",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1401699-sechostremoveguest",
      "abstract": [
        {
          "type": "text",
          "text": "Removes a guest from a host."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1574087-null_guest_handle/ksecnoguest": {
      "title": "kSecNoGuest",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1574087-null_guest_handle/ksecnoguest",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1574087-null_guest_handle/ksecnoguest"
    },
    "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags/kseccsdedicatedhost": {
      "title": "kSecCSDedicatedHost",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags/kseccsdedicatedhost",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1560749-guest_creation_flags/kseccsdedicatedhost"
    },
    "doc://com.apple.documentation/documentation/security/seccodestatus": {
      "title": "SecCodeStatus",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/seccodestatus",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/seccodestatus",
      "abstract": [
        {
          "type": "text",
          "text": "Operational flags attached by code signing services to running code. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/seccodestatus/kseccodestatusvalid": {
      "title": "kSecCodeStatusValid",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/seccodestatus/kseccodestatusvalid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/seccodestatus/kseccodestatusvalid"
    },
    "doc://com.apple.documentation/documentation/security/1396899-secstaticcodecreatewithpath": {
      "title": "SecStaticCodeCreateWithPath",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1396899-secstaticcodecreatewithpath",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1396899-secstaticcodecreatewithpath"
    },
    "doc://com.apple.documentation/documentation/security/ksecguestattributecanonical": {
      "title": "kSecGuestAttributeCanonical",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/ksecguestattributecanonical",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/ksecguestattributecanonical"
    },
    "doc://com.apple.documentation/documentation/security/secguestref": {
      "title": "SecGuestRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/secguestref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/secguestref",
      "abstract": [
        {
          "type": "text",
          "text": "A reference to a guest object, which identifies a particular block of guest code in the context of its code signing host."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/code_signing_services/guest_attribute_dictionary_keys": {
      "title": "Guest Attribute Dictionary Keys",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/code_signing_services/guest_attribute_dictionary_keys",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/security/code_signing_services/guest_attribute_dictionary_keys",
      "abstract": [
        {
          "type": "text",
          "text": "Specify attributes of guest code."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/seccsflags": {
      "title": "SecCSFlags",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/seccsflags",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/seccsflags"
    },
    "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags": {
      "title": "Guest Creation Flags",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags",
      "kind": "symbol",
      "role": "containerSymbol",
      "url": "/documentation/security/1560749-guest_creation_flags",
      "abstract": [
        {
          "type": "text",
          "text": "Use these supplemental flags to create a guest object."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/seccsflags/kseccsdefaultflags": {
      "title": "kSecCSDefaultFlags",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/seccsflags/kseccsdefaultflags",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/seccsflags/kseccsdefaultflags"
    },
    "doc://com.apple.documentation/documentation/security/1401329-sechostselectguest": {
      "title": "SecHostSelectGuest",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1401329-sechostselectguest",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1401329-sechostselectguest",
      "abstract": [
        {
          "type": "text",
          "text": "Makes the calling thread the proxy for a specified guest."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1392127-sechostsethostingport": {
      "title": "SecHostSetHostingPort",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1392127-sechostsethostingport",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1392127-sechostsethostingport",
      "abstract": [
        {
          "type": "text",
          "text": "Tells code signing services that the calling code will directly respond to hosting inquiries over the given port."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1395560-seccodecopyguestwithattributes": {
      "title": "SecCodeCopyGuestWithAttributes",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1395560-seccodecopyguestwithattributes",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1395560-seccodecopyguestwithattributes",
      "abstract": [
        {
          "type": "text",
          "text": "Asks a code host to identify one of its guests given the type and value of specific attributes of the guest code."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corefoundation/cfurlref": {
      "title": "CFURLRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corefoundation/cfurlref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corefoundation/cfurlref"
    },
    "doc://com.apple.documentation/documentation/corefoundation/cfdictionaryref": {
      "title": "CFDictionaryRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corefoundation/cfdictionaryref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corefoundation/cfdictionaryref"
    },
    "doc://com.apple.documentation/documentation/security/code_signing_services/hosting_guest_code": {
      "title": "Hosting Guest Code",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/code_signing_services/hosting_guest_code",
      "kind": "article",
      "role": "article",
      "url": "/documentation/security/code_signing_services/hosting_guest_code",
      "abstract": [
        {
          "type": "text",
          "text": "Securely launch and manage plug-ins and other executable entities, known as guest code, from within your app acting as a host."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1574087-null_guest_handle": {
      "title": "Null Guest Handle",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1574087-null_guest_handle",
      "kind": "symbol",
      "role": "containerSymbol",
      "url": "/documentation/security/1574087-null_guest_handle",
      "abstract": [
        {
          "type": "text",
          "text": "Use this special value to stand in for a null guest object."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/security/code_signing_services/hosting_guest_code",
        "doc://com.apple.documentation/documentation/security/1397494-sechostsetgueststatus",
        "doc://com.apple.documentation/documentation/security/1395560-seccodecopyguestwithattributes",
        "doc://com.apple.documentation/documentation/security/1574087-null_guest_handle",
        "doc://com.apple.documentation/documentation/security/seccodestatus",
        "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags",
        "doc://com.apple.documentation/documentation/security/code_signing_services/guest_attribute_dictionary_keys",
        "doc://com.apple.documentation/documentation/security/secguestref"
      ],
      "title": "Guest Code",
      "generated": true
    },
    {
      "title": "Related Documentation",
      "generated": false,
      "identifiers": [
        "doc://com.apple.documentation/documentation/security/1401329-sechostselectguest",
        "doc://com.apple.documentation/documentation/security/1392127-sechostsethostingport",
        "doc://com.apple.documentation/documentation/security/1401699-sechostremoveguest"
      ]
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "identifier": "symbol-1480124",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "SecHostCreateGuest"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@SecGuestRef",
              "identifier": "doc://com.apple.documentation/documentation/security/secguestref",
              "text": "SecGuestRef"
            },
            {
              "kind": "text",
              "text": " host, "
            },
            {
              "kind": "keyword",
              "text": "uint32_t"
            },
            {
              "kind": "text",
              "text": " status, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CFURLRef",
              "identifier": "doc://com.apple.documentation/documentation/corefoundation/cfurlref",
              "text": "CFURLRef"
            },
            {
              "kind": "text",
              "text": " path, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CFDictionaryRef",
              "identifier": "doc://com.apple.documentation/documentation/corefoundation/cfdictionaryref",
              "text": "CFDictionaryRef"
            },
            {
              "kind": "text",
              "text": " attributes, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@SecCSFlags",
              "identifier": "doc://com.apple.documentation/documentation/security/seccsflags",
              "text": "SecCSFlags"
            },
            {
              "kind": "text",
              "text": " flags, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@SecGuestRef",
              "identifier": "doc://com.apple.documentation/documentation/security/secguestref",
              "text": "SecGuestRef"
            },
            {
              "kind": "text",
              "text": " *newGuest);"
            }
          ],
          "platforms": [
            "macOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "host",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A guest code object identifying the code that is to be the direct host of the new guest. Pass "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/1574087-null_guest_handle/ksecnoguest"
                },
                {
                  "type": "text",
                  "text": " if the process calling this function is to be the host. To create a guest of another guest (extending the hosting chain), pass the guest code object of the guest that is to act as the new guest’s host. If the specified host already has a dedicated guest, then that dedicated guest becomes the actual host of the new guest (unless the dedicated guest also has a dedicated guest, in which case the same algorithm is replied recursively). See "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags/kseccsdedicatedhost"
                },
                {
                  "type": "text",
                  "text": " for a discussion of dedicated hosts."
                }
              ]
            }
          ]
        },
        {
          "name": "status",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Code status flags for the new guest (see "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/seccodestatus"
                },
                {
                  "type": "text",
                  "text": "). Note that certain code status flags can be set only once, by the caller of the "
                },
                {
                  "type": "reference",
                  "isActive": false,
                  "identifier": "doc://com.apple.documentation/documentation/security/1396597-sechostcreateguest"
                },
                {
                  "type": "text",
                  "text": " function when it creates the guest. In particular, if you do not set the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/seccodestatus/kseccodestatusvalid"
                },
                {
                  "type": "text",
                  "text": " flag during creation of the guest, then the new guest is created dynamically invalid and can never become dynamically valid."
                }
              ]
            }
          ]
        },
        {
          "name": "path",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The canonical path to the guest’s code on disk. This is the path you would pass to the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/1396899-secstaticcodecreatewithpath"
                },
                {
                  "type": "text",
                  "text": " function to make a static code object reference. You must use an absolute path."
                }
              ]
            }
          ]
        },
        {
          "name": "attributes",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "A key-value dictionary of attributes that can be used to identify this particular guest among all of the caller’s guests. The "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/ksecguestattributecanonical"
                },
                {
                  "type": "text",
                  "text": " attribute—containing the guest’s code object (that is, the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/secguestref"
                },
                {
                  "type": "text",
                  "text": " object returned in the "
                },
                {
                  "type": "codeVoice",
                  "code": "newGuest"
                },
                {
                  "type": "text",
                  "text": " parameter) is automatically added to the guest’s attributes. Pass "
                },
                {
                  "type": "codeVoice",
                  "code": "NULL"
                },
                {
                  "type": "text",
                  "text": " for this parameter if you do not want to establish any other attributes for this guest. Although you can specify any key-value pairs in this attributes dictionary, the keys in "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/code_signing_services/guest_attribute_dictionary_keys"
                },
                {
                  "type": "text",
                  "text": " are conventionally used for this purpose. "
                }
              ]
            }
          ]
        },
        {
          "name": "flags",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Optional flags; see "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/seccsflags"
                },
                {
                  "type": "text",
                  "text": " and "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags"
                },
                {
                  "type": "text",
                  "text": " for possible values. Pass "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/seccsflags/kseccsdefaultflags"
                },
                {
                  "type": "text",
                  "text": " for standard behavior. Pass "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags/kseccsdedicatedhost"
                },
                {
                  "type": "text",
                  "text": " to make the code specified in the "
                },
                {
                  "type": "codeVoice",
                  "code": "host"
                },
                {
                  "type": "text",
                  "text": " parameter the dedicated host for the new guest."
                }
              ]
            }
          ]
        },
        {
          "name": "newGuest",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, the guest code object that identifies the new guest."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A result code. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1574088-code_signing_services_result_cod"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Code that calls this function becomes a code host operating in proxy hosting mode. Subsequently, Code Signing Services caches information about guest code provided by the host when it calls the "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/security/1396597-sechostcreateguest"
            },
            {
              "type": "text",
              "text": ", "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1397494-sechostsetgueststatus"
            },
            {
              "type": "text",
              "text": ", and "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1401699-sechostremoveguest"
            },
            {
              "type": "text",
              "text": " functions. Code Signing Services uses this information to report hosting status to callers directly without consulting the host. A code host running in proxy hosting mode cannot switch to dynamic hosting mode."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}