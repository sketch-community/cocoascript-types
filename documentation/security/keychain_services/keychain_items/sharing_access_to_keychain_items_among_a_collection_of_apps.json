{
  "abstract": [
    {
      "type": "text",
      "text": "Enable apps to share keychain items with each other by adding the apps to an access group."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/security",
        "doc://com.apple.documentation/documentation/security/keychain_services",
        "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items"
      ],
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/security",
        "doc://com.apple.documentation/documentation/security/keychain_services",
        "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items",
        "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/using_the_keychain_to_manage_user_secrets"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 2972431,
  "kind": "article",
  "metadata": {
    "title": "Sharing Access to Keychain Items Among a Collection of Apps",
    "role": "article",
    "roleHeading": "Article",
    "modules": [
      {
        "name": "Security"
      }
    ]
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps",
        "documentation/security/keychain_services/keychain_items/using_the_keychain_to_manage_user_secrets/sharing_access_to_keychain_items_among_a_collection_of_apps"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps",
        "documentation/security/keychain_services/keychain_items/using_the_keychain_to_manage_user_secrets/sharing_access_to_keychain_items_among_a_collection_of_apps"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/security": {
      "title": "Security",
      "identifier": "doc://com.apple.documentation/documentation/security",
      "url": "/documentation/security",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/security/keychain_services": {
      "title": "Keychain Services",
      "identifier": "doc://com.apple.documentation/documentation/security/keychain_services",
      "url": "/documentation/security/keychain_services",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items": {
      "title": "Keychain Items",
      "identifier": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items",
      "url": "/documentation/security/keychain_services/keychain_items",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/using_the_keychain_to_manage_user_secrets": {
      "title": "Using the Keychain to Manage User Secrets",
      "identifier": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/using_the_keychain_to_manage_user_secrets",
      "url": "/documentation/security/keychain_services/keychain_items/using_the_keychain_to_manage_user_secrets",
      "type": "topic",
      "kind": "article",
      "role": "article"
    },
    "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974920": {
      "title": "Listing 3",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974920",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974920"
    },
    "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974919": {
      "title": "Listing 4",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974919",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974919"
    },
    "link-media-2983093": {
      "identifier": "link-media-2983093",
      "type": "link",
      "title": "Figure 2",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2983093"
    },
    "media-2983093": {
      "identifier": "media-2983093",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 440,
            "height": 206
          },
          "url": "https://docs-assets.developer.apple.com/published/0692b19b5f/c50a9ac2-758d-4271-978f-25ab9eebe195.png"
        }
      ],
      "alt": "Diagram showing how keychain items are isolated by default to a single app.",
      "title": "Figure 2"
    },
    "link-media-3370375": {
      "identifier": "link-media-3370375",
      "type": "link",
      "title": "Figure 3",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#3370375"
    },
    "media-3370375": {
      "identifier": "media-3370375",
      "type": "image",
      "variants": [
        {
          "traits": [
            "1x"
          ],
          "size": {
            "width": 1360,
            "height": 533
          },
          "url": "https://docs-assets.developer.apple.com/published/524cf9001d/9b9595bf-fa60-4de0-909e-56e2c5d8a13a.png"
        },
        {
          "traits": [
            "1x"
          ],
          "size": {
            "width": 1360,
            "height": 533
          },
          "url": "https://docs-assets.developer.apple.com/published/5ce49164c4/61a50f42-0f7a-4642-806c-a1d73a38b614.png"
        }
      ],
      "alt": "Screenshot showing the keychain sharing item in Xcode’s Signing and Capabilities tab, with a single keychain group called com.example.SharedItems.",
      "title": "Figure 3"
    },
    "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974921": {
      "title": "Listing 5",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974921",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974921"
    },
    "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974914": {
      "title": "Listing 6",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974914",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974914"
    },
    "link-media-2983090": {
      "identifier": "link-media-2983090",
      "type": "link",
      "title": "Figure 4",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2983090"
    },
    "media-2983090": {
      "identifier": "media-2983090",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 418,
            "height": 274
          },
          "url": "https://docs-assets.developer.apple.com/published/60a9171b86/e9fc8605-bbe0-49d3-a4c1-5835564d92ee.png"
        }
      ],
      "alt": "Diagram showing how keychain items can reside in the region of overlap between two apps, and thus be shared by the apps.",
      "title": "Figure 4"
    },
    "doc://com.apple.documentation/documentation/foundation/nsuserdefaults/1409957-initwithsuitename": {
      "title": "initWithSuiteName:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsuserdefaults/1409957-initwithsuitename",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsuserdefaults/1409957-initwithsuitename",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "initWithSuiteName:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/nsuserdefaults": {
      "title": "NSUserDefaults",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsuserdefaults",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsuserdefaults"
    },
    "link-media-3370376": {
      "identifier": "link-media-3370376",
      "type": "link",
      "title": "Figure 5",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#3370376"
    },
    "media-3370376": {
      "identifier": "media-3370376",
      "type": "image",
      "variants": [
        {
          "traits": [
            "1x"
          ],
          "size": {
            "width": 1360,
            "height": 533
          },
          "url": "https://docs-assets.developer.apple.com/published/e26daafa02/f642e3b5-664f-40d1-be1a-c96648e3f7c5.png"
        },
        {
          "traits": [
            "1x"
          ],
          "size": {
            "width": 1360,
            "height": 533
          },
          "url": "https://docs-assets.developer.apple.com/published/4b9933284d/a30eea23-e8b0-4ac0-bf60-a563fb56c5c8.png"
        }
      ],
      "alt": "Screenshot showing App One enabling the app groups capability.",
      "title": "Figure 5"
    },
    "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974915": {
      "title": "Listing 7",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974915",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2974915"
    },
    "doc://com.apple.documentation/documentation/bundleresources/entitlements/keychain-access-groups": {
      "title": "Keychain Access Groups Entitlement",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/bundleresources/entitlements/keychain-access-groups",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/bundleresources/entitlements/keychain-access-groups",
      "abstract": [
        {
          "type": "text",
          "text": "The identifiers for the keychain groups that the app may share items with."
        }
      ],
      "titleStyle": "title",
      "name": "keychain-access-groups",
      "ideTitle": "Keychain Access Groups Entitlement"
    },
    "doc://com.apple.documentation/documentation/bundleresources/entitlements/com_apple_security_application-groups": {
      "title": "App Groups Entitlement",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/bundleresources/entitlements/com_apple_security_application-groups",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/bundleresources/entitlements/com_apple_security_application-groups"
    },
    "doc://com.apple.documentation/documentation/security/ksecattraccessgroup": {
      "title": "kSecAttrAccessGroup",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/ksecattraccessgroup",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/ksecattraccessgroup"
    },
    "link-media-2983091": {
      "identifier": "link-media-2983091",
      "type": "link",
      "title": "Figure 1",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2983091"
    },
    "media-2983091": {
      "identifier": "media-2983091",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x"
          ],
          "size": {
            "width": 580,
            "height": 315
          },
          "url": "https://docs-assets.developer.apple.com/published/3fef93abb4/ea02cc8d-a561-4a47-a405-57dea126b8cf.png"
        }
      ],
      "alt": "Diagram showing how keychain items can live in only one group at a time.",
      "title": "Figure 1"
    },
    "doc://com.apple.documentation/documentation/security/1401659-secitemadd": {
      "title": "SecItemAdd",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1401659-secitemadd",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1401659-secitemadd"
    },
    "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2973737": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2973737",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2973737"
    },
    "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errsecmissingentitlement": {
      "title": "errSecMissingEntitlement",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errsecmissingentitlement",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1542001-security_framework_result_codes/errsecmissingentitlement"
    },
    "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2973738": {
      "title": "Set Your App’s Access Groups",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2973738",
      "kind": "article",
      "role": "subsection",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2973738"
    },
    "doc://com.apple.documentation/documentation/security/1398306-secitemcopymatching": {
      "title": "SecItemCopyMatching",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1398306-secitemcopymatching",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1398306-secitemcopymatching"
    },
    "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#3370377": {
      "title": "Listing 2",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#3370377",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#3370377"
    },
    "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errsecitemnotfound": {
      "title": "errSecItemNotFound",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errsecitemnotfound",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1542001-security_framework_result_codes/errsecitemnotfound"
    },
    "doc://com.apple.documentation/documentation/security/ksecusedataprotectionkeychain": {
      "title": "kSecUseDataProtectionKeychain",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/ksecusedataprotectionkeychain",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/ksecusedataprotectionkeychain"
    },
    "doc://com.apple.documentation/documentation/security/ksecattrsynchronizable": {
      "title": "kSecAttrSynchronizable",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/ksecattrsynchronizable",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/ksecattrsynchronizable"
    },
    "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps": {
      "title": "Sharing Access to Keychain Items Among a Collection of Apps",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps",
      "kind": "article",
      "role": "article",
      "url": "/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps",
      "abstract": [
        {
          "type": "text",
          "text": "Enable apps to share keychain items with each other by adding the apps to an access group."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/restricting_keychain_item_accessibility": {
      "title": "Restricting Keychain Item Accessibility",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/restricting_keychain_item_accessibility",
      "kind": "article",
      "role": "article",
      "url": "/documentation/security/keychain_services/keychain_items/restricting_keychain_item_accessibility",
      "abstract": [
        {
          "type": "text",
          "text": "Set the conditions under which an app can access a keychain item such as a password."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1394452-secaccesscontrolcreatewithflags": {
      "title": "SecAccessControlCreateWithFlags",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1394452-secaccesscontrolcreatewithflags",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1394452-secaccesscontrolcreatewithflags",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a new access control object with the specified protection type and flags."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/secaccesscontrolcreateflags": {
      "title": "SecAccessControlCreateFlags",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/secaccesscontrolcreateflags",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/secaccesscontrolcreateflags",
      "abstract": [
        {
          "type": "text",
          "text": "Access control constants that dictate how a keychain item may be used."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/secaccesscontrolref": {
      "title": "SecAccessControlRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/secaccesscontrolref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/secaccesscontrolref",
      "abstract": [
        {
          "type": "text",
          "text": "An opaque type that contains information about how a keychain item may be used."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1395487-secaccesscontrolgettypeid": {
      "title": "SecAccessControlGetTypeID",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1395487-secaccesscontrolgettypeid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1395487-secaccesscontrolgettypeid",
      "abstract": [
        {
          "type": "text",
          "text": "Returns the unique identifier of the opaque type to which a keychain item access control object belongs."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/bundleresources/entitlements/keychain-access-groups",
        "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/restricting_keychain_item_accessibility",
        "doc://com.apple.documentation/documentation/security/1394452-secaccesscontrolcreatewithflags",
        "doc://com.apple.documentation/documentation/security/secaccesscontrolcreateflags",
        "doc://com.apple.documentation/documentation/security/secaccesscontrolref",
        "doc://com.apple.documentation/documentation/security/1395487-secaccesscontrolgettypeid"
      ],
      "title": "Keychain Item Access",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If you develop a family of apps, all of which rely on the same user secret, you can use access groups to securely share that secret among those apps. For example, you can share credentials, so that logging into one of your apps automatically grants the user access to all of your apps. This kind of sharing doesn’t require interaction with or permission from the user, but limits sharing to apps that are delivered by a single development team. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "An access group is a logical collection of apps tagged with a particular group name string. Any app in a given group can share keychain items with all the other apps in the same group. You can add an app to any number of groups, but the app is always part of at least one group that contains only itself. That is, an app can always store and retrieve private keychain items, regardless of whether it also participates in any other groups. Keychain items, on the other hand, are always part of exactly one group."
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "This form of keychain item sharing applies to all iOS keychain items, and to macOS keychain items when you query with the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/ksecusedataprotectionkeychain"
                },
                {
                  "type": "text",
                  "text": " key, set the item’s "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/ksecattrsynchronizable"
                },
                {
                  "type": "text",
                  "text": " attribute, or both."
                }
              ]
            }
          ],
          "style": "important"
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Set Your App’s Access Groups",
          "anchor": "2973738"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You control the groups that your app belongs to by manipulating its entitlements. In particular, an app belongs to all the groups named in a virtual array of strings that the system forms for each app as the concatenation of the following items, evaluated in this order:"
            }
          ]
        },
        {
          "type": "termList",
          "items": [
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "strong",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "Keychain access groups"
                      }
                    ]
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "The optional "
                      },
                      {
                        "type": "reference",
                        "isActive": true,
                        "identifier": "doc://com.apple.documentation/documentation/bundleresources/entitlements/keychain-access-groups"
                      },
                      {
                        "type": "text",
                        "text": " holds an array of strings, each of which names an access group."
                      }
                    ]
                  }
                ]
              }
            },
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "strong",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "Application identifier"
                      }
                    ]
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "Xcode automatically adds the "
                      },
                      {
                        "type": "codeVoice",
                        "code": "application-identifier"
                      },
                      {
                        "type": "text",
                        "text": " entitlement (or the "
                      },
                      {
                        "type": "codeVoice",
                        "code": "com.apple.application-identifier"
                      },
                      {
                        "type": "text",
                        "text": " entitlement in macOS) to every app during code signing, formed as the team identifier (team ID) plus the bundle identifier (bundle ID)."
                      }
                    ]
                  }
                ]
              }
            },
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "strong",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "Application groups"
                      }
                    ]
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "When you collect related apps into an application group using the "
                      },
                      {
                        "type": "reference",
                        "isActive": true,
                        "identifier": "doc://com.apple.documentation/documentation/bundleresources/entitlements/com_apple_security_application-groups"
                      },
                      {
                        "type": "text",
                        "text": ", they share access to a group container, and gain the ability to message each other in certain ways. Starting in iOS 8, the array of strings given by this entitlement also extends the list of keychain access groups."
                      }
                    ]
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Xcode handles the application identifier (app ID) for you when you set the bundle ID. You set the others by manipulating capabilities in Xcode."
            }
          ]
        },
        {
          "level": 4,
          "type": "heading",
          "text": "Establish Your App’s Private Access Group",
          "anchor": "2974916"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "One of the first steps you take when you create any new app is to assign it a bundle ID, typically using reverse DNS notation, with a string like "
            },
            {
              "type": "codeVoice",
              "code": "com.example.AppOne"
            },
            {
              "type": "text",
              "text": ". When code signing your app, Xcode automatically prefixes the bundle ID with your team ID—the unique character sequence issued by Apple to each development team—and stores the combined string as the app ID. The system recognizes this app ID as the name of your app’s private access group by including it in your access group array:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "[$(teamID).com.example.AppOne]"
          ],
          "syntax": "other",
          "metadata": {
            "anchor": "2974920",
            "title": "Listing 3"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Because app IDs are unique across all apps, and because the app ID is stored in an entitlement protected by code signing, no other app can use it, and so no other app is in this group. Any keychain items stored with this access group are private to App One. Similarly, if you have a second app with a bundle ID of "
            },
            {
              "type": "codeVoice",
              "code": "com.example.AppTwo"
            },
            {
              "type": "text",
              "text": ", it automatically belongs to its own private group:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "[$(teamID).com.example.AppTwo]"
          ],
          "syntax": "other",
          "metadata": {
            "anchor": "2974919",
            "title": "Listing 4"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "As a result, by default, each app’s keychain items remains isolated from all other apps."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-2983093",
              "metadata": {
                "anchor": "2983093",
                "title": "Figure 2"
              }
            }
          ]
        },
        {
          "level": 4,
          "type": "heading",
          "text": "Add Apps to One or More Keychain Access Groups",
          "anchor": "2974918"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When you want two apps to be able to share keychain items, you can add both to the same keychain access group. Do this by enabling the Keychain Sharing capability in Xcode for each app, and adding a common string to the list of keychain groups in each case. Typically, you use the same kind of reverse DNS naming for a keychain group that you use for a bundle ID, so you might choose "
            },
            {
              "type": "codeVoice",
              "code": "com.example.SharedItems"
            },
            {
              "type": "text",
              "text": ":"
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3370375",
              "metadata": {
                "anchor": "3370375",
                "title": "Figure 3"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "As with forming the app ID from the bundle ID, Xcode automatically prefixes keychain groups with your team ID. This ensures that your groups are specific to your development team. When you enable the capability for App One as shown above, its logical list of app groups becomes:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "[$(teamID).com.example.SharedItems,",
            " $(teamID).com.example.AppOne]"
          ],
          "syntax": "other",
          "metadata": {
            "anchor": "2974921",
            "title": "Listing 5"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If you also add the same keychain group to App Two, its logical list of app groups becomes:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "[$(teamID).com.example.SharedItems,",
            " $(teamID).com.example.AppTwo]"
          ],
          "syntax": "other",
          "metadata": {
            "anchor": "2974914",
            "title": "Listing 6"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In effect, the two apps gain a region of overlap to share items."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-2983090",
              "metadata": {
                "anchor": "2983090",
                "title": "Figure 4"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Notice that the distinct areas represented by the app IDs are still present, allowing each app to continue to access its own, private items. But both apps now also belong to the shared items group, enabling them to share keychain items. In this way, you can add an app to as many different groups as you like."
            }
          ]
        },
        {
          "level": 4,
          "type": "heading",
          "text": "Use App Groups to Expand Sharing of Keychain and Non-Keychain Data",
          "anchor": "2974917"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When your app belongs to an app group, it can share certain kinds of non-keychain data with other apps in the same group. For example, you can use the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsuserdefaults/1409957-initwithsuitename"
            },
            {
              "type": "text",
              "text": " method to create a new "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsuserdefaults"
            },
            {
              "type": "text",
              "text": " instance that shares the preferences you set among all the apps in the app group. Like keychain access groups, you enable app groups with a capability in Xcode."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Starting in iOS 8, when an app belongs to an app group, it can also use this mechanism to share keychain items. In this example, add App One to the "
            },
            {
              "type": "codeVoice",
              "code": "group.com.example.AppSuite"
            },
            {
              "type": "text",
              "text": " app group:"
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-3370376",
              "metadata": {
                "anchor": "3370376",
                "title": "Figure 5"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "App One’s list of access groups expands to include the app group:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "[$(teamID).com.example.SharedItems,",
            " $(teamID).com.example.AppOne,",
            " group.com.example.AppSuite]"
          ],
          "syntax": "other",
          "metadata": {
            "anchor": "2974915",
            "title": "Listing 7"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This allows it to share keychain items with any app in the App Suite group (distinct from any sharing it’s already doing with apps in the shared items keychain access group)."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Xcode doesn’t prepend the app group with the team identifier. Instead, it guards against the reuse of app group names across teams when you try to add an app group to a provisioning profile."
            }
          ]
        },
        {
          "level": 4,
          "type": "heading",
          "text": "Know the Difference Between App Groups and Keychain Access Groups",
          "anchor": "2994072"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "App groups and keychain access groups aren’t mutually exclusive—you can use both in the same app—but they do differ in several important ways that may help you decide which to use for a given situation."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "First, as described above, using an app group enables additional data sharing beyond keychain items. You might want this extra sharing, or might already be using an app group for this purpose, and thus not need to add keychain access groups. On the other hand, you might not want to enable this additional sharing at all, and prefer keychain access groups instead."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Second, order matters. The system considers the first item in the list of access groups to be the app’s default access group. This is the access group that keychain services assumes if you don’t otherwise specify one when adding keychain items. An app group can’t ever be the default, because the app ID is always present and appears earlier in the list. However, a keychain access group can be the default, because it appears before the app ID. In particular, the first keychain access group, if any, that you specify in the corresponding capability becomes the app’s default access group. If you don’t specify any keychain access groups, then the app ID is the default."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Set a Keychain Item’s Access Group",
          "anchor": "2973736"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Unlike apps, which can belong to many access groups, keychain items belong to a single group, identified by the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/ksecattraccessgroup"
            },
            {
              "type": "text",
              "text": " attribute. From the item’s point of view, the world is a collection of disjoint groups, and the item belongs to exactly one of them."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "image",
              "identifier": "media-2983091",
              "metadata": {
                "anchor": "2983091",
                "title": "Figure 1"
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When you create a new item with the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1401659-secitemadd"
            },
            {
              "type": "text",
              "text": " method, you can specify a group in the add attributes using the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/ksecattraccessgroup"
            },
            {
              "type": "text",
              "text": " key. For example, you can create a new generic password item in the Shared Items group defined above:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "let accessGroup = \"<# Your Team ID #>.com.example.SharedItems\"",
            "let attributes = [kSecClass: kSecClassGenericPassword,",
            "                  kSecAttrService: service,",
            "                  kSecAttrAccount: username,",
            "                  kSecAttrAccessGroup: accessGroup,",
            "                  kSecValueData: password] as [String: Any]",
            "let addStatus = SecItemAdd(attributes as CFDictionary, nil)"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "2973737",
            "title": "Listing 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Use any of the groups to which your app belongs. If you try to use an access group to which your app doesn’t belong, the operation fails and returns the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errsecmissingentitlement"
            },
            {
              "type": "text",
              "text": " status. This includes attempts to “prime” an entry using a zero-length string as the value for the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/ksecattraccessgroup"
            },
            {
              "type": "text",
              "text": " key, because the empty string represents an invalid group."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If you don’t specify any access group when adding an item, keychain services applies your app’s default access group, which is the first group named in the concatenated list of groups described in "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/keychain_services/keychain_items/sharing_access_to_keychain_items_among_a_collection_of_apps#2973738"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When you search for keychain items with the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1398306-secitemcopymatching"
            },
            {
              "type": "text",
              "text": " method, you can likewise specify an access group in the search query to limit your search to a particular access group:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "let query = [kSecClass: kSecClassGenericPassword,",
            "             kSecAttrService: service,",
            "             kSecAttrAccount: username,",
            "             kSecReturnAttributes: true,",
            "             kSecAttrAccessGroup: accessGroup,",
            "             kSecReturnData: true] as [String: Any]",
            "var item: CFTypeRef?",
            "let readStatus = SecItemCopyMatching(query as CFDictionary, &item)"
          ],
          "syntax": "swift",
          "metadata": {
            "anchor": "3370377",
            "title": "Listing 2"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If you specify a group to which your app doesn’t belong, no items match and the query returns the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errsecitemnotfound"
            },
            {
              "type": "text",
              "text": " status. If you don’t specify an access group in the query, the search matches any of your app’s groups."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}