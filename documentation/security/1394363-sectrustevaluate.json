{
  "abstract": [
    {
      "type": "text",
      "text": "Evaluates trust for the specified certificate and policies."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/security",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/security/1394363-sectrustevaluate",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1394363,
  "kind": "symbol",
  "metadata": {
    "title": "SecTrustEvaluate",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Security"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "2.0",
        "deprecatedAt": "13.0",
        "current": "15.2",
        "deprecated": true
      },
      {
        "name": "iPadOS",
        "introducedAt": "2.0",
        "deprecatedAt": "13.0",
        "current": "15.2",
        "deprecated": true
      },
      {
        "name": "macOS",
        "introducedAt": "10.3",
        "deprecatedAt": "10.15",
        "current": "12.1",
        "deprecated": true
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "deprecatedAt": "13.0",
        "current": "15.2",
        "deprecated": true
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "deprecatedAt": "13.0",
        "current": "15.2",
        "deprecated": true
      },
      {
        "name": "watchOS",
        "introducedAt": "2.0",
        "deprecatedAt": "6.0",
        "current": "8.3",
        "deprecated": true
      }
    ],
    "externalID": "c:@F@SecTrustEvaluate",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/security/1394363-sectrustevaluate"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/security/1394363-sectrustevaluate"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/security": {
      "title": "Security",
      "identifier": "doc://com.apple.documentation/documentation/security",
      "url": "/documentation/security",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services": {
      "title": "Certificate, Key, and Trust Services",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/security/certificate_key_and_trust_services"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust": {
      "title": "Trust",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust",
      "url": "/documentation/security/certificate_key_and_trust_services/trust",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/security/1401555-sectrustcreatewithcertificates": {
      "title": "SecTrustCreateWithCertificates",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1401555-sectrustcreatewithcertificates",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1401555-sectrustcreatewithcertificates"
    },
    "doc://com.apple.documentation/documentation/security/sectrustresulttype": {
      "title": "SecTrustResultType",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustresulttype"
    },
    "doc://com.apple.documentation/documentation/security/2980705-sectrustevaluatewitherror": {
      "title": "SecTrustEvaluateWithError",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/2980705-sectrustevaluatewitherror",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/2980705-sectrustevaluatewitherror"
    },
    "doc://com.apple.documentation/documentation/security/1400632-sectrustevaluateasync": {
      "title": "SecTrustEvaluateAsync",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1400632-sectrustevaluateasync",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1400632-sectrustevaluateasync",
      "abstract": [
        {
          "type": "text",
          "text": "Evaluates a trust object asynchronously on the specified dispatch queue."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/dispatch/1447169-dispatch_once": {
      "title": "dispatch_once",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/dispatch/1447169-dispatch_once",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/dispatch/1447169-dispatch_once"
    },
    "doc://com.apple.documentation/documentation/security/1397216-sectrustsetverifydate": {
      "title": "SecTrustSetVerifyDate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1397216-sectrustsetverifydate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1397216-sectrustsetverifydate"
    },
    "doc://com.apple.documentation/documentation/security/1524326-sectrustsetparameters": {
      "title": "SecTrustSetParameters",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1524326-sectrustsetparameters",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1524326-sectrustsetparameters",
      "abstract": [
        {
          "type": "text",
          "text": "Sets the action and action data for a trust management object. "
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1399119-sectrustsettingssettrustsettings": {
      "title": "SecTrustSettingsSetTrustSettings",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1399119-sectrustsettingssettrustsettings",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1399119-sectrustsettingssettrustsettings"
    },
    "doc://com.apple.documentation/documentation/security/1400261-sectrustsettingscopytrustsetting": {
      "title": "SecTrustSettingsCopyTrustSettings",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1400261-sectrustsettingscopytrustsetting",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1400261-sectrustsettingscopytrustsetting"
    },
    "doc://com.apple.documentation/documentation/security/1396098-sectrustsetanchorcertificates": {
      "title": "SecTrustSetAnchorCertificates",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1396098-sectrustsetanchorcertificates",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1396098-sectrustsetanchorcertificates"
    },
    "doc://com.apple.documentation/documentation/security/1395644-sectrustsetkeychains": {
      "title": "SecTrustSetKeychains",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1395644-sectrustsetkeychains",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1395644-sectrustsetkeychains",
      "abstract": [
        {
          "type": "text",
          "text": "Sets the keychains searched for intermediate certificates when evaluating a trust management object."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultunspecified": {
      "title": "kSecTrustResultUnspecified",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultunspecified",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustresulttype/ksectrustresultunspecified"
    },
    "doc://com.apple.documentation/documentation/securityinterface/sfcertificatetrustpanel": {
      "title": "SFCertificateTrustPanel",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/securityinterface/sfcertificatetrustpanel",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/securityinterface/sfcertificatetrustpanel"
    },
    "doc://com.apple.documentation/documentation/securityinterface": {
      "title": "Security Interface",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/securityinterface",
      "kind": "article",
      "role": "collection",
      "url": "/documentation/securityinterface"
    },
    "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultproceed": {
      "title": "kSecTrustResultProceed",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultproceed",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustresulttype/ksectrustresultproceed"
    },
    "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultdeny": {
      "title": "kSecTrustResultDeny",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultdeny",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustresulttype/ksectrustresultdeny"
    },
    "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultconfirm": {
      "title": "kSecTrustResultConfirm",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultconfirm",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustresulttype/ksectrustresultconfirm"
    },
    "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultrecoverabletrustfailure": {
      "title": "kSecTrustResultRecoverableTrustFailure",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultrecoverabletrustfailure",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustresulttype/ksectrustresultrecoverabletrustfailure"
    },
    "doc://com.apple.documentation/documentation/security/1398612-sectrustcopyresult": {
      "title": "SecTrustCopyResult",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1398612-sectrustcopyresult",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1398612-sectrustcopyresult"
    },
    "doc://com.apple.documentation/documentation/security/1524311-sectrustgetcssmresult": {
      "title": "SecTrustGetCssmResult",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1524311-sectrustgetcssmresult",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1524311-sectrustgetcssmresult",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves the CSSM trust result."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultfataltrustfailure": {
      "title": "kSecTrustResultFatalTrustFailure",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultfataltrustfailure",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustresulttype/ksectrustresultfataltrustfailure"
    },
    "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultothererror": {
      "title": "kSecTrustResultOtherError",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultothererror",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustresulttype/ksectrustresultothererror"
    },
    "doc://com.apple.documentation/documentation/security/sectrustref": {
      "title": "SecTrustRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustref"
    },
    "doc://com.apple.documentation/documentation/security/1394363-sectrustevaluate": {
      "title": "SecTrustEvaluate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1394363-sectrustevaluate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1394363-sectrustevaluate",
      "abstract": [
        {
          "type": "text",
          "text": "Evaluates trust for the specified certificate and policies."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/sectrustcallback": {
      "title": "SecTrustCallback",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustcallback",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustcallback",
      "abstract": [
        {
          "type": "text",
          "text": "A block called with the results of an asynchronous trust evaluation."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/sectrustusersetting": {
      "title": "SecTrustUserSetting",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustusersetting",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustusersetting",
      "abstract": [
        {
          "type": "text",
          "text": "Represents user-specified trust settings."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805395-sectrustsetusertrust": {
      "title": "SecTrustSetUserTrust",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805395-sectrustsetusertrust",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "url": "/documentation/security/certificate_key_and_trust_services/trust/1805395-sectrustsetusertrust",
      "abstract": [
        {
          "type": "text",
          "text": "Sets the user-specified trust settings of a certificate and policy. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805368-sectrustgetcssmanchorcertificate": {
      "title": "SecTrustGetCSSMAnchorCertificates",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805368-sectrustgetcssmanchorcertificate",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "url": "/documentation/security/certificate_key_and_trust_services/trust/1805368-sectrustgetcssmanchorcertificate",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves the CSSM anchor certificates."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1524327-sectrustgetcssmresultcode": {
      "title": "SecTrustGetCssmResultCode",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1524327-sectrustgetcssmresultcode",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1524327-sectrustgetcssmresultcode",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves the CSSM result code from the most recent trust evaluation for a trust management object."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805379-sectrustgetusertrust": {
      "title": "SecTrustGetUserTrust",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805379-sectrustgetusertrust",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "url": "/documentation/security/certificate_key_and_trust_services/trust/1805379-sectrustgetusertrust",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves the user-specified trust setting for a certificate and policy."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1524309-sectrustgettphandle": {
      "title": "SecTrustGetTPHandle",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1524309-sectrustgettphandle",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1524309-sectrustgettphandle",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves the trust policy handle."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1524331-sectrustgetresult": {
      "title": "SecTrustGetResult",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1524331-sectrustgetresult",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1524331-sectrustgetresult",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieves details on the outcome of a call to the function "
        },
        {
          "type": "codeVoice",
          "code": "SecTrustEvaluate"
        },
        {
          "type": "text",
          "text": "."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "deprecationSummary": [
    {
      "type": "paragraph",
      "inlineContent": [
        {
          "type": "text",
          "text": "Use "
        },
        {
          "type": "reference",
          "isActive": true,
          "identifier": "doc://com.apple.documentation/documentation/security/2980705-sectrustevaluatewitherror"
        },
        {
          "type": "text",
          "text": " instead."
        }
      ]
    }
  ],
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/security/1400632-sectrustevaluateasync",
        "doc://com.apple.documentation/documentation/security/sectrustcallback",
        "doc://com.apple.documentation/documentation/security/sectrustusersetting",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805395-sectrustsetusertrust",
        "doc://com.apple.documentation/documentation/security/1524326-sectrustsetparameters",
        "doc://com.apple.documentation/documentation/security/1395644-sectrustsetkeychains",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805368-sectrustgetcssmanchorcertificate",
        "doc://com.apple.documentation/documentation/security/1524311-sectrustgetcssmresult",
        "doc://com.apple.documentation/documentation/security/1524327-sectrustgetcssmresultcode",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/1805379-sectrustgetusertrust",
        "doc://com.apple.documentation/documentation/security/1524309-sectrustgettphandle",
        "doc://com.apple.documentation/documentation/security/1524331-sectrustgetresult"
      ],
      "title": "Legacy Symbols",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "identifier": "symbol-1480124",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "SecTrustEvaluate"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@SecTrustRef",
              "identifier": "doc://com.apple.documentation/documentation/security/sectrustref",
              "text": "SecTrustRef"
            },
            {
              "kind": "text",
              "text": " trust, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@SecTrustResultType",
              "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype",
              "text": "SecTrustResultType"
            },
            {
              "kind": "text",
              "text": " *result);"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "trust",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The trust management object to evaluate. A trust management object includes the certificate to be verified plus the policy or policies to be used in evaluating trust. It can optionally also include other certificates to be used in verifying the first certificate. Use the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/1401555-sectrustcreatewithcertificates"
                },
                {
                  "type": "text",
                  "text": " function to create a trust management object. "
                }
              ]
            }
          ]
        },
        {
          "name": "result",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, points to a result type reflecting the result of this evaluation. See "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype"
                },
                {
                  "type": "text",
                  "text": " for descriptions of possible values. See the discussion below for an explanation of how to handle specific values."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A result code. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This function evaluates a certificate’s validity to establish trust for a particular use—for example, in creating a digital signature or to establish a Secure Sockets Layer connection."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Before you call this function:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "You can call the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/1397216-sectrustsetverifydate"
                    },
                    {
                      "type": "text",
                      "text": " function before calling "
                    },
                    {
                      "type": "codeVoice",
                      "code": "SecTrustEvaluate"
                    },
                    {
                      "type": "text",
                      "text": " to set the date and time to use when verifying the certificate. By default, "
                    },
                    {
                      "type": "codeVoice",
                      "code": "SecTrustEvaluate"
                    },
                    {
                      "type": "text",
                      "text": " uses the current date and time. (Note that some APIs such as CMS may set the verification date for you based on a trusted time stamp.)"
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "In macOS, you can optionally call any of the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "SecTrustSet..."
                    },
                    {
                      "type": "text",
                      "text": " functions (such as "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/1524326-sectrustsetparameters"
                    },
                    {
                      "type": "text",
                      "text": " or "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/1397216-sectrustsetverifydate"
                    },
                    {
                      "type": "text",
                      "text": ") to set values for parameters and options."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The "
            },
            {
              "type": "codeVoice",
              "code": "SecTrustEvaluate"
            },
            {
              "type": "text",
              "text": " function validates a certificate by verifying its signature plus the signatures of the certificates in its certificate chain, up to the anchor certificate, according to the policy or policies included in the trust management object."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For each policy, the function usually evaluates trust according to the user-specified trust setting (see "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1399119-sectrustsettingssettrustsettings"
            },
            {
              "type": "text",
              "text": " and "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1400261-sectrustsettingscopytrustsetting"
            },
            {
              "type": "text",
              "text": "). For an example of user-specified trust settings, use the Keychain Access utility and look at any certificate. As an exception, if your app has previously called "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1396098-sectrustsetanchorcertificates"
            },
            {
              "type": "text",
              "text": ", the user-specified trust settings are ignored, and the certificate’s chain must contain one of the specified anchor certificates."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For each policy, "
            },
            {
              "type": "codeVoice",
              "code": "SecTrustEvaluate"
            },
            {
              "type": "text",
              "text": " constructs a certificate chain based on the policies requested. It then starts with the leaf certificate and checks each certificate in the chain in turn until it either reaches a defective certificate, runs out of certificates, or reaches a certificate with a non-default trust setting—usually an anchor certificate or a certificate that the user has explicitly chosen to trust or distrust—and stores the result of this trust evaluation in the trust management object. This design means that an explicit user-trust setting for a certificate at or near the leaf can override the behavior of a certificate closer to the root, but otherwise a failure at any point in the chain results in a failure."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If some of the certificates needed to verify the leaf certificate are missing from the trust management object, then "
            },
            {
              "type": "codeVoice",
              "code": "SecTrustEvaluate"
            },
            {
              "type": "text",
              "text": " searches for certificates in the following locations:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "In any keychains currently on the caller’s keychain search list (see "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/1395644-sectrustsetkeychains"
                    },
                    {
                      "type": "text",
                      "text": ")."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Any certificates previously provided by calling "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/1396098-sectrustsetanchorcertificates"
                    },
                    {
                      "type": "text",
                      "text": "."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "In a system-provided set of keychains provided for this purpose."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Over the network if certain extensions are present in the certificate used to build the chain."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "Although this function searches the user’s keychain (or the application keychain in iOS) for intermediate certificates, it does not search those keychains for anchor (root) certificates. To add an anchor certificate, you must call "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/1396098-sectrustsetanchorcertificates"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            }
          ],
          "style": "note",
          "name": "Note"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "As a rule, you should handle the various return values as follows:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultunspecified"
                    },
                    {
                      "type": "text",
                      "text": "—Evaluation successfully reached an (implicitly trusted) anchor certificate without any evaluation failures, but never encountered any explicitly stated user-trust preference. This is the most common return value."
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Most apps should, by default, trust the chain. If you ask the user what to do, in macOS, you should use the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/securityinterface/sfcertificatetrustpanel"
                    },
                    {
                      "type": "text",
                      "text": " class in the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/securityinterface"
                    },
                    {
                      "type": "text",
                      "text": "."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultproceed"
                    },
                    {
                      "type": "text",
                      "text": "—The user explicitly chose to trust a certificate in the chain (usually by clicking a button in a certificate trust panel)."
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Your app should trust the chain."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultdeny"
                    },
                    {
                      "type": "text",
                      "text": "—The user explicitly chose to "
                    },
                    {
                      "type": "emphasis",
                      "inlineContent": [
                        {
                          "type": "text",
                          "text": "not"
                        }
                      ]
                    },
                    {
                      "type": "text",
                      "text": " trust a certificate in the chain (usually by clicking the appropriate button in a certificate trust panel)."
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Your app should "
                    },
                    {
                      "type": "emphasis",
                      "inlineContent": [
                        {
                          "type": "text",
                          "text": "not"
                        }
                      ]
                    },
                    {
                      "type": "text",
                      "text": " trust the chain."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultconfirm"
                    },
                    {
                      "type": "text",
                      "text": "—The user previously chose to always ask for permission before accepting one of the certificates in the chain. This return value is no longer used, but may occur in older versions of macOS."
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Either ask the user what to do or reject the certificate. If you ask the user what to do, in macOS, you should use the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/securityinterface/sfcertificatetrustpanel"
                    },
                    {
                      "type": "text",
                      "text": " class in the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/securityinterface"
                    },
                    {
                      "type": "text",
                      "text": "."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultrecoverabletrustfailure"
                    },
                    {
                      "type": "text",
                      "text": "—This means that you should not trust the chain as-is, but that the chain could be trusted with some minor change to the evaluation context, such as ignoring expired certificates or adding an additional anchor to the set of trusted anchors."
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "The way you handle this depends on the OS."
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "In iOS, you should typically refuse the certificate. However, if you are performing signature validation and you know when the message was originally received, you should check again using that date to see if the message was valid when you originally received it."
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "In macOS, you can call the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/1398612-sectrustcopyresult"
                    },
                    {
                      "type": "text",
                      "text": " function to get more information about the results of the trust evaluation, or the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/1524311-sectrustgetcssmresult"
                    },
                    {
                      "type": "text",
                      "text": " function to get information about the evaluation in a form that can be passed to CSSM functions."
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Then, as appropriate, you can call one or more of the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "SecTrustSet..."
                    },
                    {
                      "type": "text",
                      "text": " functions to correct or bypass the problem, or you can inform the user of the problem and call the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "SFCertificateTrustPanel"
                    },
                    {
                      "type": "text",
                      "text": " class to let the user change the trust setting for the certificate."
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "When you think you have corrected the problem, call "
                    },
                    {
                      "type": "codeVoice",
                      "code": "SecTrustEvaluate"
                    },
                    {
                      "type": "text",
                      "text": " again. Each time you call "
                    },
                    {
                      "type": "codeVoice",
                      "code": "SecTrustEvaluate"
                    },
                    {
                      "type": "text",
                      "text": ", it discards the results of any previous evaluation and replaces them with the new results."
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "If the trust failure was caused by an untrusted root certificate and your app asks the user what to do, you should use the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/securityinterface/sfcertificatetrustpanel"
                    },
                    {
                      "type": "text",
                      "text": " class in the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/securityinterface"
                    },
                    {
                      "type": "text",
                      "text": "."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultfataltrustfailure"
                    },
                    {
                      "type": "text",
                      "text": "—Evaluation failed because a certificate in the chain is defective. This usually represents a fundamental defect in the certificate data, such as an invalid encoding for a critical "
                    },
                    {
                      "type": "codeVoice",
                      "code": "subjectAltName"
                    },
                    {
                      "type": "text",
                      "text": " extension, an unsupported critical extension, or some other critical portion of the certificate that could not be successfully interpreted. Changing parameter values and calling "
                    },
                    {
                      "type": "codeVoice",
                      "code": "SecTrustEvaluate"
                    },
                    {
                      "type": "text",
                      "text": " again is unlikely to result in a successful reevaluation unless you provide different certificates."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/sectrustresulttype/ksectrustresultothererror"
                    },
                    {
                      "type": "text",
                      "text": "—Evaluation failed for some other reason. This can be caused by either a revoked certificate or by OS-level errors that are unrelated to the certificates themselves."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Special Considerations",
          "anchor": "1819520"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "It is not safe to call this function concurrently with any other function that uses the same trust management object, or to re-enter this function for the same trust management object."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Because this function might look on the network for certificates in the certificate chain, the function might block while attempting network access. You should never call it from your main thread; call it only from within a function running on a dispatch queue or on a separate thread. Alternatively, in macOS, you can use "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1400632-sectrustevaluateasync"
            },
            {
              "type": "text",
              "text": " from your main thread. In iOS, you can do the same thing using "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/dispatch/1447169-dispatch_once"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}