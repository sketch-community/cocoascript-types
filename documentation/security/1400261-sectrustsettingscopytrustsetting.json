{
  "abstract": [
    {
      "type": "text",
      "text": "Obtains the trust settings for a certificate."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/security",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/security/1400261-sectrustsettingscopytrustsetting",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1400261,
  "kind": "symbol",
  "metadata": {
    "title": "SecTrustSettingsCopyTrustSettings",
    "role": "symbol",
    "roleHeading": "Function",
    "modules": [
      {
        "name": "Security"
      }
    ],
    "platforms": [
      {
        "name": "macOS",
        "introducedAt": "10.5",
        "current": "12.1"
      }
    ],
    "externalID": "c:@F@SecTrustSettingsCopyTrustSettings",
    "symbolKind": "func"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/security/1400261-sectrustsettingscopytrustsetting"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/security/1400261-sectrustsettingscopytrustsetting"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/security": {
      "title": "Security",
      "identifier": "doc://com.apple.documentation/documentation/security",
      "url": "/documentation/security",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services": {
      "title": "Certificate, Key, and Trust Services",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services",
      "url": "/documentation/security/certificate_key_and_trust_services",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust": {
      "title": "Trust",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust",
      "url": "/documentation/security/certificate_key_and_trust_services/trust",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes": {
      "title": "Security Framework Result Codes",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes",
      "kind": "symbol",
      "role": "containerSymbol",
      "url": "/documentation/security/1542001-security_framework_result_codes"
    },
    "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errsecitemnotfound": {
      "title": "errSecItemNotFound",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errsecitemnotfound",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1542001-security_framework_result_codes/errsecitemnotfound"
    },
    "doc://com.apple.documentation/documentation/corefoundation/cfarrayref": {
      "title": "CFArrayRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corefoundation/cfarrayref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corefoundation/cfarrayref"
    },
    "doc://com.apple.documentation/documentation/corefoundation/cfdictionaryref": {
      "title": "CFDictionaryRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corefoundation/cfdictionaryref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corefoundation/cfdictionaryref"
    },
    "doc://com.apple.documentation/documentation/security/1400261-sectrustsettingscopytrustsetting#2556087": {
      "title": "Table 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/security/1400261-sectrustsettingscopytrustsetting#2556087",
      "kind": "article",
      "role": "table",
      "url": "/documentation/security/1400261-sectrustsettingscopytrustsetting#2556087"
    },
    "doc://com.apple.documentation/documentation/security/1562856-secpolicysearchcopynext": {
      "title": "SecPolicySearchCopyNext",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1562856-secpolicysearchcopynext",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1562856-secpolicysearchcopynext"
    },
    "doc://com.apple.documentation/documentation/security/1400622-sectrustedapplicationcreatefromp": {
      "title": "SecTrustedApplicationCreateFromPath",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1400622-sectrustedapplicationcreatefromp",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1400622-sectrustedapplicationcreatefromp"
    },
    "doc://com.apple.documentation/documentation/security/sectrustsettingskeyusage": {
      "title": "SecTrustSettingsKeyUsage",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustsettingskeyusage",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustsettingskeyusage",
      "abstract": [
        {
          "type": "text",
          "text": "Allowed uses for the encryption key in a certificate."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/sectrustsettingsresult": {
      "title": "SecTrustSettingsResult",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustsettingsresult",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustsettingsresult",
      "abstract": [
        {
          "type": "text",
          "text": "Trust settings returned in usage constraints dictionaries."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/ksectrustsettingsdefaultrootcertsetting": {
      "title": "kSecTrustSettingsDefaultRootCertSetting",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/ksectrustsettingsdefaultrootcertsetting",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/ksectrustsettingsdefaultrootcertsetting",
      "abstract": [
        {
          "type": "text",
          "text": "A value indicating the default root certificate trust settings when used as a certificate object in a trust settings API function."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/sectrustsettingsdomain": {
      "title": "SecTrustSettingsDomain",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/sectrustsettingsdomain",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/sectrustsettingsdomain",
      "abstract": [
        {
          "type": "text",
          "text": "The trust settings domains. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/corefoundation/1521153-cfrelease": {
      "title": "CFRelease",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corefoundation/1521153-cfrelease",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corefoundation/1521153-cfrelease"
    },
    "doc://com.apple.documentation/documentation/security/1399119-sectrustsettingssettrustsettings": {
      "title": "SecTrustSettingsSetTrustSettings",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1399119-sectrustsettingssettrustsettings",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1399119-sectrustsettingssettrustsettings",
      "abstract": [
        {
          "type": "text",
          "text": "Specifies trust settings for a certificate."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/seccertificateref": {
      "title": "SecCertificateRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/seccertificateref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/seccertificateref"
    },
    "doc://com.apple.documentation/documentation/security/1397413-sectrustsettingscopycertificates": {
      "title": "SecTrustSettingsCopyCertificates",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1397413-sectrustsettingscopycertificates",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1397413-sectrustsettingscopycertificates",
      "abstract": [
        {
          "type": "text",
          "text": "Obtains an array of all certificates that have trust settings in a specific trust settings domain. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1397941-sectrustsettingscopymodification": {
      "title": "SecTrustSettingsCopyModificationDate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1397941-sectrustsettingscopymodification",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1397941-sectrustsettingscopymodification",
      "abstract": [
        {
          "type": "text",
          "text": "Obtains the date and time at which a certificate’s trust settings were last modified."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/usage_constraints_dictionary_keys": {
      "title": "Usage Constraints Dictionary Keys",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/usage_constraints_dictionary_keys",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/security/certificate_key_and_trust_services/trust/usage_constraints_dictionary_keys",
      "abstract": [
        {
          "type": "text",
          "text": "Use these trust settings keys in a usage constraints dictionary."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1400261-sectrustsettingscopytrustsetting": {
      "title": "SecTrustSettingsCopyTrustSettings",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1400261-sectrustsettingscopytrustsetting",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1400261-sectrustsettingscopytrustsetting",
      "abstract": [
        {
          "type": "text",
          "text": "Obtains the trust settings for a certificate."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1402355-sectrustsettingscreateexternalre": {
      "title": "SecTrustSettingsCreateExternalRepresentation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1402355-sectrustsettingscreateexternalre",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1402355-sectrustsettingscreateexternalre",
      "abstract": [
        {
          "type": "text",
          "text": "Obtains an external, portable representation of the specified domain's trust settings."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1392836-sectrustsettingsimportexternalre": {
      "title": "SecTrustSettingsImportExternalRepresentation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1392836-sectrustsettingsimportexternalre",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1392836-sectrustsettingsimportexternalre",
      "abstract": [
        {
          "type": "text",
          "text": "Imports trust settings into a trust domain."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1395904-sectrustsettingsremovetrustsetti": {
      "title": "SecTrustSettingsRemoveTrustSettings",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1395904-sectrustsettingsremovetrustsetti",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1395904-sectrustsettingsremovetrustsetti",
      "abstract": [
        {
          "type": "text",
          "text": "Deletes the trust settings for a certificate."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/security/1397413-sectrustsettingscopycertificates",
        "doc://com.apple.documentation/documentation/security/1397941-sectrustsettingscopymodification",
        "doc://com.apple.documentation/documentation/security/certificate_key_and_trust_services/trust/usage_constraints_dictionary_keys",
        "doc://com.apple.documentation/documentation/security/1402355-sectrustsettingscreateexternalre",
        "doc://com.apple.documentation/documentation/security/1392836-sectrustsettingsimportexternalre",
        "doc://com.apple.documentation/documentation/security/1395904-sectrustsettingsremovetrustsetti",
        "doc://com.apple.documentation/documentation/security/1399119-sectrustsettingssettrustsettings",
        "doc://com.apple.documentation/documentation/security/ksectrustsettingsdefaultrootcertsetting",
        "doc://com.apple.documentation/documentation/security/sectrustsettingskeyusage",
        "doc://com.apple.documentation/documentation/security/sectrustsettingsresult",
        "doc://com.apple.documentation/documentation/security/sectrustsettingsdomain"
      ],
      "title": "Trust Settings",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "identifier": "symbol-1480124",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "SecTrustSettingsCopyTrustSettings"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@SecCertificateRef",
              "identifier": "doc://com.apple.documentation/documentation/security/seccertificateref",
              "text": "SecCertificateRef"
            },
            {
              "kind": "text",
              "text": " certRef, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@SecTrustSettingsDomain",
              "identifier": "doc://com.apple.documentation/documentation/security/sectrustsettingsdomain",
              "text": "SecTrustSettingsDomain"
            },
            {
              "kind": "text",
              "text": " domain, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CFArrayRef",
              "identifier": "doc://com.apple.documentation/documentation/corefoundation/cfarrayref",
              "text": "CFArrayRef"
            },
            {
              "kind": "text",
              "text": "  "
            },
            {
              "kind": "keyword",
              "text": "_Nullable"
            },
            {
              "kind": "text",
              "text": " *trustSettings);"
            }
          ],
          "platforms": [
            "macOS"
          ]
        }
      ]
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "name": "certRef",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The certificate for which you want the trust settings. Pass the value "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/ksectrustsettingsdefaultrootcertsetting"
                },
                {
                  "type": "text",
                  "text": " to obtain the default root certificate trust settings for the domain."
                }
              ]
            }
          ]
        },
        {
          "name": "domain",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The trust settings domain of the trust settings that you wish to obtain.  For possible values, see "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/security/sectrustsettingsdomain"
                },
                {
                  "type": "text",
                  "text": "."
                }
              ]
            }
          ]
        },
        {
          "name": "trustSettings",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "On return, an array of "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/corefoundation/cfdictionaryref"
                },
                {
                  "type": "text",
                  "text": " objects specifying the trust settings for the certificate. For the contents of the dictionaries, see the discussion below. Call the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/corefoundation/1521153-cfrelease"
                },
                {
                  "type": "text",
                  "text": " function to release this object when you are finished with it."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "A result code. See "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes"
            },
            {
              "type": "text",
              "text": ". Returns "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1542001-security_framework_result_codes/errsecitemnotfound"
            },
            {
              "type": "text",
              "text": " if no trust settings exist for the specified certificate and domain."
            }
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Each certificate’s trust settings are expressed as a "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corefoundation/cfarrayref"
            },
            {
              "type": "text",
              "text": " that includes any number (including zero) of dictionaries of type "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corefoundation/cfdictionaryref"
            },
            {
              "type": "text",
              "text": ", each of which comprises one set of usage constraints. Each usage constraints dictionary contains zero or one of each of the following key-value pairs:"
            }
          ]
        },
        {
          "type": "table",
          "header": "row",
          "rows": [
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Key"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Value"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "kSecTrustSettingsPolicy"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "A policy object ("
                    },
                    {
                      "type": "codeVoice",
                      "code": "SecPolicyRef"
                    },
                    {
                      "type": "text",
                      "text": ") specifying the certificate verification policy; for example: SSL, SMIME. Use the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/1562856-secpolicysearchcopynext"
                    },
                    {
                      "type": "text",
                      "text": " function to obtain a policy object."
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "kSecTrustSettingsApplication"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "A trusted application reference ("
                    },
                    {
                      "type": "codeVoice",
                      "code": "SecTrustedApplicationRef"
                    },
                    {
                      "type": "text",
                      "text": ") for the application checking the certificate’s trust settings. Use the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/1400622-sectrustedapplicationcreatefromp"
                    },
                    {
                      "type": "text",
                      "text": " function to get this reference."
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "kSecTrustSettingsPolicyString"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "A"
                    },
                    {
                      "type": "codeVoice",
                      "code": "CFString"
                    },
                    {
                      "type": "text",
                      "text": " containing policy-specific data. For the SMIME policy, this string contains an email address. For the SSL policy, it contains a host name."
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "kSecTrustSettingsKeyUsage"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "A"
                    },
                    {
                      "type": "codeVoice",
                      "code": "CFNumber"
                    },
                    {
                      "type": "text",
                      "text": " containing an "
                    },
                    {
                      "type": "codeVoice",
                      "code": "SInt32"
                    },
                    {
                      "type": "text",
                      "text": " value specifying the operations for which the encryption key in this certificate can be used. For possible values, see "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/sectrustsettingskeyusage"
                    },
                    {
                      "type": "text",
                      "text": "."
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "kSecTrustSettingsResult"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "A "
                    },
                    {
                      "type": "codeVoice",
                      "code": "CFNumber"
                    },
                    {
                      "type": "text",
                      "text": " containing an "
                    },
                    {
                      "type": "codeVoice",
                      "code": "SInt32"
                    },
                    {
                      "type": "text",
                      "text": " value indicating the effective trust setting for this usage constraints dictionary. A given usage constraints dictionary is included in the evaluation of trust for a certificate only if the specified policy, application, and key use match the use for which the certificate is being evaluated. If this is the case, then the value of the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "kSecTrustSettingsResult"
                    },
                    {
                      "type": "text",
                      "text": " key is ORed with the results from other dictionaries to determine the overall trust setting for the certificate."
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "If this key is not present, a default value of "
                    },
                    {
                      "type": "codeVoice",
                      "code": "kSecTrustSettingsResultTrustRoot"
                    },
                    {
                      "type": "text",
                      "text": " is assumed. Because only a root certificate can have this value, a usage constraints dictionary for a non-root certificate that is missing this key is not valid."
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Possible values for this key are listed in "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/security/sectrustsettingsresult"
                    },
                    {
                      "type": "text",
                      "text": "."
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "kSecTrustSettingsAllowedError"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "A "
                    },
                    {
                      "type": "codeVoice",
                      "code": "CFNumber"
                    },
                    {
                      "type": "text",
                      "text": " containing an "
                    },
                    {
                      "type": "codeVoice",
                      "code": "SInt32"
                    },
                    {
                      "type": "text",
                      "text": " value indicating a "
                    },
                    {
                      "type": "codeVoice",
                      "code": "CSSM_RETURN"
                    },
                    {
                      "type": "text",
                      "text": " result code which, if encountered during certificate verification, is ignored for that certificate. These “allowed error” values are applied to the evaluation only if the usage constraints dictionary meets the criteria described with the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "kSecTrustSettingsResult"
                    },
                    {
                      "type": "text",
                      "text": " key. A usage constraint dictionary with no constraints but with an allowed error value causes that error to always be allowed when the certificate is being evaluated."
                    }
                  ]
                }
              ]
            ]
          ],
          "metadata": {
            "anchor": "2556087",
            "title": "Table 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The overall trust settings for a certificate are the sum of all the usage constraints dictionaries that match the use for which that certificate is being evaluated. Trust settings for a given use apply if "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "any"
                }
              ]
            },
            {
              "type": "text",
              "text": " of the dictionaries in the certificate’s trust settings array satisfies the specified use. Thus, when a certificate has multiple usage constraints dictionaries in its trust settings array, the overall trust settings for the certificate are:"
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "((usage constraint dictionary 0 component 0) AND (usage constraint dictionary 0 component 1) AND (...)) OR  ((usage constraint dictionary 1 component 0) AND (usage constraint dictionary 1 component 1) AND (...)) OR (...) ..."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If the value of the "
            },
            {
              "type": "codeVoice",
              "code": "kSecTrustSettingsResult"
            },
            {
              "type": "text",
              "text": " component is "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "not"
                }
              ]
            },
            {
              "type": "text",
              "text": " "
            },
            {
              "type": "codeVoice",
              "code": "kSecTrustSettingsResultUnspecified"
            },
            {
              "type": "text",
              "text": " for a usage constraints dictionary that has no constraints, the default value "
            },
            {
              "type": "codeVoice",
              "code": "kSecTrustSettingsResultTrustRoot"
            },
            {
              "type": "text",
              "text": " is assumed. To  specify a value for the "
            },
            {
              "type": "codeVoice",
              "code": "kSecTrustSettingsAllowedError"
            },
            {
              "type": "text",
              "text": " component without explicitly trusting or distrusting the associated certificate, specify a value of "
            },
            {
              "type": "codeVoice",
              "code": "kSecTrustSettingsResultUnspecified"
            },
            {
              "type": "text",
              "text": " for the "
            },
            {
              "type": "codeVoice",
              "code": "kSecTrustSettingsResult"
            },
            {
              "type": "text",
              "text": " component. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "An empty trust settings array (that is, the "
            },
            {
              "type": "codeVoice",
              "code": "trustSettings"
            },
            {
              "type": "text",
              "text": " parameter returns a valid but empty "
            },
            {
              "type": "codeVoice",
              "code": "CFArray"
            },
            {
              "type": "text",
              "text": ") means \"always trust this certificate” with an overall trust setting for the certificate of "
            },
            {
              "type": "codeVoice",
              "code": "kSecTrustSettingsResultTrustRoot"
            },
            {
              "type": "text",
              "text": ". Note that an empty trust settings array is not the same as no trust settings (the "
            },
            {
              "type": "codeVoice",
              "code": "trustSettings"
            },
            {
              "type": "text",
              "text": " parameter returns "
            },
            {
              "type": "codeVoice",
              "code": "NULL"
            },
            {
              "type": "text",
              "text": "), which means \"this certificate must be verified to a known trusted certificate”."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Note the distinction between the results "
            },
            {
              "type": "codeVoice",
              "code": "kSecTrustSettingsResultTrustRoot"
            },
            {
              "type": "text",
              "text": " and "
            },
            {
              "type": "codeVoice",
              "code": "kSecTrustSettingsResultTrustAsRoot"
            },
            {
              "type": "text",
              "text": ": The former can only be applied to root (self-signed) certificates; the latter can only be applied to non-root certificates. Therefore, an empty trust settings array for a non-root certificate is invalid, because the default value of "
            },
            {
              "type": "codeVoice",
              "code": "kSecTrustSettingsResultTrustRoot"
            },
            {
              "type": "text",
              "text": " is not valid for a non-root certificate."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Special Considerations",
          "anchor": "1968615"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When making changes to per-user trust settings, the user is prompted with an alert panel asking for authentication (user name and password or other credentials normally used for login). Therefore, it is not possible to modify per-user trust settings when not running in a GUI environment (that is, when the user is not logged in via the login window). When making changes to system-wide trust settings, the user is prompted with an alert panel asking for an administrator’s name and password unless the calling process is running as root, in which case no further authentication is needed."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}