{
  "abstract": [
    {
      "type": "text",
      "text": "Securely launch and manage plug-ins and other executable entities, known as guest code, from within your app acting as a host."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/security",
        "doc://com.apple.documentation/documentation/security/code_signing_services"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/security/code_signing_services/hosting_guest_code",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 2870830,
  "kind": "article",
  "metadata": {
    "title": "Hosting Guest Code",
    "role": "article",
    "roleHeading": "Article",
    "modules": [
      {
        "name": "Security"
      }
    ]
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/security/code_signing_services/hosting_guest_code"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/security/code_signing_services/hosting_guest_code"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/security": {
      "title": "Security",
      "identifier": "doc://com.apple.documentation/documentation/security",
      "url": "/documentation/security",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/security/code_signing_services": {
      "title": "Code Signing Services",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/code_signing_services",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/security/code_signing_services"
    },
    "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags/kseccsdedicatedhost": {
      "title": "kSecCSDedicatedHost",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags/kseccsdedicatedhost",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1560749-guest_creation_flags/kseccsdedicatedhost"
    },
    "doc://com.apple.documentation/documentation/security/seccoderef": {
      "title": "SecCodeRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/seccoderef",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/seccoderef"
    },
    "doc://com.apple.documentation/documentation/security/1396597-sechostcreateguest": {
      "title": "SecHostCreateGuest",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1396597-sechostcreateguest",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1396597-sechostcreateguest",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a new guest and describes its initial properties."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1392127-sechostsethostingport": {
      "title": "SecHostSetHostingPort",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1392127-sechostsethostingport",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1392127-sechostsethostingport"
    },
    "doc://com.apple.documentation/documentation/security/code_signing_services/hosting_guest_code": {
      "title": "Hosting Guest Code",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/code_signing_services/hosting_guest_code",
      "kind": "article",
      "role": "article",
      "url": "/documentation/security/code_signing_services/hosting_guest_code",
      "abstract": [
        {
          "type": "text",
          "text": "Securely launch and manage plug-ins and other executable entities, known as guest code, from within your app acting as a host."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1397494-sechostsetgueststatus": {
      "title": "SecHostSetGuestStatus",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1397494-sechostsetgueststatus",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1397494-sechostsetgueststatus",
      "abstract": [
        {
          "type": "text",
          "text": "Updates the status and attributes of a particular guest."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/security/1395560-seccodecopyguestwithattributes": {
      "title": "SecCodeCopyGuestWithAttributes",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1395560-seccodecopyguestwithattributes",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/1395560-seccodecopyguestwithattributes",
      "abstract": [
        {
          "type": "text",
          "text": "Asks a code host to identify one of its guests given the type and value of specific attributes of the guest code."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1574087-null_guest_handle": {
      "title": "Null Guest Handle",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1574087-null_guest_handle",
      "kind": "symbol",
      "role": "containerSymbol",
      "url": "/documentation/security/1574087-null_guest_handle",
      "abstract": [
        {
          "type": "text",
          "text": "Use this special value to stand in for a null guest object."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/seccodestatus": {
      "title": "SecCodeStatus",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/seccodestatus",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/seccodestatus",
      "abstract": [
        {
          "type": "text",
          "text": "Operational flags attached by code signing services to running code. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags": {
      "title": "Guest Creation Flags",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags",
      "kind": "symbol",
      "role": "containerSymbol",
      "url": "/documentation/security/1560749-guest_creation_flags",
      "abstract": [
        {
          "type": "text",
          "text": "Use these supplemental flags to create a guest object."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/code_signing_services/guest_attribute_dictionary_keys": {
      "title": "Guest Attribute Dictionary Keys",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/code_signing_services/guest_attribute_dictionary_keys",
      "kind": "article",
      "role": "collectionGroup",
      "url": "/documentation/security/code_signing_services/guest_attribute_dictionary_keys",
      "abstract": [
        {
          "type": "text",
          "text": "Specify attributes of guest code."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/security/secguestref": {
      "title": "SecGuestRef",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/security/secguestref",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/security/secguestref",
      "abstract": [
        {
          "type": "text",
          "text": "A reference to a guest object, which identifies a particular block of guest code in the context of its code signing host."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/security/1396597-sechostcreateguest",
        "doc://com.apple.documentation/documentation/security/1397494-sechostsetgueststatus",
        "doc://com.apple.documentation/documentation/security/1395560-seccodecopyguestwithattributes",
        "doc://com.apple.documentation/documentation/security/1574087-null_guest_handle",
        "doc://com.apple.documentation/documentation/security/seccodestatus",
        "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags",
        "doc://com.apple.documentation/documentation/security/code_signing_services/guest_attribute_dictionary_keys",
        "doc://com.apple.documentation/documentation/security/secguestref"
      ],
      "title": "Guest Code",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The functions in this section are called only by code that is hosting guests. In the context of code signing, a host is code that creates, launches, and manages other code—its guests. A host must do this without compromising its own integrity. As part of that duty, it maintains state for each of its guests and answers questions about them."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In general, a host is responsible for defending itself against its guests. That is, a host is generally assumed to have a separate code identity from its guests and must prevent its guests from altering its internal data structures or otherwise altering the host code. However, a host can declare itself to be a dedicated host, in which case its only function is to run its specified dedicated guest. In that case, the system treats the host and its guest as a single code entity and the host does not have to defend itself from its guest. For more information on dedicated hosts, see "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1560749-guest_creation_flags/kseccsdedicatedhost"
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Both hosts and guests are represented by code objects—that is, by objects of type "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/seccoderef"
            },
            {
              "type": "text",
              "text": ". Within the hosting API, guests are identified by simple numeric handles that are unique and valid only in the context of their specific host."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The functions in this section always apply to the code host making the calls. They cannot be used to directly interrogate another host."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In order to be considered a code host by "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/code_signing_services"
            },
            {
              "type": "text",
              "text": ", code must call either the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1396597-sechostcreateguest"
            },
            {
              "type": "text",
              "text": " function or the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1392127-sechostsethostingport"
            },
            {
              "type": "text",
              "text": " function. Code that calls the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1396597-sechostcreateguest"
            },
            {
              "type": "text",
              "text": " function is considered to be acting in proxy hosting mode. Code that calls the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/1392127-sechostsethostingport"
            },
            {
              "type": "text",
              "text": " function is considered to be acting in dynamic hosting mode. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In proxy hosting mode, the host provides information about its guests when it creates or loads them, when it removes them, and when it changes their status. "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/security/code_signing_services"
            },
            {
              "type": "text",
              "text": " caches this information and answers queries about guests from this pool of information. The host is not directly involved in answering such queries, and has no way to intervene."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In dynamic hosting mode, the host provides a Mach port that receives direct queries about its guests. The host then responds directly to questions about its guests."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Once this mode is set, there is no way to switch to the other mode, and any call to a function that belongs to the wrong mode fails. However, from the point of view of services requesting information about guest code, there is no distinction between guests hosted by proxy and those hosted dynamically."
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}