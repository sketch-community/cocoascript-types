{
  "abstract": [
    {
      "type": "text",
      "text": "An operation that modifies one or more records."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/cloudkit",
        "doc://com.apple.documentation/documentation/cloudkit/local_records"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1447462,
  "kind": "symbol",
  "metadata": {
    "title": "CKModifyRecordsOperation",
    "role": "symbol",
    "roleHeading": "Class",
    "modules": [
      {
        "name": "CloudKit"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "8.0",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "8.0",
        "current": "15.2"
      },
      {
        "name": "macOS",
        "introducedAt": "10.10",
        "current": "12.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "15.2"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "current": "15.2"
      },
      {
        "name": "watchOS",
        "introducedAt": "3.0",
        "current": "8.3"
      }
    ],
    "externalID": "c:objc(cs)CKModifyRecordsOperation",
    "symbolKind": "cl"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/cloudkit/ckmodifyrecordsoperation"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/cloudkit/ckmodifyrecordsoperation"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/cloudkit": {
      "title": "CloudKit",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit",
      "url": "/documentation/cloudkit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/cloudkit/local_records": {
      "title": "Local Records",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/local_records",
      "url": "/documentation/cloudkit/local_records",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckreferenceaction/ckreferenceactiondeleteself": {
      "title": "CKReferenceActionDeleteSelf",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckreferenceaction/ckreferenceactiondeleteself",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckreferenceaction/ckreferenceactiondeleteself"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447488-savepolicy": {
      "title": "savePolicy",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447488-savepolicy",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordsoperation/1447488-savepolicy",
      "abstract": [
        {
          "type": "text",
          "text": "The policy to use when saving changes to records."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/nsoperation/1408085-completionblock": {
      "title": "completionBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsoperation/1408085-completionblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsoperation/1408085-completionblock"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckerrorcode/ckerrorlimitexceeded": {
      "title": "CKErrorLimitExceeded",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckerrorcode/ckerrorlimitexceeded",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckerrorcode/ckerrorlimitexceeded"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckdatabaseoperation": {
      "title": "CKDatabaseOperation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckdatabaseoperation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckdatabaseoperation"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447464-initwithrecordstosave": {
      "title": "initWithRecordsToSave:recordIDsToDelete:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447464-initwithrecordstosave",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordsoperation/1447464-initwithrecordstosave",
      "abstract": [
        {
          "type": "text",
          "text": "Creates an operation for modifying the specified records."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "initWithRecordsToSave:recordIDsToDelete:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447466-init": {
      "title": "init",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447466-init",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordsoperation/1447466-init",
      "abstract": [
        {
          "type": "text",
          "text": "Creates an empty modify records operation."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "init"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447482-recordstosave": {
      "title": "recordsToSave",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447482-recordstosave",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordsoperation/1447482-recordstosave",
      "abstract": [
        {
          "type": "text",
          "text": "The records to save to the database."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447479-recordidstodelete": {
      "title": "recordIDsToDelete",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447479-recordidstodelete",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordsoperation/1447479-recordidstodelete",
      "abstract": [
        {
          "type": "text",
          "text": "The IDs of the records to delete permanently from the database."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447472-clientchangetokendata": {
      "title": "clientChangeTokenData",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447472-clientchangetokendata",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordsoperation/1447472-clientchangetokendata",
      "abstract": [
        {
          "type": "text",
          "text": "A token that tracks local changes to records."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447484-atomic": {
      "title": "atomic",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447484-atomic",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordsoperation/1447484-atomic",
      "abstract": [
        {
          "type": "text",
          "text": "A Boolean value that indicates whether the entire operation fails when CloudKit can’t update one or more records in a record zone."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckrecordsavepolicy": {
      "title": "CKRecordSavePolicy",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckrecordsavepolicy",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckrecordsavepolicy",
      "abstract": [
        {
          "type": "text",
          "text": "Constants that indicate which policy to apply when saving records."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447477-perrecordprogressblock": {
      "title": "perRecordProgressBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447477-perrecordprogressblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordsoperation/1447477-perrecordprogressblock",
      "abstract": [
        {
          "type": "text",
          "text": "The block to execute with progress information for individual records."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447470-perrecordcompletionblock": {
      "title": "perRecordCompletionBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447470-perrecordcompletionblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordsoperation/1447470-perrecordcompletionblock",
      "abstract": [
        {
          "type": "text",
          "text": "The block to execute when CloudKit saves a record. "
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447486-modifyrecordscompletionblock": {
      "title": "modifyRecordsCompletionBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447486-modifyrecordscompletionblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordsoperation/1447486-modifyrecordscompletionblock",
      "abstract": [
        {
          "type": "text",
          "text": "The block to execute after CloudKit modifies all of the records. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/3793704-perrecorddeleteblock": {
      "title": "perRecordDeleteBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/3793704-perrecorddeleteblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordsoperation/3793704-perrecorddeleteblock"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/3793705-perrecordsaveblock": {
      "title": "perRecordSaveBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/3793705-perrecordsaveblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordsoperation/3793705-perrecordsaveblock"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordzonesoperation": {
      "title": "CKModifyRecordZonesOperation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordzonesoperation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordzonesoperation",
      "abstract": [
        {
          "type": "text",
          "text": "An operation that modifies one or more record zones."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation": {
      "title": "CKModifyRecordsOperation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckmodifyrecordsoperation",
      "abstract": [
        {
          "type": "text",
          "text": "An operation that modifies one or more records."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "relationshipsSections": [
    {
      "kind": "relationships",
      "title": "Inherits From",
      "type": "inheritsFrom",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckdatabaseoperation"
      ]
    }
  ],
  "topicSections": [
    {
      "kind": "taskGroup",
      "title": "Creating a Modify Record Operation",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447464-initwithrecordstosave",
        "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447466-init"
      ],
      "anchor": "1666066"
    },
    {
      "kind": "taskGroup",
      "title": "Configuring the Modify Record Operation",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447482-recordstosave",
        "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447479-recordidstodelete",
        "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447472-clientchangetokendata",
        "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447484-atomic",
        "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447488-savepolicy",
        "doc://com.apple.documentation/documentation/cloudkit/ckrecordsavepolicy"
      ],
      "anchor": "1666102"
    },
    {
      "kind": "taskGroup",
      "title": "Processing the Modify Record Results",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447477-perrecordprogressblock",
        "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447470-perrecordcompletionblock",
        "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447486-modifyrecordscompletionblock"
      ],
      "anchor": "1666207"
    },
    {
      "kind": "taskGroup",
      "title": "Instance Properties",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/3793704-perrecorddeleteblock",
        "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/3793705-perrecordsaveblock"
      ],
      "anchor": "3796733"
    }
  ],
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordzonesoperation"
      ],
      "title": "Transactions",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "@interface"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "CKModifyRecordsOperation"
            },
            {
              "kind": "text",
              "text": " : "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)CKDatabaseOperation",
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckdatabaseoperation",
              "text": "CKDatabaseOperation"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "After modifying the fields of a record, use this operation to save those changes to a database. You also use this operation to delete records permanently from a database."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When saving a record that contains a reference with an action of "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckreferenceaction/ckreferenceactiondeleteself"
            },
            {
              "type": "text",
              "text": ", CloudKit must be able to find the target of the reference. During a save operation, CloudKit verifies that any target records actually exist in the database. If it can’t verify the existence of a target record, CloudKit reports an error and doesn’t save the record that contains the reference to that target. When creating two new records that have a reference between them, use the same operation to save both records at the same time."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When you save records, the value in the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckmodifyrecordsoperation/1447488-savepolicy"
            },
            {
              "type": "text",
              "text": " property determines how to proceed when CloudKit detects conflicts. Because records can change between the time you fetch them and the time you save them, the save policy determines whether new changes overwrite existing changes. By default, the operation reports an error when there is a newer version on the server. You can change the default setting to permit your changes to overwrite the server values wholly or partially."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The handlers you assign to monitor progress of the operation execute serially on an internal queue that the operation manages. Your handlers must be capable of executing on a background thread, so any tasks that require access to the main thread must redirect accordingly.  "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If you assign a completion handler to the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsoperation/1408085-completionblock"
            },
            {
              "type": "text",
              "text": " property of the operation, CloudKit calls it after the operation executes and returns the results. Use the completion handler to perform any housekeeping tasks for the operation, but don’t use it to process the results of the operation. The completion handler you provide should manage any failures of the operation, whether due to an error or an explicit cancellation. "
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "To ensure the speed of fetching and saving records, the server may reject large operations. When this occurs, a block reports the "
                },
                {
                  "type": "reference",
                  "isActive": true,
                  "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckerrorcode/ckerrorlimitexceeded"
                },
                {
                  "type": "text",
                  "text": " error. Your app should handle this error, and refactor the operation into multiple smaller batches."
                }
              ]
            }
          ],
          "style": "important"
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}