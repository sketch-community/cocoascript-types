{
  "abstract": [
    {
      "type": "text",
      "text": "An operation for retrieving records from CloudKit."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/cloudkit",
        "doc://com.apple.documentation/documentation/cloudkit/record_operations"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1476086,
  "kind": "symbol",
  "metadata": {
    "title": "CKFetchRecordsOperation",
    "role": "symbol",
    "roleHeading": "Class",
    "modules": [
      {
        "name": "CloudKit"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "8.0",
        "current": "14.3"
      },
      {
        "name": "macOS",
        "introducedAt": "10.10",
        "current": "11.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "14.3"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "current": "14.3"
      },
      {
        "name": "watchOS",
        "introducedAt": "3.0",
        "current": "7.2"
      }
    ],
    "externalID": "c:objc(cs)CKFetchRecordsOperation",
    "symbolKind": "cl"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/cloudkit/ckfetchrecordsoperation"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/cloudkit/ckfetchrecordsoperation"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/cloudkit": {
      "title": "CloudKit",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit",
      "url": "/documentation/cloudkit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/cloudkit/record_operations": {
      "title": "Record Operations",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/record_operations",
      "url": "/documentation/cloudkit/record_operations",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckreference": {
      "title": "CKReference",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckreference",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckreference"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476070-fetchcurrentuserrecordoperation": {
      "title": "fetchCurrentUserRecordOperation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476070-fetchcurrentuserrecordoperation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordsoperation/1476070-fetchcurrentuserrecordoperation",
      "abstract": [
        {
          "type": "text",
          "text": "Returns a fetch operation for retrieving the current user record."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "+ "
        },
        {
          "kind": "identifier",
          "text": "fetchCurrentUserRecordOperation"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckrecord": {
      "title": "CKRecord",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckrecord",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckrecord"
    },
    "doc://com.apple.documentation/documentation/foundation/nsoperation/1408085-completionblock": {
      "title": "completionBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsoperation/1408085-completionblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsoperation/1408085-completionblock"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckdatabaseoperation": {
      "title": "CKDatabaseOperation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckdatabaseoperation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckdatabaseoperation"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476074-initwithrecordids": {
      "title": "initWithRecordIDs:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476074-initwithrecordids",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordsoperation/1476074-initwithrecordids",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a fetch operation for retrieving the records with the specified IDs."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "initWithRecordIDs:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476072-init": {
      "title": "init",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476072-init",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordsoperation/1476072-init",
      "abstract": [
        {
          "type": "text",
          "text": "Creates an empty fetch operation."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "init"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476076-recordids": {
      "title": "recordIDs",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476076-recordids",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordsoperation/1476076-recordids",
      "abstract": [
        {
          "type": "text",
          "text": "The record IDs of the records to fetch."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476088-desiredkeys": {
      "title": "desiredKeys",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476088-desiredkeys",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordsoperation/1476088-desiredkeys",
      "abstract": [
        {
          "type": "text",
          "text": "The fields of the records to fetch."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476080-perrecordprogressblock": {
      "title": "perRecordProgressBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476080-perrecordprogressblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordsoperation/1476080-perrecordprogressblock",
      "abstract": [
        {
          "type": "text",
          "text": "The block to execute with progress information for individual records."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476082-perrecordcompletionblock": {
      "title": "perRecordCompletionBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476082-perrecordcompletionblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordsoperation/1476082-perrecordcompletionblock",
      "abstract": [
        {
          "type": "text",
          "text": "The block to execute when a record becomes available."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476078-fetchrecordscompletionblock": {
      "title": "fetchRecordsCompletionBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476078-fetchrecordscompletionblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordsoperation/1476078-fetchrecordscompletionblock",
      "abstract": [
        {
          "type": "text",
          "text": "The block to execute after CloudKit retrieves all of the records. "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation": {
      "title": "CKFetchRecordsOperation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordsoperation",
      "abstract": [
        {
          "type": "text",
          "text": "An operation for retrieving records from CloudKit."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "diffAvailability": {
    "major": {
      "change": "modified",
      "platform": "Xcode",
      "versions": [
        "12.0",
        "12.3 Release Candidate"
      ]
    }
  },
  "relationshipsSections": [
    {
      "kind": "relationships",
      "title": "Inherits From",
      "type": "inheritsFrom",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckdatabaseoperation"
      ]
    }
  ],
  "topicSections": [
    {
      "kind": "taskGroup",
      "title": "Creating a Record Fetch Operation",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476074-initwithrecordids",
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476072-init"
      ]
    },
    {
      "kind": "taskGroup",
      "title": "Getting the Current User Record",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476070-fetchcurrentuserrecordoperation"
      ]
    },
    {
      "kind": "taskGroup",
      "title": "Configuring a Record Fetch Operation",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476076-recordids",
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476088-desiredkeys"
      ]
    },
    {
      "kind": "taskGroup",
      "title": "Processing Record Fetch Results",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476080-perrecordprogressblock",
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476082-perrecordcompletionblock",
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476078-fetchrecordscompletionblock"
      ]
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "@interface"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "CKFetchRecordsOperation"
            },
            {
              "kind": "text",
              "text": " : "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)CKDatabaseOperation",
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckdatabaseoperation",
              "text": "CKDatabaseOperation"
            }
          ],
          "platforms": [
            "iOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Use this operation to retrieve the entire contents of each record or only a subset of its contained values. As records become available, the operation object reports progress about the state of the operation to several different blocks, which you can use to process the results."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Fetching records is a common use of CloudKit, even if your app doesn’t cache record IDs locally. For example, when you fetch a record related to the current record through a "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckreference"
            },
            {
              "type": "text",
              "text": " object, you use the ID in the reference to perform the fetch."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The handlers you assign to process the fetched records execute serially on an internal queue that the fetch operation manages. Your handlers must be capable of executing on a background thread, so any tasks that require access to the main thread must redirect accordingly.  "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In addition to data records, a fetch records operation can fetch the current user record. The "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordsoperation/1476070-fetchcurrentuserrecordoperation"
            },
            {
              "type": "text",
              "text": " method returns a specially configured operation object that retrieves the current user record. That record is a standard "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckrecord"
            },
            {
              "type": "text",
              "text": " object that has no content initially. You can add data to the user record and save it as necessary. Don’t store sensitive personal information, such as passwords, in the user record because other users of your app can access the discoverable user record in a public database. If you must store sensitive information about a user, do so in a separate record that is accessible only to that user. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If you assign a closure to the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsoperation/1408085-completionblock"
            },
            {
              "type": "text",
              "text": " property of the operation object, CloudKit calls it after the operation executes and returns its results. Use a closure to perform any housekeeping tasks for the operation, but don’t use it to process the results of the operation. The closure you specify should handle the failure of the operation to complete its task, whether due to an error or an explicit cancellation. "
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}