{
  "abstract": [
    {
      "type": "text",
      "text": "A query that describes the criteria to apply when searching for records in a database."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/cloudkit",
        "doc://com.apple.documentation/documentation/cloudkit/local_records"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/cloudkit/ckquery",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1413116,
  "kind": "symbol",
  "metadata": {
    "title": "CKQuery",
    "role": "symbol",
    "roleHeading": "Class",
    "modules": [
      {
        "name": "CloudKit"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "8.0",
        "current": "15.2"
      },
      {
        "name": "iPadOS",
        "introducedAt": "8.0",
        "current": "15.2"
      },
      {
        "name": "macOS",
        "introducedAt": "10.10",
        "current": "12.1"
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "current": "15.2"
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "current": "15.2"
      },
      {
        "name": "watchOS",
        "introducedAt": "3.0",
        "current": "8.3"
      }
    ],
    "externalID": "c:objc(cs)CKQuery",
    "symbolKind": "cl"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/cloudkit/ckquery"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/cloudkit/ckquery"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/cloudkit": {
      "title": "CloudKit",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit",
      "url": "/documentation/cloudkit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/cloudkit/local_records": {
      "title": "Local Records",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/local_records",
      "url": "/documentation/cloudkit/local_records",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery#1965781": {
      "title": "Table 2",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1965781",
      "kind": "article",
      "role": "table",
      "url": "/documentation/cloudkit/ckquery#1965781",
      "abstract": [
        {
          "type": "text",
          "text": "Supported predicate operators"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/nsstring": {
      "title": "NSString",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsstring",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsstring"
    },
    "doc://com.apple.documentation/documentation/foundation/nsdate": {
      "title": "NSDate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsdate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsdate"
    },
    "doc://com.apple.documentation/documentation/foundation/nsnumber": {
      "title": "NSNumber",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsnumber",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsnumber"
    },
    "doc://com.apple.documentation/documentation/foundation/nsarray": {
      "title": "NSArray",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsarray",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsarray"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckreference": {
      "title": "CKReference",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckreference",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckreference"
    },
    "doc://com.apple.documentation/documentation/corelocation/cllocation": {
      "title": "CLLocation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/corelocation/cllocation"
    },
    "devLink-1725793": {
      "identifier": "devLink-1725793",
      "type": "link",
      "title": "Predicate Programming Guide",
      "url": "https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Predicates/AdditionalChapters/Introduction.html#//apple_ref/doc/uid/TP40001789"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941890": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941890",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/ckquery#1941890",
      "abstract": [
        {
          "type": "text",
          "text": "Matching the ID of a record"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941896": {
      "title": "Listing 2",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941896",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/ckquery#1941896",
      "abstract": [
        {
          "type": "text",
          "text": "Matching a field to a specific value"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941902": {
      "title": "Listing 3",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941902",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/ckquery#1941902",
      "abstract": [
        {
          "type": "text",
          "text": "Matching a field to one or more values"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941907": {
      "title": "Listing 4",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941907",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/ckquery#1941907",
      "abstract": [
        {
          "type": "text",
          "text": "Matching a field that starts with a string value "
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941913": {
      "title": "Listing 5",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941913",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/ckquery#1941913",
      "abstract": [
        {
          "type": "text",
          "text": "Matching a field that contains one or more tokens"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941918": {
      "title": "Listing 6",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941918",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/ckquery#1941918",
      "abstract": [
        {
          "type": "text",
          "text": "Matching a field that contains multiple tokens"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941924": {
      "title": "Listing 7",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941924",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/ckquery#1941924",
      "abstract": [
        {
          "type": "text",
          "text": "Matching by distance from a location"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941929": {
      "title": "Listing 8",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941929",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/ckquery#1941929",
      "abstract": [
        {
          "type": "text",
          "text": "Retrieving all records of a specific type"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/foundation/nspredicate": {
      "title": "NSPredicate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nspredicate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nspredicate"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery#2556103": {
      "title": "Table 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#2556103",
      "kind": "article",
      "role": "table",
      "url": "/documentation/cloudkit/ckquery#2556103"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckqueryoperation": {
      "title": "CKQueryOperation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckqueryoperation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckqueryoperation",
      "abstract": [
        {
          "type": "text",
          "text": "An operation for executing queries in a database."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckdatabase/1449127-performquery": {
      "title": "performQuery:inZoneWithID:completionHandler:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckdatabase/1449127-performquery",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckdatabase/1449127-performquery",
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "performQuery:inZoneWithID:completionHandler:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckdatabase": {
      "title": "CKDatabase",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckdatabase",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckdatabase"
    },
    "doc://com.apple.documentation/documentation/objectivec/nsobject": {
      "title": "NSObject",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/objectivec/nsobject",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/objectivec/nsobject"
    },
    "doc://com.apple.documentation/documentation/foundation/nssecurecoding": {
      "title": "NSSecureCoding",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nssecurecoding",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nssecurecoding"
    },
    "doc://com.apple.documentation/documentation/foundation/nscopying": {
      "title": "NSCopying",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nscopying",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nscopying"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413119-initwithrecordtype": {
      "title": "initWithRecordType:predicate:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413119-initwithrecordtype",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckquery/1413119-initwithrecordtype",
      "abstract": [
        {
          "type": "text",
          "text": "Creates a query with the specified record type and predicate."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "initWithRecordType:predicate:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413111-initwithcoder": {
      "title": "initWithCoder:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413111-initwithcoder",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckquery/1413111-initwithcoder",
      "abstract": [
        {
          "type": "text",
          "text": "Creates an operation group from a serialized instance."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "initWithCoder:"
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413117-recordtype": {
      "title": "recordType",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413117-recordtype",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckquery/1413117-recordtype",
      "abstract": [
        {
          "type": "text",
          "text": "The record type to search."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413112-predicate": {
      "title": "predicate",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413112-predicate",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckquery/1413112-predicate",
      "abstract": [
        {
          "type": "text",
          "text": "The predicate to use for matching records."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413121-sortdescriptors": {
      "title": "sortDescriptors",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413121-sortdescriptors",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckquery/1413121-sortdescriptors",
      "abstract": [
        {
          "type": "text",
          "text": "The sort descriptors for organizing the query’s results."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckquery": {
      "title": "CKQuery",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckquery",
      "abstract": [
        {
          "type": "text",
          "text": "A query that describes the criteria to apply when searching for records in a database."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/cklocationsortdescriptor": {
      "title": "CKLocationSortDescriptor",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/cklocationsortdescriptor",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/cklocationsortdescriptor",
      "abstract": [
        {
          "type": "text",
          "text": "An object for sorting records that contain location data."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "relationshipsSections": [
    {
      "kind": "relationships",
      "title": "Inherits From",
      "type": "inheritsFrom",
      "identifiers": [
        "doc://com.apple.documentation/documentation/objectivec/nsobject"
      ]
    },
    {
      "kind": "relationships",
      "title": "Conforms To",
      "type": "conformsTo",
      "identifiers": [
        "doc://com.apple.documentation/documentation/foundation/nscopying",
        "doc://com.apple.documentation/documentation/foundation/nssecurecoding"
      ]
    }
  ],
  "topicSections": [
    {
      "kind": "taskGroup",
      "title": "Creating a Query",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413119-initwithrecordtype",
        "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413111-initwithcoder"
      ],
      "anchor": "1666122"
    },
    {
      "kind": "taskGroup",
      "title": "Accessing the Query Parameters",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413117-recordtype",
        "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413112-predicate",
        "doc://com.apple.documentation/documentation/cloudkit/ckquery/1413121-sortdescriptors"
      ],
      "anchor": "1666153"
    }
  ],
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckqueryoperation",
        "doc://com.apple.documentation/documentation/cloudkit/cklocationsortdescriptor"
      ],
      "title": "Queries",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "@interface"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "CKQuery"
            },
            {
              "kind": "text",
              "text": " : "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSObject",
              "identifier": "doc://com.apple.documentation/documentation/objectivec/nsobject",
              "text": "NSObject"
            }
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You create a query as the first step in the search process. The query stores the search parameters, including the type of records to search, the match criteria (predicate) to apply, and the sort parameters to apply to the results. Then you use the query to initialize an instance of "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckqueryoperation"
            },
            {
              "type": "text",
              "text": ", which you execute to generate the results."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Always designate a record type and predicate when you create a query object. The record type narrows the scope of the search to one type of record, and the predicate defines the conditions for matching records of that type. Predicates usually compare one or more fields of a record to constant values, but you can create predicates that return all records of a specific type or perform more nuanced searches."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Because you can’t change the record type and predicate after initialization, you can use the same query to initialize multiple instances of "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckqueryoperation"
            },
            {
              "type": "text",
              "text": ", each of which targets a different database or record zone."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Building Your Predicates",
          "anchor": "1666020"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "An "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/foundation/nspredicate"
            },
            {
              "type": "text",
              "text": " object defines the logical conditions for determining whether a record is a match for a query. Queries support only a subset of the predicate behaviors that the "
            },
            {
              "type": "codeVoice",
              "code": "NSPredicate"
            },
            {
              "type": "text",
              "text": " class offers. "
            }
          ]
        },
        {
          "level": 4,
          "type": "heading",
          "text": "Predicate Rules for Query Objects",
          "anchor": "1666032"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The predicates you create for your query objects must follow these rules: "
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Predicates derive from a format string. You can’t use value or block-based predicates. "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Predicates use only the operators in "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1965781"
                    },
                    {
                      "type": "text",
                      "text": "."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Predicates operate only on fields that contain the following types of data:"
                    }
                  ]
                },
                {
                  "type": "unorderedList",
                  "items": [
                    {
                      "content": [
                        {
                          "type": "paragraph",
                          "inlineContent": [
                            {
                              "type": "reference",
                              "isActive": true,
                              "identifier": "doc://com.apple.documentation/documentation/foundation/nsstring"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "content": [
                        {
                          "type": "paragraph",
                          "inlineContent": [
                            {
                              "type": "reference",
                              "isActive": true,
                              "identifier": "doc://com.apple.documentation/documentation/foundation/nsdate"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "content": [
                        {
                          "type": "paragraph",
                          "inlineContent": [
                            {
                              "type": "reference",
                              "isActive": true,
                              "identifier": "doc://com.apple.documentation/documentation/foundation/nsnumber"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "content": [
                        {
                          "type": "paragraph",
                          "inlineContent": [
                            {
                              "type": "reference",
                              "isActive": true,
                              "identifier": "doc://com.apple.documentation/documentation/foundation/nsarray"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "content": [
                        {
                          "type": "paragraph",
                          "inlineContent": [
                            {
                              "type": "reference",
                              "isActive": true,
                              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckreference"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "content": [
                        {
                          "type": "paragraph",
                          "inlineContent": [
                            {
                              "type": "reference",
                              "isActive": true,
                              "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocation"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Key names in predicates correspond to fields in the currently evaluated record. Key names can include the names of the record’s metadata properties, such as "
                    },
                    {
                      "type": "codeVoice",
                      "code": "creationDate"
                    },
                    {
                      "type": "text",
                      "text": ", or any data fields you add to the record. You can’t use key paths to specify fields in related records. "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Predicates support the following variable substitution strings:"
                    }
                  ]
                },
                {
                  "type": "unorderedList",
                  "items": [
                    {
                      "content": [
                        {
                          "type": "paragraph",
                          "inlineContent": [
                            {
                              "type": "text",
                              "text": "Use "
                            },
                            {
                              "type": "codeVoice",
                              "code": "%@"
                            },
                            {
                              "type": "text",
                              "text": " for value objects, such as strings, numbers, and dates."
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "content": [
                        {
                          "type": "paragraph",
                          "inlineContent": [
                            {
                              "type": "text",
                              "text": "Use "
                            },
                            {
                              "type": "codeVoice",
                              "code": "%K"
                            },
                            {
                              "type": "text",
                              "text": " for the name of a field. This substitution variable indicates that the system uses the substitution string to look up a field name. "
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "With one exception, the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "CONTAINS"
                    },
                    {
                      "type": "text",
                      "text": " operator is only for testing list membership. The exception is when you use it to perform full-text searches in conjunction with the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "self"
                    },
                    {
                      "type": "text",
                      "text": " key path. The "
                    },
                    {
                      "type": "codeVoice",
                      "code": "self"
                    },
                    {
                      "type": "text",
                      "text": " key path causes the server to look in searchable string-based fields for the specified token string. For example, a predicate string of "
                    },
                    {
                      "type": "codeVoice",
                      "code": "@\"self contains 'blue'\""
                    },
                    {
                      "type": "text",
                      "text": " searches for the word "
                    },
                    {
                      "type": "emphasis",
                      "inlineContent": [
                        {
                          "type": "text",
                          "text": "blue"
                        }
                      ]
                    },
                    {
                      "type": "text",
                      "text": " in all fields that you mark for inclusion in full-text searches. You can’t use the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "self"
                    },
                    {
                      "type": "text",
                      "text": " key path to search in fields with a type that isn’t a string. "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "You can combine the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "ANY"
                    },
                    {
                      "type": "text",
                      "text": " and "
                    },
                    {
                      "type": "codeVoice",
                      "code": "SOME"
                    },
                    {
                      "type": "text",
                      "text": " aggregate operators with the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "IN"
                    },
                    {
                      "type": "text",
                      "text": " and "
                    },
                    {
                      "type": "codeVoice",
                      "code": "CONTAINS"
                    },
                    {
                      "type": "text",
                      "text": " operators to perform list membership tests. "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "The "
                    },
                    {
                      "type": "codeVoice",
                      "code": "distanceToLocation:fromLocation:"
                    },
                    {
                      "type": "text",
                      "text": " operator function performs a radius-based location comparison and that comparison must determine whether the location value is inside the circular area you provide. You can’t use it to search for locations outside the specified circular area. Location indexes have a resolution of no less than 10 km."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "CloudKit doesn’t support the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "ALL"
                    },
                    {
                      "type": "text",
                      "text": " aggregate operator."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "CloudKit doesn’t support the "
                    },
                    {
                      "type": "codeVoice",
                      "code": "NOT"
                    },
                    {
                      "type": "text",
                      "text": " compound operator in the following cases:"
                    }
                  ]
                },
                {
                  "type": "unorderedList",
                  "items": [
                    {
                      "content": [
                        {
                          "type": "paragraph",
                          "inlineContent": [
                            {
                              "type": "text",
                              "text": "You can’t use it to negate an "
                            },
                            {
                              "type": "codeVoice",
                              "code": "AND"
                            },
                            {
                              "type": "text",
                              "text": " compound predicate."
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "content": [
                        {
                          "type": "paragraph",
                          "inlineContent": [
                            {
                              "type": "text",
                              "text": "You can’t use it in tokenized queries, such as "
                            },
                            {
                              "type": "codeVoice",
                              "code": "self CONTAINS 'value'"
                            },
                            {
                              "type": "text",
                              "text": "."
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "content": [
                        {
                          "type": "paragraph",
                          "inlineContent": [
                            {
                              "type": "text",
                              "text": "You can’t use it with the "
                            },
                            {
                              "type": "codeVoice",
                              "code": "distanceToLocation:fromLocation:"
                            },
                            {
                              "type": "text",
                              "text": " function."
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "content": [
                        {
                          "type": "paragraph",
                          "inlineContent": [
                            {
                              "type": "text",
                              "text": "You can’t use it in "
                            },
                            {
                              "type": "codeVoice",
                              "code": "BETWEEN"
                            },
                            {
                              "type": "text",
                              "text": " queries."
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "level": 4,
          "type": "heading",
          "text": "Supported Predicate Operators",
          "anchor": "1666045"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The following table lists the operators you can use in predicates for a query."
            }
          ]
        },
        {
          "type": "table",
          "header": "row",
          "rows": [
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Operation"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Supported operators"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Basic comparisons"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "="
                    },
                    {
                      "type": "text",
                      "text": ", "
                    },
                    {
                      "type": "codeVoice",
                      "code": "=="
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": ">="
                    },
                    {
                      "type": "text",
                      "text": ", "
                    },
                    {
                      "type": "codeVoice",
                      "code": "=>"
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "<="
                    },
                    {
                      "type": "text",
                      "text": ", "
                    },
                    {
                      "type": "codeVoice",
                      "code": "=<"
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "<"
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": ">"
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "!="
                    },
                    {
                      "type": "text",
                      "text": ", "
                    },
                    {
                      "type": "codeVoice",
                      "code": "<>"
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "BETWEEN"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Boolean value predicates"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "TRUEPREDICATE"
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "FALSEPREDICATE"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Basic compound predicates"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "AND"
                    },
                    {
                      "type": "text",
                      "text": ", "
                    },
                    {
                      "type": "codeVoice",
                      "code": "&&"
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "NOT"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "String comparisons"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "BEGINSWITH"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Aggregate operations"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "IN"
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "CONTAINS"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Functions"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "distanceToLocation:fromLocation:"
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "now"
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "tokenize:using:"
                    }
                  ]
                }
              ]
            ]
          ],
          "metadata": {
            "anchor": "1965781",
            "title": "Table 2",
            "abstract": [
              {
                "type": "text",
                "text": "Supported predicate operators"
              }
            ]
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Specifying an unsupported operator or data type in your query’s predicate results in an error when you execute the query. For more information about creating predicate objects, see "
            },
            {
              "type": "link",
              "title": "Predicate Programming Guide",
              "destination": "https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Predicates/AdditionalChapters/Introduction.html#//apple_ref/doc/uid/TP40001789"
            },
            {
              "type": "text",
              "text": ". "
            }
          ]
        },
        {
          "level": 4,
          "type": "heading",
          "text": "Sample Predicate Format Strings",
          "anchor": "1666064"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To match records that link to a different record with an ID you know, create a predicate that matches a field that contains a reference as "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941890"
            },
            {
              "type": "text",
              "text": " shows. In the example, the "
            },
            {
              "type": "codeVoice",
              "code": "employee"
            },
            {
              "type": "text",
              "text": " field of the record contains a "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckreference"
            },
            {
              "type": "text",
              "text": " object that points to another record. When the query executes, a match occurs when the ID in the locally created "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckreference"
            },
            {
              "type": "text",
              "text": " object is the same ID as in the specified field of the record. "
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "CKReference* recordToMatch = [[CKReference alloc] initWithRecordID:employeeID action:CKReferenceActionNone];",
            "NSPredicate* predicate = [NSPredicate predicateWithFormat:@\"employee == %@\", recordToMatch];"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "1941890",
            "title": "Listing 1",
            "abstract": [
              {
                "type": "text",
                "text": "Matching the ID of a record"
              }
            ]
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To match the contents of a field to a specific value, use a predicate similar to the ones in "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941896"
            },
            {
              "type": "text",
              "text": ". All of the listed predicates generate the same set of results, which in the example means that the "
            },
            {
              "type": "codeVoice",
              "code": "favoriteColors"
            },
            {
              "type": "text",
              "text": " field contains the value "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "red"
                }
              ]
            },
            {
              "type": "text",
              "text": ". The value in the field must match the value you specify in the predicate exactly. String-based comparisons are case-insensitive, but otherwise, all comparisons must be an exact match of the specified value. "
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "NSPredicate predicate = nil;",
            "predicate = [NSPredicate predicateWithFormat:@\"ANY favoriteColors = 'red'\"];",
            "predicate = [NSPredicate predicateWithFormat:@\"favoriteColors CONTAINS 'red'\"];",
            "predicate = [NSPredicate predicateWithFormat:@\"'red' IN favoriteColors\"];",
            "predicate = [NSPredicate predicateWithFormat:@\"%K CONTAINS %@\", @\"favoriteColors\", @\"red\"];"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "1941896",
            "title": "Listing 2",
            "abstract": [
              {
                "type": "text",
                "text": "Matching a field to a specific value"
              }
            ]
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "You can match more than one value at a time by using a predicate similar to the ones in "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941902"
            },
            {
              "type": "text",
              "text": ". In the example, the predicates report a match if the value in the "
            },
            {
              "type": "codeVoice",
              "code": "favoriteColor"
            },
            {
              "type": "text",
              "text": " field of a record matches either of the values "
            },
            {
              "type": "codeVoice",
              "code": "red"
            },
            {
              "type": "text",
              "text": " or "
            },
            {
              "type": "codeVoice",
              "code": "green"
            },
            {
              "type": "text",
              "text": ". "
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "NSPredicate predicate = nil;",
            "predicate = [NSPredicate predicateWithFormat:@\"ANY { 'red', 'green' } = favoriteColor\"];",
            "predicate = [NSPredicate predicateWithFormat:@\"favoriteColor IN { 'red', 'green' }\"];"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "1941902",
            "title": "Listing 3",
            "abstract": [
              {
                "type": "text",
                "text": "Matching a field to one or more values"
              }
            ]
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For fields that contain string values, you can match the beginning portion of the string using the "
            },
            {
              "type": "codeVoice",
              "code": "BEGINSWITH"
            },
            {
              "type": "text",
              "text": " operator as  "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941907"
            },
            {
              "type": "text",
              "text": " shows. You can’t use other string comparison operators, such as "
            },
            {
              "type": "codeVoice",
              "code": "CONTAINS"
            },
            {
              "type": "text",
              "text": " or "
            },
            {
              "type": "codeVoice",
              "code": "ENDSWITH"
            },
            {
              "type": "text",
              "text": ". When using this operator, the field must contain a string value and must start with the string you specify. Matches are case-sensitive. In the examples, the predicate matches records where the "
            },
            {
              "type": "codeVoice",
              "code": "favoriteColors"
            },
            {
              "type": "text",
              "text": " field contains the strings "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "red"
                }
              ]
            },
            {
              "type": "text",
              "text": ", "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "reddish"
                }
              ]
            },
            {
              "type": "text",
              "text": ", or "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "red"
                }
              ]
            },
            {
              "type": "codeVoice",
              "code": " "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "green"
                }
              ]
            },
            {
              "type": "codeVoice",
              "code": " "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "duct"
                }
              ]
            },
            {
              "type": "codeVoice",
              "code": " "
            },
            {
              "type": "emphasis",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "tape"
                }
              ]
            },
            {
              "type": "text",
              "text": "."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "NSString* matchString = @\"red\";",
            "NSPredicate predicate = nil;",
            "predicate = [NSPredicate predicateWithFormat:@\"ANY favoriteColors BEGINSWITH 'red'\"]",
            "predicate = [NSPredicate predicateWithFormat:@\"ANY favoriteColors BEGINSWITH %@\", matchString]"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "1941907",
            "title": "Listing 4",
            "abstract": [
              {
                "type": "text",
                "text": "Matching a field that starts with a string value "
              }
            ]
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To perform a tokenized search of a record’s fields, use the special operator "
            },
            {
              "type": "codeVoice",
              "code": "self"
            },
            {
              "type": "text",
              "text": ". A tokenized search searches any fields where you enable full-text search, which is all string-based fields by default. CloudKit treats each distinct word in the tokenized string as a separate token for the purpose of searching. Comparisons are case- and diacritic-insensitive. These token strings can be in a single field or in multiple fields. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941913"
            },
            {
              "type": "text",
              "text": " shows an example that searches the fields of a record for the token strings "
            },
            {
              "type": "codeVoice",
              "code": "bob"
            },
            {
              "type": "text",
              "text": " or "
            },
            {
              "type": "codeVoice",
              "code": "smith"
            },
            {
              "type": "text",
              "text": ":"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "NSPredicate predicate = nil;",
            "predicate = [NSPredicate predicateWithFormat:@\"self contains 'bob smith'\"];"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "1941913",
            "title": "Listing 5",
            "abstract": [
              {
                "type": "text",
                "text": "Matching a field that contains one or more tokens"
              }
            ]
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To search for multiple tokens present in the fields, use the "
            },
            {
              "type": "codeVoice",
              "code": "AND"
            },
            {
              "type": "text",
              "text": " predicate operator, as "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941918"
            },
            {
              "type": "text",
              "text": " shows."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "NSPredicate predicate = nil;",
            "predicate = [NSPredicate predicateWithFormat:@\"self contains 'bob' AND self contains __'__smith__'__\"];"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "1941918",
            "title": "Listing 6",
            "abstract": [
              {
                "type": "text",
                "text": "Matching a field that contains multiple tokens"
              }
            ]
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To test whether two locations are near each other, create a predicate using the "
            },
            {
              "type": "codeVoice",
              "code": "distanceToLocation:fromLocation:"
            },
            {
              "type": "text",
              "text": " function as "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941924"
            },
            {
              "type": "text",
              "text": " shows. Predicates that use this function must have the structure in the listing. In your code, replace the "
            },
            {
              "type": "codeVoice",
              "code": "location"
            },
            {
              "type": "text",
              "text": " variable with a field name from one of your records. This data type for the field must be a "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/corelocation/cllocation"
            },
            {
              "type": "text",
              "text": " object. Similarly, replace the "
            },
            {
              "type": "codeVoice",
              "code": "fixedLoc"
            },
            {
              "type": "text",
              "text": " and "
            },
            {
              "type": "codeVoice",
              "code": "radius"
            },
            {
              "type": "text",
              "text": " values with appropriate values from your app. The "
            },
            {
              "type": "codeVoice",
              "code": "fixedLoc"
            },
            {
              "type": "text",
              "text": " value is the geographic coordinate that marks the center of a circle with the specified radius. In this example, the predicate returns a match if the location in the record is within 10 kilometers of the specified latitude and longitude. "
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "CLLocation* fixedLoc = [[CLLocation alloc] initWithLatitude:37.331913 longitude:-122.030210];",
            "CGFloat radius = 10000; // meters",
            "NSPredicate predicate =",
            "   [NSPredicate predicateWithFormat:@\"distanceToLocation:fromLocation:(location, %@) < %f\", fixedLoc, radius]];"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "1941924",
            "title": "Listing 7",
            "abstract": [
              {
                "type": "text",
                "text": "Matching by distance from a location"
              }
            ]
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To retrieve all records of a specific type, use the "
            },
            {
              "type": "codeVoice",
              "code": "TRUEPREDICATE"
            },
            {
              "type": "text",
              "text": " expression as "
            },
            {
              "type": "reference",
              "isActive": false,
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckquery#1941929"
            },
            {
              "type": "text",
              "text": " shows. A predicate with this operator always evaluates to "
            },
            {
              "type": "codeVoice",
              "code": "true"
            },
            {
              "type": "text",
              "text": " and, therefore, matches every record. When using such an operator, use a cursor to batch the results into smaller groups for processing. "
            }
          ]
        },
        {
          "type": "aside",
          "content": [
            {
              "type": "paragraph",
              "inlineContent": [
                {
                  "type": "text",
                  "text": "The "
                },
                {
                  "type": "codeVoice",
                  "code": "distanceToLocation:fromLocation:"
                },
                {
                  "type": "text",
                  "text": " operator function performs a radius-based location comparison, and that comparison must determine whether the location value is inside the circular area you provide. You can’t use it to search for locations outside the specified circular area. Location indexes have a resolution of no less than 10 km."
                }
              ]
            }
          ],
          "style": "note",
          "name": "Note"
        },
        {
          "type": "codeListing",
          "code": [
            "NSPredicate predicate = nil;",
            "predicate = [NSPredicate predicateWithFormat:@\"TRUEPREDICATE\"];"
          ],
          "syntax": "occ",
          "metadata": {
            "anchor": "1941929",
            "title": "Listing 8",
            "abstract": [
              {
                "type": "text",
                "text": "Retrieving all records of a specific type"
              }
            ]
          }
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Indexes and Full-Text Search",
          "anchor": "1666083"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Indexes make it possible to search the contents of your records efficiently. During development, the server indexes all fields with data types it can use in the predicate of a query. This automatic indexing makes it easier to experiment with queries during development, but the indexes require space in a database and require time to generate and maintain. So when migrating to a production environment, remove the indexes for any fields that you don’t use in queries."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Full-text search is another feature that is on by default for all fields during development. When you move to the production environment, disable full-text search for fields with content you don’t need to search. As with removing indexes, disabling full-text search improves the performance of your tokenized searches. To configure the indexing and full-text search options for fields in your schema, use CloudKit Dashboard."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "In a full-text search, CloudKit ignores the following words if they appear in the token strings:"
            }
          ]
        },
        {
          "type": "table",
          "header": "none",
          "rows": [
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "a"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "by"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "not"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "then"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "an"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "for"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "of"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "there"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "and"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "if"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "on"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "these"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "are"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "in"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "or"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "they"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "as"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "into"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "such"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "this"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "at"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "is"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "that"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "to"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "be"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "it"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "the"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "was"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "but"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "no"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "their"
                    }
                  ]
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "will"
                    }
                  ]
                }
              ]
            ],
            [
              [
                {
                  "type": "paragraph",
                  "inlineContent": []
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": []
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": []
                }
              ],
              [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "with"
                    }
                  ]
                }
              ]
            ]
          ],
          "metadata": {
            "anchor": "2556103",
            "title": "Table 1"
          }
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Executing a Search Using Your Query Object",
          "anchor": "1666103"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To execute a query, do one of the following:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Create an instance of "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckqueryoperation"
                    },
                    {
                      "type": "text",
                      "text": " using your query. Run the operation directly or add it to an operation queue to perform the query and deliver the results. "
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Call the "
                    },
                    {
                      "type": "reference",
                      "isActive": true,
                      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckdatabase/1449127-performquery"
                    },
                    {
                      "type": "text",
                      "text": " method of "
                    },
                    {
                      "type": "reference",
                      "isActive": false,
                      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckdatabase"
                    },
                    {
                      "type": "text",
                      "text": " to execute the query. Process the results in your completion handler. "
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Queries always run asynchronously and deliver results to a completion handler that you provide. "
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}