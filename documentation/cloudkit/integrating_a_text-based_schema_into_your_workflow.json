{
  "abstract": [
    {
      "type": "text",
      "text": "Define and update your schema with the CloudKit Schema Language."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/cloudkit"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 3783226,
  "kind": "article",
  "metadata": {
    "title": "Integrating a Text-Based Schema into Your Workflow",
    "role": "article",
    "roleHeading": "Article",
    "modules": [
      {
        "name": "CloudKit"
      }
    ]
  },
  "schemaVersion": {
    "major": 0,
    "minor": 1,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/cloudkit": {
      "title": "CloudKit",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit",
      "url": "/documentation/cloudkit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3783223": {
      "title": "Listing 1",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3783223",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3783223"
    },
    "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3783237": {
      "title": "Listing 2",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3783237",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3783237"
    },
    "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3798273": {
      "title": "Listing 3",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3798273",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3798273"
    },
    "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3798271": {
      "title": "Listing 4",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3798271",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3798271"
    },
    "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3820103": {
      "title": "Listing 5",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3820103",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3820103"
    },
    "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3783225": {
      "title": "Listing 6",
      "type": "section",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3783225",
      "kind": "article",
      "role": "codeListing",
      "url": "/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow#3783225"
    },
    "doc://com.apple.documentation/documentation/cloudkit/designing_and_creating_a_cloudkit_database": {
      "title": "Designing and Creating a CloudKit Database",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/designing_and_creating_a_cloudkit_database",
      "kind": "article",
      "role": "article",
      "url": "/documentation/cloudkit/designing_and_creating_a_cloudkit_database",
      "abstract": [
        {
          "type": "text",
          "text": "Create a schema to store your app’s objects as records in iCloud using CloudKit."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/managing_icloud_containers_with_the_cloudkit_database_app": {
      "title": "Managing iCloud Containers with the CloudKit Database App",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/managing_icloud_containers_with_the_cloudkit_database_app",
      "kind": "article",
      "role": "article",
      "url": "/documentation/cloudkit/managing_icloud_containers_with_the_cloudkit_database_app",
      "abstract": [
        {
          "type": "text",
          "text": "Inspect and modify the schema and data for your app's iCloud container."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckrecordzone": {
      "title": "CKRecordZone",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckrecordzone",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckrecordzone",
      "abstract": [
        {
          "type": "text",
          "text": "A database partition that contains related records."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckrecord": {
      "title": "CKRecord",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckrecord",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckrecord",
      "abstract": [
        {
          "type": "text",
          "text": "A collection of key-value pairs that store your app’s data."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckreference": {
      "title": "CKReference",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckreference",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckreference",
      "abstract": [
        {
          "type": "text",
          "text": "A relationship between two records in a record zone."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckasset": {
      "title": "CKAsset",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckasset",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckasset",
      "abstract": [
        {
          "type": "text",
          "text": "An external file that belongs to a record."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow": {
      "title": "Integrating a Text-Based Schema into Your Workflow",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow",
      "kind": "article",
      "role": "article",
      "url": "/documentation/cloudkit/integrating_a_text-based_schema_into_your_workflow",
      "abstract": [
        {
          "type": "text",
          "text": "Define and update your schema with the CloudKit Schema Language."
        }
      ]
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "seeAlsoSections": [
    {
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/designing_and_creating_a_cloudkit_database",
        "doc://com.apple.documentation/documentation/cloudkit/managing_icloud_containers_with_the_cloudkit_database_app",
        "doc://com.apple.documentation/documentation/cloudkit/ckrecordzone",
        "doc://com.apple.documentation/documentation/cloudkit/ckrecord",
        "doc://com.apple.documentation/documentation/cloudkit/ckreference",
        "doc://com.apple.documentation/documentation/cloudkit/ckasset"
      ],
      "title": "Schemas",
      "generated": true
    }
  ],
  "primaryContentSections": [
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "CloudKit’s textual representation enables you to simultaneously manage your schema and the application source code that depends on it. The CloudKit command line tools download, verify, and install a schema to your container’s sandbox environment, while the CloudKit dashboard promotes a schema to the production environment."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "When publishing a schema, CloudKit attempts to apply changes to the existing schema, if one exists, to convert it to the form specifed in the new schema. If the modifications required would result in potential data loss with respect to the current production schema (like removing a record type or field name that exists already), then the schema isn’t valid and CloudKit makes no changes."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For containers with an existing schema, use the CloudKit command line tools to download the container’s schema. Manually constructing your existing schema by hand isn’t recommended, as any mistakes may result in your existing sandbox data becoming inaccessible. A good practice is to integrate the schema into your source code repository."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Learn the CloudKit Schema Language Grammar",
          "anchor": "3783224"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The grammar for the CloudKit Schema Language contains all the elements to define your schema. Use the grammar to create roles, declare record types and their permissions, as well as specify data types and options for each field in the record. "
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "create-schema:",
            "    DEFINE SCHEMA ",
            "        [ { create-role | record-type } \";\" ] ...",
            "",
            "create-role:",
            "    CREATE ROLE %role-name% ",
            "    ",
            "record-type:",
            "    RECORD TYPE %type-name% ( ",
            "        {",
            "            [ %field-name% data-type [ field-options [..] ] ]",
            "            |",
            "            [ GRANT { READ | CREATE | WRITE } [, ... ] TO %role-name% ]",
            "        } [\",\" ... ]",
            "    )    ",
            "",
            "field-options:",
            "    | QUERYABLE",
            "    | SORTABLE",
            "    | SEARCHABLE",
            "",
            "data-type:",
            "   primitive-type | list-type",
            "",
            "primitive-type:",
            "   | ASSET",
            "   | BYTES",
            "   | DOUBLE",
            "   | [ ENCRYPTED ] { BYTES | STRING | DOUBLE | INT64 | LOCATION | TIMESTAMP }",
            "   | INT64",
            "   | LOCATION ",
            "   | NUMBER [ PREFERRED AS { INT64 | DOUBLE } ]",
            "   | REFERENCE",
            "   | STRING",
            "   | TIMESTAMP",
            "   ",
            "list-type:",
            "   | LIST \"<\" primitive-type \">\"",
            "",
            ""
          ],
          "syntax": "other",
          "metadata": {
            "anchor": "3783223",
            "title": "Listing 1"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Additional details and guidelines for creating roles, record types, type names, field names, data types and permissions are listed below."
            }
          ]
        },
        {
          "type": "termList",
          "items": [
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "codeVoice",
                    "code": "create-role"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "Creates a new role and grants create, read, or write permissions on record types."
                      }
                    ]
                  }
                ]
              }
            },
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "codeVoice",
                    "code": "record-type"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "Creates a new record, composed of fields and their types, and grants permissions to roles."
                      }
                    ]
                  }
                ]
              }
            },
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "codeVoice",
                    "code": "type-name"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "The identifier for the record type. Use double quotes around the name if it’s a reserved word."
                      }
                    ]
                  }
                ]
              }
            },
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "codeVoice",
                    "code": "field-name"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "The identifier for a field within a record type. Use double quotes around the name if it’s a reserved word."
                      }
                    ]
                  }
                ]
              }
            },
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "codeVoice",
                    "code": "field-options"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "The options define additional attributes of the field."
                      }
                    ]
                  },
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "codeVoice",
                        "code": "QUERYABLE"
                      },
                      {
                        "type": "text",
                        "text": " - Maintains an index to optimize equality lookups on the field. "
                      }
                    ]
                  },
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "codeVoice",
                        "code": "SORTABLE"
                      },
                      {
                        "type": "text",
                        "text": " - Maintains an index optimizing for range searches on the field. "
                      }
                    ]
                  },
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "codeVoice",
                        "code": "SEARCHABLE"
                      },
                      {
                        "type": "text",
                        "text": " - Maintains a text search index on the field."
                      }
                    ]
                  }
                ]
              }
            },
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "codeVoice",
                    "code": "data-type"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "The data type for the field in the record."
                      }
                    ]
                  },
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "Avoid using the "
                      },
                      {
                        "type": "codeVoice",
                        "code": "NUMBER"
                      },
                      {
                        "type": "text",
                        "text": " type, which is only for when a field is implicitly added to a schema by a record modification on a sandbox container. If such a field has been implicitly added to a type in your schema, the "
                      },
                      {
                        "type": "codeVoice",
                        "code": "PREFERRED AS"
                      },
                      {
                        "type": "text",
                        "text": " syntax allows you to explicitly indicate which type the "
                      },
                      {
                        "type": "codeVoice",
                        "code": "NUMBER"
                      },
                      {
                        "type": "text",
                        "text": " should be treated as ("
                      },
                      {
                        "type": "codeVoice",
                        "code": "INT64"
                      },
                      {
                        "type": "text",
                        "text": " or "
                      },
                      {
                        "type": "codeVoice",
                        "code": "DOUBLE"
                      },
                      {
                        "type": "text",
                        "text": "). Once you assign "
                      },
                      {
                        "type": "codeVoice",
                        "code": "NUMBER"
                      },
                      {
                        "type": "text",
                        "text": " as a "
                      },
                      {
                        "type": "codeVoice",
                        "code": "PREFERRED AS"
                      },
                      {
                        "type": "text",
                        "text": " type, future definitions must not change that type."
                      }
                    ]
                  }
                ]
              }
            },
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "codeVoice",
                    "code": "GRANT"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "The "
                      },
                      {
                        "type": "codeVoice",
                        "code": "GRANT"
                      },
                      {
                        "type": "text",
                        "text": " clause defines permission on the record type in the "
                      },
                      {
                        "type": "codeVoice",
                        "code": "PUBLIC"
                      },
                      {
                        "type": "text",
                        "text": " database. Unless your schema explicitly grants permissions, a type has no security privileges available in the "
                      },
                      {
                        "type": "codeVoice",
                        "code": "PUBLIC"
                      },
                      {
                        "type": "text",
                        "text": " database, making the type unusable."
                      }
                    ]
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The grammar uses these conventions:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Brackets indicate optional parts."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Braces and vertical bars indicate that you must choose one alternative."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "An ellipsis indicates that the preceding element can be repeated."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Names surrounded by percent signs indicate identifiers."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Identifiers must follow existing CloudKit naming conventions and restrictions. User-defined identifiers must follow these rules:"
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "The first character must be one of "
                    },
                    {
                      "type": "codeVoice",
                      "code": "a-z"
                    },
                    {
                      "type": "text",
                      "text": " or "
                    },
                    {
                      "type": "codeVoice",
                      "code": "A-Z"
                    },
                    {
                      "type": "text",
                      "text": "."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Subsequent characters must be one of "
                    },
                    {
                      "type": "codeVoice",
                      "code": "a-z"
                    },
                    {
                      "type": "text",
                      "text": ", "
                    },
                    {
                      "type": "codeVoice",
                      "code": "A-Z"
                    },
                    {
                      "type": "text",
                      "text": ", "
                    },
                    {
                      "type": "codeVoice",
                      "code": "0-9"
                    },
                    {
                      "type": "text",
                      "text": ", or "
                    },
                    {
                      "type": "codeVoice",
                      "code": "_"
                    },
                    {
                      "type": "text",
                      "text": " (underscore)."
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "text",
                      "text": "Use double quotes around identifiers to include keywords and reserved words in the syntax definition. For example, to create a type called "
                    },
                    {
                      "type": "emphasis",
                      "inlineContent": [
                        {
                          "type": "text",
                          "text": "grant"
                        }
                      ]
                    },
                    {
                      "type": "text",
                      "text": ", define it as “grant”. The reserved words in the CloudKit Schema Language are: grant, preferred, queryable, sortable, and searchable."
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Also, CloudKit reserves identifiers starting with a leading underscore as system-defined identifiers. For example, all record types have an implicitly defined "
            },
            {
              "type": "codeVoice",
              "code": "___recordID"
            },
            {
              "type": "text",
              "text": " field. Use double quotes when referring to such system fields as well. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The language allows comments in these forms:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "// Single-line comment",
            "-- Single-line comment",
            "/* ",
            "Multi-line comment",
            "*/"
          ],
          "syntax": "other",
          "metadata": {
            "anchor": "3783237",
            "title": "Listing 2"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "CloudKit doesn’t preserve the comments in your schema when you upload them to CloudKit. Additionally, when you retreive the schema, the order of the elements may differ from the order when the schema was created or updated."
            }
          ]
        },
        {
          "level": 3,
          "type": "heading",
          "text": "Recognize Implicit Fields and Roles",
          "anchor": "3783248"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "All record types have the following implicitly defined fields: "
            }
          ]
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "“___createTime” TIMESTAMP"
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "”___createdBy” REFERENCE"
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "”___etag” STRING"
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "”___modTime” TIMESTAMP"
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "”___modifiedBy” REFERENCE"
                    }
                  ]
                }
              ]
            },
            {
              "content": [
                {
                  "type": "paragraph",
                  "inlineContent": [
                    {
                      "type": "codeVoice",
                      "code": "”___recordID” REFERENCE"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "These field names are always present within the record time so it’s not necessary to explicitly provide them. If you wish to make any of these fields queryable, sortable, or searchable, then your type must explicitly specify the field and the attribute. You can’t change the type of these system fields. "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Though CloudKit won’t remove the system field names, it doesn’t maintain the field options if the field isn’t mentioned in later schema updates. For example, if the following is in your schema:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "RECORD TYPE ApplicationType  (",
            "        \"___createTime\" REFERENCE QUERYABLE,",
            "        name STRING,",
            "        ...",
            ")"
          ],
          "syntax": "other",
          "metadata": {
            "anchor": "3798273",
            "title": "Listing 3"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Then CloudKit builds an index for efficient searches on the record creation time field. Later, if you modify the schema to no longer mention the creation time field:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "RECORD TYPE ApplicationType  (",
            "        name STRING,",
            "        ...",
            ")"
          ],
          "syntax": "other",
          "metadata": {
            "anchor": "3798271",
            "title": "Listing 4"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Then the "
            },
            {
              "type": "codeVoice",
              "code": "__createTime"
            },
            {
              "type": "text",
              "text": " field remains on the record type (since it’s a required system field), but CloudKit drops the index on the field, and the user query performance may degrade or fail as a result."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Additionally, all record types have these implicitly defined roles:"
            }
          ]
        },
        {
          "type": "termList",
          "items": [
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "codeVoice",
                    "code": "“_creator”"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "The user that created a given record (“Creator” in the dashboard)."
                      }
                    ]
                  },
                  {
                    "type": "paragraph",
                    "inlineContent": []
                  }
                ]
              }
            },
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "codeVoice",
                    "code": "”_world”"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "All users (“World” in the dashboard)."
                      }
                    ]
                  },
                  {
                    "type": "paragraph",
                    "inlineContent": []
                  }
                ]
              }
            },
            {
              "term": {
                "inlineContent": [
                  {
                    "type": "codeVoice",
                    "code": "”_icloud”"
                  }
                ]
              },
              "definition": {
                "content": [
                  {
                    "type": "paragraph",
                    "inlineContent": [
                      {
                        "type": "text",
                        "text": "All authenticated users (“Authenticated” in the dashboard)."
                      }
                    ]
                  },
                  {
                    "type": "paragraph",
                    "inlineContent": []
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "For types that you wish to use in a "
            },
            {
              "type": "codeVoice",
              "code": "PUBLIC"
            },
            {
              "type": "text",
              "text": " database, include the following grants:"
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "GRANT WRITE TO \"_creator\"",
            "GRANT CREATE TO \"_icloud\"",
            "GRANT READ TO \"_world\""
          ],
          "syntax": "other",
          "metadata": {
            "anchor": "3820103",
            "title": "Listing 5"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": []
        },
        {
          "level": 3,
          "type": "heading",
          "text": "View an Example Schema",
          "anchor": "3783227"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "This sample schema defines a simple company department and employee information. It demonstrates extending the attributes of system fields and the double quotes necessary for referring to system identifiers."
            }
          ]
        },
        {
          "type": "codeListing",
          "code": [
            "DEFINE SCHEMA",
            "    CREATE ROLE DeptManager;",
            "",
            "    RECORD TYPE Department (",
            "        \"___createTime\" TIMESTAMP QUERYABLE SORTABLE,",
            "        \"___recordID\" REFERENCE QUERYABLE,",
            "        name STRING,",
            "        address STRING,",
            "        phone LIST<STRING>,",
            "        employees LIST<REFERENCE>,",
            "        GRANT WRITE TO \"_creator\", ",
            "        GRANT CREATE TO \"_icloud\",",
            "        GRANT READ TO \"_world\",",
            "        GRANT WRITE, CREATE, READ TO DeptManager",
            "    );",
            "",
            "    RECORD TYPE Employee (",
            "        \"___createTime\" TIMESTAMP QUERYABLE SORTABLE,",
            "        \"___recordID\" REFERENCE QUERYABLE,",
            "        name STRING,",
            "        address STRING,",
            "        hiredate TIMESTAMP,",
            "        salary INT64,",
            "        GRANT WRITE TO \"_creator\", ",
            "        GRANT CREATE TO \"_icloud\",",
            "        GRANT READ TO \"_world\"",
            "    );"
          ],
          "syntax": "other",
          "metadata": {
            "anchor": "3783225",
            "title": "Listing 6"
          }
        },
        {
          "type": "paragraph",
          "inlineContent": []
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2021 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}