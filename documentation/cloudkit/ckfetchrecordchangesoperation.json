{
  "abstract": [
    {
      "type": "text",
      "text": "An operation that reports on the changed and deleted records in the specified record zone."
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/cloudkit",
        "doc://com.apple.documentation/documentation/cloudkit/record_operations",
        "doc://com.apple.documentation/documentation/cloudkit/record_operations/deprecated_symbols"
      ]
    ]
  },
  "identifier": {
    "url": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation",
    "interfaceLanguage": "occ"
  },
  "legacy_identifier": 1515294,
  "kind": "symbol",
  "metadata": {
    "title": "CKFetchRecordChangesOperation",
    "role": "symbol",
    "roleHeading": "Class",
    "modules": [
      {
        "name": "CloudKit"
      }
    ],
    "platforms": [
      {
        "name": "iOS",
        "introducedAt": "8.0",
        "deprecatedAt": "10.0",
        "current": "14.3",
        "deprecated": true
      },
      {
        "name": "macOS",
        "introducedAt": "10.10",
        "deprecatedAt": "10.12",
        "current": "11.1",
        "deprecated": true
      },
      {
        "name": "Mac Catalyst",
        "introducedAt": "13.0",
        "deprecatedAt": "13.0",
        "current": "14.3",
        "deprecated": true
      },
      {
        "name": "tvOS",
        "introducedAt": "9.0",
        "deprecatedAt": "10.0",
        "current": "14.3",
        "deprecated": true
      },
      {
        "name": "watchOS",
        "introducedAt": "3.0",
        "deprecatedAt": "3.0",
        "current": "7.2",
        "deprecated": true
      }
    ],
    "externalID": "c:objc(cs)CKFetchRecordChangesOperation",
    "symbolKind": "cl"
  },
  "schemaVersion": {
    "major": 1,
    "minor": 0,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ],
      "paths": [
        "documentation/cloudkit/ckfetchrecordchangesoperation"
      ]
    },
    {
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ],
      "paths": [
        "documentation/cloudkit/ckfetchrecordchangesoperation"
      ]
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/cloudkit": {
      "title": "CloudKit",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit",
      "url": "/documentation/cloudkit",
      "type": "topic",
      "kind": "symbol",
      "role": "collection"
    },
    "doc://com.apple.documentation/documentation/cloudkit/record_operations": {
      "title": "Record Operations",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/record_operations",
      "url": "/documentation/cloudkit/record_operations",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/cloudkit/record_operations/deprecated_symbols": {
      "title": "Deprecated Symbols",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/record_operations/deprecated_symbols",
      "url": "/documentation/cloudkit/record_operations/deprecated_symbols",
      "type": "topic",
      "kind": "article",
      "role": "collectionGroup"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordzonechangesoperation": {
      "title": "CKFetchRecordZoneChangesOperation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordzonechangesoperation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordzonechangesoperation"
    },
    "doc://com.apple.documentation/documentation/foundation/nsoperation/1408085-completionblock": {
      "title": "completionBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsoperation/1408085-completionblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/foundation/nsoperation/1408085-completionblock"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckdatabaseoperation": {
      "title": "CKDatabaseOperation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckdatabaseoperation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckdatabaseoperation"
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515224-initwithrecordzoneid": {
      "title": "initWithRecordZoneID:previousServerChangeToken:",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515224-initwithrecordzoneid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordchangesoperation/1515224-initwithrecordzoneid",
      "abstract": [
        {
          "type": "text",
          "text": "Creates an operation for fetching changes in the specified record zone."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "initWithRecordZoneID:previousServerChangeToken:"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/2715828-init": {
      "title": "init",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/2715828-init",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordchangesoperation/2715828-init",
      "abstract": [
        {
          "type": "text",
          "text": "Creates an empty fetch record changes operation."
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "init"
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515018-recordzoneid": {
      "title": "recordZoneID",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515018-recordzoneid",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordchangesoperation/1515018-recordzoneid",
      "abstract": [
        {
          "type": "text",
          "text": "The ID of the record zone with the records you want to fetch."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515209-previousserverchangetoken": {
      "title": "previousServerChangeToken",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515209-previousserverchangetoken",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordchangesoperation/1515209-previousserverchangetoken",
      "abstract": [
        {
          "type": "text",
          "text": "The token that identifies the starting point for retrieving changes. "
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515230-desiredkeys": {
      "title": "desiredKeys",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515230-desiredkeys",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordchangesoperation/1515230-desiredkeys",
      "abstract": [
        {
          "type": "text",
          "text": "The fields to fetch for the requested records."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1514891-resultslimit": {
      "title": "resultsLimit",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1514891-resultslimit",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordchangesoperation/1514891-resultslimit",
      "abstract": [
        {
          "type": "text",
          "text": "The maximum number of changed records to report with this operation object."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515322-morecoming": {
      "title": "moreComing",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515322-morecoming",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordchangesoperation/1515322-morecoming",
      "abstract": [
        {
          "type": "text",
          "text": "A Boolean value that indicates whether more results are available."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515155-recordchangedblock": {
      "title": "recordChangedBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515155-recordchangedblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordchangesoperation/1515155-recordchangedblock",
      "abstract": [
        {
          "type": "text",
          "text": "The block to execute with the contents of a changed record."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515054-recordwithidwasdeletedblock": {
      "title": "recordWithIDWasDeletedBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515054-recordwithidwasdeletedblock",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordchangesoperation/1515054-recordwithidwasdeletedblock",
      "abstract": [
        {
          "type": "text",
          "text": "The block to execute with the ID of a deleted record."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515267-fetchrecordchangescompletionbloc": {
      "title": "fetchRecordChangesCompletionBlock",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515267-fetchrecordchangescompletionbloc",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordchangesoperation/1515267-fetchrecordchangescompletionbloc",
      "abstract": [
        {
          "type": "text",
          "text": "The block to execute when the system finishes processing all changes."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation": {
      "title": "CKFetchRecordChangesOperation",
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation",
      "kind": "symbol",
      "role": "symbol",
      "url": "/documentation/cloudkit/ckfetchrecordchangesoperation",
      "abstract": [
        {
          "type": "text",
          "text": "An operation that reports on the changed and deleted records in the specified record zone."
        }
      ],
      "deprecated": true
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "type": "topic",
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "url": "/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies"
    }
  },
  "deprecationSummary": [
    {
      "type": "paragraph",
      "inlineContent": [
        {
          "type": "text",
          "text": "Use "
        },
        {
          "type": "reference",
          "isActive": true,
          "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordzonechangesoperation"
        },
        {
          "type": "text",
          "text": " instead."
        }
      ]
    }
  ],
  "diffAvailability": {
    "major": {
      "change": "modified",
      "platform": "Xcode",
      "versions": [
        "12.0",
        "12.3 Release Candidate"
      ]
    }
  },
  "relationshipsSections": [
    {
      "kind": "relationships",
      "title": "Inherits From",
      "type": "inheritsFrom",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckdatabaseoperation"
      ]
    }
  ],
  "topicSections": [
    {
      "kind": "taskGroup",
      "title": "Creating the Fetch Record Changes Operation",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515224-initwithrecordzoneid",
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/2715828-init"
      ]
    },
    {
      "kind": "taskGroup",
      "title": "Configuring the Fetch Record Changes Operation",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515018-recordzoneid",
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515209-previousserverchangetoken",
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515230-desiredkeys",
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1514891-resultslimit",
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515322-morecoming"
      ]
    },
    {
      "kind": "taskGroup",
      "title": "Processing the Fetch Record Changes Results",
      "identifiers": [
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515155-recordchangedblock",
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515054-recordwithidwasdeletedblock",
        "doc://com.apple.documentation/documentation/cloudkit/ckfetchrecordchangesoperation/1515267-fetchrecordchangescompletionbloc"
      ]
    }
  ],
  "primaryContentSections": [
    {
      "kind": "declarations",
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "@interface"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "CKFetchRecordChangesOperation"
            },
            {
              "kind": "text",
              "text": " : "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)CKDatabaseOperation",
              "identifier": "doc://com.apple.documentation/documentation/cloudkit/ckdatabaseoperation",
              "text": "CKDatabaseOperation"
            }
          ],
          "platforms": [
            "iOS",
            "macOS",
            "Mac Catalyst",
            "tvOS",
            "watchOS"
          ]
        }
      ]
    },
    {
      "kind": "content",
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "Use this type of operation object to optimize fetch operations for locally managed sets of records. Specifically, use it when you maintain a local cache of your record data and need to synchronize that cache periodically with the server."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "To get the most benefit out of a "
            },
            {
              "type": "codeVoice",
              "code": "CKFetchRecordChangesOperation"
            },
            {
              "type": "text",
              "text": " object, you must maintain a local cache of the records from the specified zone. Each time you fetch changes from that zone, the server provides a token that identifies your request. With each subsequent fetch request, you initialize the operation object with the token from the previous request, and the server returns only the records with changes since that request."
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "The blocks you assign to process the fetched records execute serially on an internal queue that the operation manages. Your blocks must be capable of executing on a background thread, so any tasks that require access to the main thread must redirect accordingly.  "
            }
          ]
        },
        {
          "type": "paragraph",
          "inlineContent": [
            {
              "type": "text",
              "text": "If you assign a completion block to the "
            },
            {
              "type": "reference",
              "isActive": true,
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsoperation/1408085-completionblock"
            },
            {
              "type": "text",
              "text": " property of the operation object, the system calls the completion block after the operation executes and returns its results to you. You can use a completion block to perform housekeeping tasks for the operation, but donâ€™t use it to process the results of the operation. Any completion block you specify should handle the failure of the operation to complete its task, whether due to an error or an explicit cancellation. "
            }
          ]
        }
      ]
    }
  ],
  "legalNotices": {
    "copyright": "Copyright &copy; 2020 Apple Inc. All rights reserved.",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy"
  }
}